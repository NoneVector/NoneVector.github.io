<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><div id="myscoll"></div><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>JAVA代码审计一 | NoneVector</title><meta name="keywords" content="JAVA"><meta name="author" content="NoneVector,2339115702@qq.com"><meta name="copyright" content="NoneVector"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="JAVA安全基础">
<meta property="og:type" content="article">
<meta property="og:title" content="JAVA代码审计一">
<meta property="og:url" content="https://nonevector.top/posts/22.html">
<meta property="og:site_name" content="NoneVector">
<meta property="og:description" content="JAVA安全基础">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://git.acwing.com/w2x/data_bank/-/raw/master/anmi/Pixiv/78445866_p0.jpg">
<meta property="article:published_time" content="2024-06-26T01:48:09.358Z">
<meta property="article:modified_time" content="2024-06-26T04:24:55.547Z">
<meta property="article:author" content="NoneVector">
<meta property="article:tag" content="JAVA">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://git.acwing.com/w2x/data_bank/-/raw/master/anmi/Pixiv/78445866_p0.jpg"><link rel="shortcut icon" href="/assets/favicon.ico"><link rel="canonical" href="https://nonevector.top/posts/22"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.js',
      css: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'JAVA代码审计一',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-06-26 12:24:55'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="https://npm.elemecdn.com/ethan4116-blog/lib/css/plane_v2.css"><script src="https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js"></script><script src="https://npm.elemecdn.com/echarts@4.9.0/map/js/china.js"></script><link rel="stylesheet" href="https://cdn1.tianli0.top/npm/element-ui@2.15.6/packages/theme-chalk/lib/index.css"><style id="themeColor"></style><style id="rightSide"></style><style id="transPercent"></style><style id="blurNum"></style><style id="settingStyle"></style><span id="fps"></span><style id="defineBg"></style><style id="menu_shadow"></style><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><!-- hexo injector head_end start --><link rel="stylesheet" href="https://unpkg.zhimg.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="NoneVector" type="application/atom+xml">
</head><body><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><div class="loading-img"></div><div class="loading-image-dot"></div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/assets/1.jpg" onerror="onerror=null;src='/assets/r1.jpg'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">23</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">43</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shouye"></use></svg><span class="menu_word" style="font-size:17px"> 首页</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-wenzhang"></use></svg><span class="menu_word" style="font-size:17px"> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guidang">                   </use></svg><span class="menu_word" style="font-size:17px"> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-biaoqian">                   </use></svg><span class="menu_word" style="font-size:17px"> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-fenlei">                   </use></svg><span class="menu_word" style="font-size:17px"> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xiuxian"></use></svg><span class="menu_word" style="font-size:17px"> 休闲</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-yinlehe">                   </use></svg><span class="menu_word" style="font-size:17px"> 音乐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-youxishoubing">                   </use></svg><span class="menu_word" style="font-size:17px"> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xiangzi"></use></svg><span class="menu_word" style="font-size:17px"> 八宝箱</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/gallery/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-gallery">                   </use></svg><span class="menu_word" style="font-size:17px"> 画廊</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/animation/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-maozi">                   </use></svg><span class="menu_word" style="font-size:17px"> 动画</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/nav/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-zhifengche">                   </use></svg><span class="menu_word" style="font-size:17px"> 网址导航</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-jiaoliu1"></use></svg><span class="menu_word" style="font-size:17px"> 社交</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-liuyanban">                   </use></svg><span class="menu_word" style="font-size:17px"> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-icon-test">                   </use></svg><span class="menu_word" style="font-size:17px"> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-WEBSITE"></use></svg><span class="menu_word" style="font-size:17px"> 网站</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--tongjibiao">                   </use></svg><span class="menu_word" style="font-size:17px"> 网站统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/charts/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-tubiao_moban-68">                   </use></svg><span class="menu_word" style="font-size:17px"> 文章统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/time/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shijian">                   </use></svg><span class="menu_word" style="font-size:17px"> 旧时光</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-PersonalDataProtection"></use></svg><span class="menu_word" style="font-size:17px"> 个人</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/personal/bb/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-jiaoliu">                   </use></svg><span class="menu_word" style="font-size:17px"> 唠叨</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/about/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-zhifeiji">                   </use></svg><span class="menu_word" style="font-size:17px"> 关于</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">NoneVector</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shouye"></use></svg><span class="menu_word" style="font-size:17px"> 首页</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-wenzhang"></use></svg><span class="menu_word" style="font-size:17px"> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guidang">                   </use></svg><span class="menu_word" style="font-size:17px"> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-biaoqian">                   </use></svg><span class="menu_word" style="font-size:17px"> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-fenlei">                   </use></svg><span class="menu_word" style="font-size:17px"> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xiuxian"></use></svg><span class="menu_word" style="font-size:17px"> 休闲</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-yinlehe">                   </use></svg><span class="menu_word" style="font-size:17px"> 音乐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-youxishoubing">                   </use></svg><span class="menu_word" style="font-size:17px"> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xiangzi"></use></svg><span class="menu_word" style="font-size:17px"> 八宝箱</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/gallery/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-gallery">                   </use></svg><span class="menu_word" style="font-size:17px"> 画廊</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/animation/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-maozi">                   </use></svg><span class="menu_word" style="font-size:17px"> 动画</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/nav/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-zhifengche">                   </use></svg><span class="menu_word" style="font-size:17px"> 网址导航</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-jiaoliu1"></use></svg><span class="menu_word" style="font-size:17px"> 社交</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-liuyanban">                   </use></svg><span class="menu_word" style="font-size:17px"> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-icon-test">                   </use></svg><span class="menu_word" style="font-size:17px"> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-WEBSITE"></use></svg><span class="menu_word" style="font-size:17px"> 网站</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--tongjibiao">                   </use></svg><span class="menu_word" style="font-size:17px"> 网站统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/charts/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-tubiao_moban-68">                   </use></svg><span class="menu_word" style="font-size:17px"> 文章统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/time/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shijian">                   </use></svg><span class="menu_word" style="font-size:17px"> 旧时光</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-PersonalDataProtection"></use></svg><span class="menu_word" style="font-size:17px"> 个人</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/personal/bb/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-jiaoliu">                   </use></svg><span class="menu_word" style="font-size:17px"> 唠叨</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/about/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-zhifeiji">                   </use></svg><span class="menu_word" style="font-size:17px"> 关于</span></a></li></ul></div></div><center id="name-container"><a id="page-name" href="javascript:scrollToTop()">PAGE_NAME</a></center><div id="nav-right"><div id="search-button"><a class="search faa-parent animated-hover" title="检索站内任何你想要的信息"><svg class="faa-tada icon" style="height:24px;width:24px;fill:currentColor;position:relative;top:6px" aria-hidden="true"><use xlink:href="#icon-sousuo"></use></svg><span> 搜索</span></a></div><a class="meihua faa-parent animated-hover" onclick="toggleWinbox()" title="美化设置-自定义你的风格" id="meihua-button"><svg class="faa-tada icon" style="height:26px;width:26px;fill:currentColor;position:relative;top:8px" aria-hidden="true"><use xlink:href="#icon-shezhi"></use></svg></a><a class="sun_moon faa-parent animated-hover" onclick="switchNightMode()" title="浅色和深色模式转换" id="nightmode-button"><svg class="faa-tada" style="height:25px;width:25px;fill:currentColor;position:relative;top:7px" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-yueliang">       </use></svg></a><div id="toggle-menu"><a><i class="fas fa-bars fa-fw"></i></a></div></div></div></nav><div id="post-info"><h1 class="post-title">JAVA代码审计一</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><svg class="meta_icon post-meta-icon" style="width:30px;height:30px;position:relative;top:10px"><use xlink:href="#icon-rili"></use></svg><span class="post-meta-label">发表于 </span><time class="post-meta-date-created" datetime="2024-06-26T01:48:09.358Z" title="发表于 2024-06-26 09:48:09">2024-06-26</time><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-gengxin1"></use></svg><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-06-26T04:24:55.547Z" title="更新于 2024-06-26 12:24:55">2024-06-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-biaoqian"></use></svg><a class="post-meta-categories" href="/categories/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/">代码审计</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:8px"><use xlink:href="#icon-charuword"></use></svg><span class="post-meta-label">字数总计:</span><span class="word-count">4.4w</span><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:20px;height:20px;position:relative;top:5px"><use xlink:href="#icon-shizhong"></use></svg><span class="post-meta-label">阅读时长:</span><span>167分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="JAVA代码审计一"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:5px"><use xlink:href="#icon-eye"></use></svg><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="前提">前提</h2>
<p>我自己的环境是jdk8，idea2023.3.6（比较基础请自行配置好环境）</p>
<ol>
<li>
<p>JAVA安装</p>
</li>
<li>
<p>Maven安装</p>
</li>
<li>
<p>MySQL</p>
</li>
<li>
<p>Tomcat</p>
</li>
<li>
<p>IDEA安装</p>
</li>
<li>
<p>ChatGPT 的灵活使用</p>
</li>
</ol>
<h2 id="Java-基础语法一课通">Java 基础语法一课通</h2>
<h3 id="一-基础知识">一 基础知识</h3>
<h4 id="1-项目搭建">1 项目搭建</h4>
<p>对于下面代码练习，我们需要先创建一个项目。</p>
<p>我个人习惯于直接基础的 SpringBoot 项目，在进行一些代码的调试。</p>
<p>创建方法很简单，在你的第一个 IDEA 项目中也讲到过了。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE.jpg" alt="创建项目"></p>
<p>点击下一步，选择依赖项页面，默认内容即可。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E9%80%89%E6%8B%A9%E4%BE%9D%E8%B5%96.jpg" alt="选择依赖"></p>
<p>最后点击创建。</p>
<p>我们相关练习代码在<code>src\main\java\com\example\javademo</code>下右键选中该目录后，新建相关 Java Class 即可，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E6%96%B0%E5%BB%BAjavaclass.jpg" alt="新建javaclass"></p>
<h4 id="2-Java-关键字">2 Java 关键字</h4>
<p>Java 关键字是对 Java编译器有特殊含义的字符串，是编译器和程序员的一个约定，程序员利用关键字来告诉编译器其声明的变量类型、类、方法特性等信息。</p>
<table>
<thead>
<tr>
<th style="text-align:center">关键字</th>
<th style="text-align:center">关键字</th>
<th style="text-align:center">关键字</th>
<th style="text-align:center">关键字</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">abstract</td>
<td style="text-align:center">assert</td>
<td style="text-align:center">boolean</td>
<td style="text-align:center">break</td>
</tr>
<tr>
<td style="text-align:center">byte</td>
<td style="text-align:center">case</td>
<td style="text-align:center">catch</td>
<td style="text-align:center">char</td>
</tr>
<tr>
<td style="text-align:center">class</td>
<td style="text-align:center">const</td>
<td style="text-align:center">continue</td>
<td style="text-align:center">default</td>
</tr>
<tr>
<td style="text-align:center">do</td>
<td style="text-align:center">double</td>
<td style="text-align:center">else</td>
<td style="text-align:center">enum</td>
</tr>
<tr>
<td style="text-align:center">extends</td>
<td style="text-align:center">final</td>
<td style="text-align:center">finally</td>
<td style="text-align:center">float</td>
</tr>
<tr>
<td style="text-align:center">for</td>
<td style="text-align:center">goto</td>
<td style="text-align:center">if</td>
<td style="text-align:center">implements</td>
</tr>
<tr>
<td style="text-align:center">import</td>
<td style="text-align:center">instanceof</td>
<td style="text-align:center">int</td>
<td style="text-align:center">interface</td>
</tr>
<tr>
<td style="text-align:center">long</td>
<td style="text-align:center">native</td>
<td style="text-align:center">new</td>
<td style="text-align:center">package</td>
</tr>
<tr>
<td style="text-align:center">private</td>
<td style="text-align:center">protected</td>
<td style="text-align:center">public</td>
<td style="text-align:center">return</td>
</tr>
<tr>
<td style="text-align:center">short</td>
<td style="text-align:center">static</td>
<td style="text-align:center">strictfp</td>
<td style="text-align:center">super</td>
</tr>
<tr>
<td style="text-align:center">switch</td>
<td style="text-align:center">synchronized</td>
<td style="text-align:center">this</td>
<td style="text-align:center">throw</td>
</tr>
<tr>
<td style="text-align:center">throws</td>
<td style="text-align:center">transient</td>
<td style="text-align:center">try</td>
<td style="text-align:center">void</td>
</tr>
<tr>
<td style="text-align:center">volatile</td>
<td style="text-align:center">while</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<h4 id="3-修饰符">3 修饰符</h4>
<p><strong>public（公开的）：</strong></p>
<ul>
<li><strong>含义：</strong> 使用 <code>public</code> 修饰符的类是完全公开的，可以在任何地方访问。</li>
<li><strong>使用场景：</strong> 当你希望类的实例能够在任何地方都能被创建和访问时，或者当你编写的是一个库（library）的一部分，希望让其他开发者能够使用这个类。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">    <span class="comment">// 类的定义</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>没有修饰符（default）：</strong></p>
<ul>
<li><strong>含义：</strong> 如果没有使用任何修饰符，默认情况下，类的可见性为包级别，只能在同一个包中访问。</li>
<li><strong>使用场景：</strong> 当你希望类在同一个包中的其他类能够访问，但不希望被包外的类访问时使用。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">    <span class="comment">// 类的定义</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>protected（保护的）：</strong></p>
<ul>
<li><strong>含义：</strong> 使用 <code>protected</code> 修饰符的类可以被同一包中的其他类访问，以及该类的子类（无论子类在哪个包中）。</li>
<li><strong>使用场景：</strong> 通常较少用于修饰类，更多地用于修饰成员变量和方法。当你希望子类能够访问类的成员，但其他类不能访问时使用。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">    <span class="comment">// 类的定义</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>private（私有的）：</strong></p>
<ul>
<li><strong>含义：</strong> 使用 <code>private</code> 修饰符的类只能被同一类中的其他类访问，通常用于嵌套类或内部实现细节。</li>
<li><strong>使用场景：</strong> 当你希望将类的细节隐藏在同一类的内部，不让其他类直接访问时使用。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">    <span class="comment">// 类的定义</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>举个例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OuterClass</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> outerData;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">OuterClass</span><span class="params">(<span class="type">int</span> data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.outerData = data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 内部类</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">InnerClass</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> innerData;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 构造函数</span></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">InnerClass</span><span class="params">(<span class="type">int</span> data)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.innerData = data;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Outer data: &quot;</span> + outerData);</span><br><span class="line">            System.out.println(<span class="string">&quot;Inner data: &quot;</span> + innerData);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 外部类的方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">outerMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">InnerClass</span> <span class="variable">innerObj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InnerClass</span>(<span class="number">20</span>);</span><br><span class="line">        innerObj.display();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">OuterClass</span> <span class="variable">Obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OuterClass</span>(<span class="number">10</span>);</span><br><span class="line">        outerObj.outerMethod();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-数据类型">4 数据类型</h4>
<h5 id="4-1-基础概念">4.1 基础概念</h5>
<p>在  Java  中，数据类型是用来定义变量的类型，以决定变量可以存储的数据种类。  Java  的数据类型主要分为两大类：基本数据类型和引用数据类型。基本数据类型包括整型（byte short int long） 浮点型（float double） 字符型（char）和布尔型（boolean）。</p>
<h5 id="4-2-代码案例">4.2 代码案例</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 整型示例</span></span><br><span class="line"><span class="type">int</span> <span class="variable">integerVariable</span> <span class="operator">=</span> <span class="number">42</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 浮点型示例</span></span><br><span class="line"><span class="type">double</span> <span class="variable">doubleVariable</span> <span class="operator">=</span> <span class="number">3.14</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符型示例</span></span><br><span class="line"><span class="type">char</span> <span class="variable">charVariable</span> <span class="operator">=</span> <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 布尔型示例</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">booleanVariable</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>
<h4 id="5-变量">5 变量</h4>
<h5 id="5-1-基础概念">5.1 基础概念</h5>
<p>变量是用于存储数据的内存空间的标识符。在  Java  中，变量必须先声明后使用，并指定其数据类型。变量的命名要符合  Java  的命名规范，遵循驼峰命名法。</p>
<h5 id="5-2-代码案例">5.2 代码案例</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明和初始化整型变量</span></span><br><span class="line"><span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明和初始化字符串变量</span></span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;John&quot;</span>;</span><br></pre></td></tr></table></figure>
<h4 id="6-基本运算符">6 基本运算符</h4>
<h5 id="6-1-基础概念">6.1 基础概念</h5>
<p>基本运算符包括算术运算符（+、-、*、/、%）、关系运算符（==、!=、&lt;、&gt;、&lt;=、&gt;=）、逻辑运算符（&amp;&amp;、||、!）等。它们用于执行常见的数学和逻辑运算。</p>
<h5 id="6-2-代码案例">6.2 代码案例</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 算术运算</span></span><br><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">5</span>, b = <span class="number">3</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> a + b;</span><br><span class="line"><span class="type">int</span> <span class="variable">difference</span> <span class="operator">=</span> a - b;</span><br><span class="line"><span class="type">int</span> <span class="variable">product</span> <span class="operator">=</span> a * b;</span><br><span class="line"><span class="type">double</span> <span class="variable">quotient</span> <span class="operator">=</span> (<span class="type">double</span>) a / b; <span class="comment">// 注意类型转换</span></span><br><span class="line"><span class="type">int</span> <span class="variable">remainder</span> <span class="operator">=</span> a % b;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关系运算</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">isEqual</span> <span class="operator">=</span> (a == b);</span><br><span class="line"><span class="type">boolean</span> <span class="variable">isGreaterThan</span> <span class="operator">=</span> (a &gt; b);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 逻辑运算</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">logicalAnd</span> <span class="operator">=</span> (<span class="literal">true</span> &amp;&amp; <span class="literal">false</span>);</span><br><span class="line"><span class="type">boolean</span> <span class="variable">logicalOr</span> <span class="operator">=</span> (<span class="literal">true</span> || <span class="literal">false</span>);</span><br><span class="line"><span class="type">boolean</span> <span class="variable">logicalNot</span> <span class="operator">=</span> !<span class="literal">true</span>;</span><br></pre></td></tr></table></figure>
<h4 id="7-顺序结构">7 顺序结构</h4>
<h5 id="7-1-基础概念">7.1 基础概念</h5>
<p>顺序结构是程序中最简单的结构，代码按照书写的顺序一行一行地执行。每一行代码都在前一行代码执行完毕后执行。</p>
<h5 id="7-2-代码案例">7.2 代码案例</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 顺序结构示例</span></span><br><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> a + b;</span><br><span class="line">System.out.println(<span class="string">&quot;Sum: &quot;</span> + sum);</span><br></pre></td></tr></table></figure>
<h4 id="8-选择结构">8 选择结构</h4>
<h5 id="8-1-基础概念">8.1 基础概念</h5>
<p>选择结构允许根据条件选择执行不同的代码块。在  Java  中，常见的选择结构有if语句、if-else语句和switch语句。</p>
<h5 id="8-2-代码案例">8.2 代码案例</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// if语句示例</span></span><br><span class="line"><span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> <span class="number">6</span>;</span><br><span class="line"><span class="keyword">if</span> (number / <span class="number">2</span> == <span class="number">3</span>) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NestedIfExample</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (x &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;X 大于 0.&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (y &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Y 也大于 0.&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;y 小于 0.&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;X 小于0.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="9-循环结构">9 循环结构</h4>
<h5 id="9-1-基础概念">9.1 基础概念</h5>
<p>循环结构允许多次执行相同的代码块，直到满足退出条件。在  Java  中，常见的循环结构有 for 循环、while 循环和 do-while 循环。</p>
<h5 id="9-2-代码案例">9.2 代码案例</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (初始化; 循环条件; 循环迭代) &#123;</span><br><span class="line">    <span class="comment">// 循环体</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// for循环示例</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;当前值为&quot;</span> + i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="10-数组">10 数组</h4>
<h5 id="10-1-基础概念">10.1 基础概念</h5>
<p>数组是一种存储相同类型数据的集合。在  Java  中，数组是固定大小的，可以通过索引访问其中的元素。</p>
<h5 id="10-2-代码案例">10.2 代码案例</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数组示例</span></span><br><span class="line"><span class="type">int</span>[] numbers = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">System.out.println(<span class="string">&quot;First element: &quot;</span> + numbers[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] numbers = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; numbers.length; i++) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;数组元素为：&quot;</span> + numbers[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="11-函数方法">11 函数方法</h4>
<p>在  Java  中，函数方法是一组执行特定任务的代码块。方法提供了程序的模块化和重用性。方法由方法名、参数列表、返回类型和方法体组成。 Java 中的方法可以分为普通方法和静态方法，普通方法需要实例化对象调用，而静态方法属于类，可以通过类名直接调用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">    <span class="comment">// 普通方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printMessage</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        System.out.println(message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyClass</span> <span class="variable">myObject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line">        myObject.printMessage(<span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 返回两个整型变量数据的较大值 */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">max</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span> &#123;</span><br><span class="line">   <span class="type">int</span> result;</span><br><span class="line">   <span class="keyword">if</span> (num1 &gt; num2)</span><br><span class="line">      result = num1;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">      result = num2;</span><br><span class="line"> </span><br><span class="line">   <span class="keyword">return</span> result; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果我们想要使用，只需<code>max(1,2)</code>即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VoidMethodExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 调用无返回值的方法</span></span><br><span class="line">        displayMessage();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 一个无返回值的方法，用于显示一条简单的消息</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">displayMessage</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;这是一个无返回值的方法代码案例。&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="12-Java-异常处理">12 Java 异常处理</h5>
<p>异常是指在程序运行时发生的意外情况，可能导致程序中断或产生不可预知的结果。Java 中的异常处理机制通过 try、catch、finally 块来捕获和处理异常。异常分为检查异常（Checked Exception）和非检查异常（Unchecked Exception）。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExceptionHandling</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">10</span> / <span class="number">0</span>; <span class="comment">// 会抛出ArithmeticException</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArithmeticException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Cannot divide by zero.&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Finally block always executes.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong><code>try</code>块：</strong> 在<code>try</code>块内，包含可能引发异常的代码。在这里，<code>int result = 10 / 0;</code> 尝试进行除法运算，但由于除数是0，这会导致算术异常。</p>
<p><strong><code>catch</code>块：</strong> 如果在<code>try</code>块中发生了异常，控制流会跳转到对应的<code>catch</code>块。在这里，<code>catch (ArithmeticException e)</code> 捕获了<code>ArithmeticException</code>异常，表示发生了除以零的情况。<code>catch</code>块内的代码会被执行，输出提示信息：“Cannot divide by zero.”。</p>
<p><strong><code>finally</code>块：</strong> 无论是否发生异常，<code>finally</code>块中的代码总是会被执行。在这里，输出信息：“Finally block always executes.”。<code>finally</code>块通常用于确保资源的释放或清理工作，无论是否发生异常。</p>
<h3 id="二-面向对象">二 面向对象</h3>
<p>面向对象（Object-Oriented，简称OOP）是一种编程思想和程序设计范式，它将程序中的数据和操作数据的方法组织成对象。在面向对象编程中，对象是程序的基本单元，每个对象可以包含数据（称为属性）和方法（称为行为）。</p>
<h4 id="1-类">1 类</h4>
<p>在编程中，类（Class）是一种抽象数据类型，用于描述具有相似属性和行为的对象集合。它是面向对象编程（Object-Oriented Programming，OOP）的核心概念之一，通过类可以创建对象，而对象则是类的实例。</p>
<p>我们初中生物讲过生物类，鸟类，鱼类等。这两个不同的类别，它们有着不同的特征和行为。同样，在编程中，类是一种将数据和方法组合在一起的结构，用于描述某种抽象概念或实体。</p>
<p>简单来说，类是一种用于描述对象的蓝图或模板。它定义了对象的属性（成员变量）和行为（方法）。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个Bird类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Bird</span> &#123;</span><br><span class="line">    <span class="comment">// 成员变量，描述鸟类的属性</span></span><br><span class="line">    <span class="keyword">private</span> String feathers;</span><br><span class="line">    <span class="keyword">private</span> String beakShape;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造方法，用于初始化对象的属性</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Bird</span><span class="params">(String feathers, String beakShape)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.feathers = feathers;</span><br><span class="line">        <span class="built_in">this</span>.beakShape = beakShape;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 成员方法，描述鸟类的行为</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fly</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;The bird is flying.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Getter方法，用于获取羽毛属性</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getFeathers</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> feathers;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Setter方法，用于设置羽毛属性</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFeathers</span><span class="params">(String feathers)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.feathers = feathers;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在另一个类中使用Bird类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BirdExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建一个鹰对象</span></span><br><span class="line">        <span class="type">Bird</span> <span class="variable">eagle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bird</span>(<span class="string">&quot;brown&quot;</span>, <span class="string">&quot;hooked&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 调用鹰对象的飞行方法</span></span><br><span class="line">        eagle.fly();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取并输出鹰的羽毛属性</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">feathers</span> <span class="operator">=</span> eagle.getFeathers();</span><br><span class="line">        System.out.println(<span class="string">&quot;Feathers: &quot;</span> + feathers);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置新的羽毛属性并输出</span></span><br><span class="line">        eagle.setFeathers(<span class="string">&quot;golden&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;New Feathers: &quot;</span> + eagle.getFeathers());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-对象">2 对象</h4>
<p>前面说到通过类可以创建对象，而对象则是类的实例。</p>
<p>实例化是为了创建对象，也就是我们使用类这个模板，以及可以进行自己所需的改动。</p>
<p>举个简单例子，我们从网上使用寻找 PPT 模板，最后下载使用，改成自己所需的内容。</p>
<p>这个过程和创建对象有些类似。</p>
<p>在    Java    中，实例化一个对象的过程通常包括使用 <code>new</code> 关键字来调用类的构造方法，并为对象分配内存空间。以下是一个简单的例子，演示如何在    Java    中实例化对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="comment">// 类的属性</span></span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 类的方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">bark</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Woof! Woof!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 实例化一个 Dog 类的对象</span></span><br><span class="line">        <span class="type">Dog</span> <span class="variable">myDog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置对象的属性值</span></span><br><span class="line">        myDog.name = <span class="string">&quot;Buddy&quot;</span>;</span><br><span class="line">        myDog.age = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 调用对象的方法</span></span><br><span class="line">        myDog.bark();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 输出对象的属性值</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Name: &quot;</span> + myDog.name);</span><br><span class="line">        System.out.println(<span class="string">&quot;Age: &quot;</span> + myDog.age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个简单的类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PPTTemplate</span> &#123;</span><br><span class="line">    <span class="comment">// 成员变量</span></span><br><span class="line">    String templateName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PPTTemplate</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.templateName = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 成员方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">customize</span><span class="params">(String content)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Customizing PPT template &#x27;&quot;</span> + templateName + <span class="string">&quot;&#x27; with content: &quot;</span> + content);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在另一个类中使用 PPTTemplate 类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PPTCreator</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 实例化 PPTTemplate 类，创建一个对象</span></span><br><span class="line">        <span class="type">PPTTemplate</span> <span class="variable">myTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PPTTemplate</span>(<span class="string">&quot;SimpleTemplate&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 调用对象的成员方法</span></span><br><span class="line">        myTemplate.customize(<span class="string">&quot;This is my custom content.&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建另一个对象</span></span><br><span class="line">        <span class="type">PPTTemplate</span> <span class="variable">anotherTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PPTTemplate</span>(<span class="string">&quot;FancyTemplate&quot;</span>);</span><br><span class="line">        anotherTemplate.customize(<span class="string">&quot;Adding some fancy graphics and animations.&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这个例子中，我们定义了一个简单的 <code>PPTTemplate</code> 类，其中包含了一个构造方法用于初始化对象的成员变量 <code>templateName</code>，以及一个成员方法 <code>customize</code> 用于自定义模板内容。然后，在 <code>PPTCreator</code> 类中，我们实例化了两个不同的 <code>PPTTemplate</code> 对象，每个对象代表一个不同的PPT模板，并通过调用对象的方法来进行自定义。</p>
<p>关键步骤：</p>
<p>① <code>PPTTemplate</code> 类的定义包括构造方法和成员方法。</p>
<p>② 在 <code>PPTCreator</code> 类的 <code>main</code> 方法中，通过 <code>new PPTTemplate(&quot;SimpleTemplate&quot;)</code> 实例化一个 <code>PPTTemplate</code> 对象，并指定模板名称为 “SimpleTemplate”。</p>
<p>③ 通过调用对象的成员方法 <code>myTemplate.customize(&quot;This is my custom content.&quot;);</code> 来自定义模板内容。</p>
<p>④ 同样地，创建另一个对象 <code>anotherTemplate</code> 并进行自定义。</p>
<p>实例化对象的过程涉及到为对象分配内存 调用构造方法进行初始化等步骤，这样就可以创建多个相互独立的对象，每个对象都有自己的状态（成员变量值）和行为（成员方法）。</p>
<h4 id="3-继承">3 继承</h4>
<p>基础概念：</p>
<p>继承是面向对象编程中的概念，允许一个类（子类）继承另一个类（父类）的属性和方法。子类可以继承父类的行为，并且可以通过添加新的属性和方法来扩展其功能。</p>
<p>解决的问题：</p>
<p>继承解决了代码重用和扩展的问题。通过继承，子类可以复用父类的代码，而不必重复实现相同的功能。同时，子类可以在保留父类功能的基础上，添加新的功能或修改部分功能，实现功能的扩展和定制。</p>
<p>代码案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;动物正在吃&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子类继承父类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">bark</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;狗在叫&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建子类对象</span></span><br><span class="line">        <span class="type">Dog</span> <span class="variable">myDog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 调用继承自父类的方法</span></span><br><span class="line">        myDog.eat();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 调用子类自己的方法</span></span><br><span class="line">        myDog.bark();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-封装">4 封装</h4>
<p>基础概念：</p>
<p>封装是将对象的内部状态和实现细节隐藏起来，只对外提供访问接口。在   Java   中，通过访问修饰符（如<code>private</code> <code>public</code>）来实现封装。</p>
<p>解决的问题：</p>
<p>封装解决了对象的安全性和灵活性问题。通过将内部细节隐藏，防止外部直接访问对象的属性，从而保护对象的状态。同时，通过提供公共的方法，使得对象能够以受控制的方式被外部访问和修改。</p>
<p>代码案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// 私有属性</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Getter方法，用于获取name属性值</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Setter方法，用于设置name属性值，并进行非空验证</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String newName)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (newName != <span class="literal">null</span> &amp;&amp; !newName.isEmpty()) &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = newName;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Name cannot be null or empty.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Getter方法，用于获取age属性值</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Setter方法，用于设置age属性值，并进行年龄范围验证</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> newAge)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (newAge &gt;= <span class="number">0</span> &amp;&amp; newAge &lt;= <span class="number">150</span>) &#123;</span><br><span class="line">            <span class="built_in">this</span>.age = newAge;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Age must be between 0 and 150.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建一个Person对象</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用setter设置属性值</span></span><br><span class="line">        person.setName(<span class="string">&quot;John&quot;</span>);</span><br><span class="line">        person.setAge(<span class="number">25</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用getter获取属性值并输出</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Name: &quot;</span> + person.getName());</span><br><span class="line">        System.out.println(<span class="string">&quot;Age: &quot;</span> + person.getAge());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 尝试设置无效值</span></span><br><span class="line">        person.setName(<span class="string">&quot;&quot;</span>); <span class="comment">// 输出错误信息</span></span><br><span class="line">        person.setAge(<span class="number">200</span>); <span class="comment">// 输出错误信息</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="5-构造函数">5 构造函数</h4>
<p>基础概念：</p>
<p>构造函数是一个特殊的方法，与类同名，没有返回类型。它在对象被创建时调用，用于执行初始化操作。构造函数的主要目的是确保对象在被使用之前处于一个合理的状态。</p>
<p>构造函数可以显示的定义，也就是我们根据所需设置构造函数。</p>
<p>如果没有显示的提供构造函数，类仍然是可以被实例化的。</p>
<p>因为，如果你没有为类定义任何构造函数， Java 编译器会为你生成一个默认的无参数构造函数。这个构造函数会执行以下操作：</p>
<ul>
<li>将类的实例变量初始化为默认值（数值型为0，布尔型为false，对象型为null等）。</li>
<li>如果类继承自其他类，会调用父类的无参数构造函数。</li>
</ul>
<p>在构造函数中，又分为有参构造函数和无参构造函数。</p>
<p>都很好理解，就是是否需要传入参数。</p>
<p><strong>如果你显式地提供了自定义的构造函数（无论是有参数的还是无参数的），并且没有提供任何无参数构造函数，那么默认的无参数构造函数就不再自动生成。</strong></p>
<p><strong>也就是说除非目标类显示的自定义了无参构造函数，否则如果目标类只定义了有参构造函数的话，那就不会默认生成无参构造函数了。</strong></p>
<p>解决的问题：</p>
<p>构造函数解决了对象初始化的问题。通过构造函数，可以为对象的属性赋予初始值，执行必要的设置，使对象能够在创建时就具备正确的状态。</p>
<p>代码案例（无参构造函数）:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造函数，初始值</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Dog</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = <span class="string">&quot;juzi&quot;</span>;</span><br><span class="line">        <span class="built_in">this</span>.age = <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取狗的名字</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取狗的年龄</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 实例化一个Dog对象，使用初始值</span></span><br><span class="line">        <span class="type">Dog</span> <span class="variable">myDog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取狗的信息并打印</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Dog&#x27;s name: &quot;</span> + myDog.getName() + <span class="string">&quot;, Age: &quot;</span> + myDog.getAge());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>代码案例（有参构造函数）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 无参构造函数，使用默认值</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Dog</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = <span class="string">&quot;juzi&quot;</span>;</span><br><span class="line">        <span class="built_in">this</span>.age = <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 有参构造函数，接受名字和年龄参数</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Dog</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取狗的名字</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取狗的年龄</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 使用无参构造函数实例化一个Dog对象，使用默认值</span></span><br><span class="line">        <span class="type">Dog</span> <span class="variable">defaultDog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>();</span><br><span class="line">        System.out.println(<span class="string">&quot;Default Dog&#x27;s name: &quot;</span> + defaultDog.getName() + <span class="string">&quot;, Age: &quot;</span> + defaultDog.getAge());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用有参构造函数实例化一个Dog对象，提供自定义值</span></span><br><span class="line">        <span class="type">Dog</span> <span class="variable">customDog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="string">&quot;Buddy&quot;</span>, <span class="number">5</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Custom Dog&#x27;s name: &quot;</span> + customDog.getName() + <span class="string">&quot;, Age: &quot;</span> + customDog.getAge());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="5-1-继承中的构造函数">5.1 继承中的构造函数</h5>
<p><strong>默认情况：</strong></p>
<ul>
<li>如果父类（基类）有一个无参数的构造函数，子类（派生类）会自动继承这个无参数构造函数。</li>
<li>如果子类没有显式定义构造函数，编译器会默认生成一个无参数构造函数，并在其中调用父类的无参数构造函数。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="comment">// 父类有一个无参数构造函数</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="comment">// 子类没有显式定义构造函数，编译器默认生成一个无参数构造函数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>父类有有参数构造函数：</strong></p>
<ul>
<li>如果父类只提供了有参数的构造函数，子类需要显式定义构造函数，并通过<code>super()</code>调用适当的父类构造函数。此时 <code>super()</code>方法是必须的。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Animal</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="comment">// 父类有一个有参数构造函数</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Dog</span><span class="params">(String name, String breed)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name); <span class="comment">// 调用父类的有参数构造函数</span></span><br><span class="line">        <span class="comment">// 初始化子类特有的属性</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>子类提供无参数构造函数：</strong></p>
<ul>
<li>如果父类没有提供无参数构造函数，但子类需要使用无参数构造函数，子类需要显式提供无参数构造函数，并通过<code>super()</code>调用适当的父类构造函数。此时 <code>super()</code>方法是必须的。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Animal</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="comment">// 父类有一个有参数构造函数</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Dog</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="string">&quot;DefaultName&quot;</span>); <span class="comment">// 调用父类的有参数构造函数</span></span><br><span class="line">        <span class="comment">// 子类提供无参数构造函数，并在其中调用父类构造函数</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>总的来说，继承和构造函数的关系取决于父类的构造函数情况。在设计时，需要考虑如何在子类中正确地初始化父类的状态。</p>
<h4 id="6-函数方法重载">6 函数方法重载</h4>
<p>函数方法的重载是指在同一个类中可以定义多个方法，它们具有相同的方法名但具有不同的参数列表。编译器根据方法的参数数量、类型或顺序来选择合适的方法。</p>
<p>下面计算器示例代码也是一个比较经典的案例了，可以使用重载来实现任意加减乘除的运算。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Calculator</span> &#123;</span><br><span class="line">    <span class="comment">// 重载方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">add</span><span class="params">(<span class="type">double</span> a, <span class="type">double</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">add</span><span class="params">(String a, String b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Calculator</span> <span class="variable">myCalculator</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Calculator</span>();</span><br><span class="line">        System.out.println(myCalculator.add(<span class="number">2</span>, <span class="number">3</span>));</span><br><span class="line">        System.out.println(myCalculator.add(<span class="number">2.5</span>, <span class="number">3.5</span>));</span><br><span class="line">        System.out.println(myCalculator.add(<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot; World&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="7-构造函数中的重载">7 构造函数中的重载</h4>
<p>基础概念：</p>
<p>构造函数的重载是指在同一个类中定义多个构造函数，它们具有相同的名称但参数列表不同。通过构造函数的重载，可以提供多种初始化对象的方式。</p>
<p>解决的问题：</p>
<p>构造函数的重载解决了不同场景下对象初始化需求不同的问题。通过提供多个构造函数，使得用户能够选择适合自己需求的初始化方式。</p>
<p>代码案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造函数重载</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = <span class="string">&quot;Unknown&quot;</span>;</span><br><span class="line">        <span class="built_in">this</span>.age = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 其他类成员和方法...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="三-一些其他知识">三 一些其他知识</h3>
<h4 id="1-HashMap">1 HashMap</h4>
<p>基础概念</p>
<p><code>HashMap</code> 是 Java 中常用的集合类之一，用于存储Key-Value键值对的集合。它实现了 <code>Map</code> 接口，用于存储键值对。<code>HashMap</code> 的核心思想是通过散列算法将键映射到存储桶，提高查找效率。基本操作的时间复杂度为 O(1)。然而，需要注意 <code>HashMap</code> 不是线程安全的，如果在多线程环境中使用，可以考虑使用 <code>ConcurrentHashMap</code>。</p>
<p>在 Java 中，键值对是一种常见的数据结构，通常用于表示关联关系。键值对包含两部分：键（key）和值（value）。键是唯一的，通过键可以访问对应的值。</p>
<p>在 HashMap 中，最常用的就是 get 和 put 了，通过名字也能知道，一个是获取键值，一个是存入键值。</p>
<p>代码案例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMapExample</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建HashMap实例</span></span><br><span class="line">        Map&lt;String, Integer&gt; hashMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 添加键值对</span></span><br><span class="line">        hashMap.put(<span class="string">&quot;Java&quot;</span>, <span class="number">1</span>);</span><br><span class="line">        hashMap.put(<span class="string">&quot;Python&quot;</span>, <span class="number">2</span>);</span><br><span class="line">        hashMap.put(<span class="string">&quot;JavaScript&quot;</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取值</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">javaValue</span> <span class="operator">=</span> hashMap.get(<span class="string">&quot;Java&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Value for Java: &quot;</span> + javaValue);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 遍历键值对</span></span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry : hashMap.entrySet()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Key: &quot;</span> + entry.getKey() + <span class="string">&quot;, Value: &quot;</span> + entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-StringBuilder">2 StringBuilder</h4>
<p>基础概念</p>
<p><code>StringBuilder</code> 是 <code>java.lang</code> 包中的一个类，用于在单线程环境下对字符串进行可变操作，避免了使用 <code>String</code> 类时的不断创建新字符串的开销。它提供了一系列方法用于修改字符串内容，是一个可变的字符序列。</p>
<p>代码案例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringBuilderExample</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">stringBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 追加字符串</span></span><br><span class="line">        stringBuilder.append(<span class="string">&quot; World&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 插入字符串</span></span><br><span class="line">        stringBuilder.insert(<span class="number">5</span>, <span class="string">&quot;, Java&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 替换字符串</span></span><br><span class="line">        stringBuilder.replace(<span class="number">6</span>, <span class="number">11</span>, <span class="string">&quot;GPT&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 删除字符串</span></span><br><span class="line">        stringBuilder.delete(<span class="number">12</span>, <span class="number">17</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 输出结果</span></span><br><span class="line">        System.out.println(stringBuilder.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-StringBuffer">3 StringBuffer</h4>
<p>基础概念</p>
<p><code>StringBuffer</code> 与 <code>StringBuilder</code> 类似，也是可变的字符序列。主要区别在于 <code>StringBuffer</code> 是线程安全的，因此在多线程环境中更适用。然而，由于同步的开销，<code>StringBuilder</code> 在单线程情况下可能更高效。</p>
<p>代码案例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringBufferExample</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">stringBuffer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 追加字符串</span></span><br><span class="line">        stringBuffer.append(<span class="string">&quot; World&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 插入字符串</span></span><br><span class="line">        stringBuffer.insert(<span class="number">5</span>, <span class="string">&quot;, Java&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 替换字符串</span></span><br><span class="line">        stringBuffer.replace(<span class="number">6</span>, <span class="number">11</span>, <span class="string">&quot;GPT&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 删除字符串</span></span><br><span class="line">        stringBuffer.delete(<span class="number">12</span>, <span class="number">17</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 输出结果</span></span><br><span class="line">        System.out.println(stringBuffer.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-IO-流">4 IO 流</h4>
<p>基础概念</p>
<p>输入输出流（IO流）是 Java 中用于处理输入和输出的机制。它分为字节流和字符流，以及输入流和输出流。常见的 IO 类有 <code>FileInputStream</code>、<code>FileOutputStream</code>、<code>BufferedReader</code>、<code>BufferedWriter</code> 等。</p>
<p>可以进行文件读取，网络操作，缓冲操作读取字节流，对象序列化等操作，也是比较重要的。在第一阶段后面几个章节我们也会常接触的。</p>
<p>代码案例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IOExample</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 读取文件</span></span><br><span class="line">            <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;input.txt&quot;</span>));</span><br><span class="line">            <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> reader.readLine();</span><br><span class="line">            <span class="keyword">while</span> (line != <span class="literal">null</span>) &#123;</span><br><span class="line">                System.out.println(line);</span><br><span class="line">                line = reader.readLine();</span><br><span class="line">            &#125;</span><br><span class="line">            reader.close();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 写入文件</span></span><br><span class="line">            <span class="type">FileWriter</span> <span class="variable">writer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;output.txt&quot;</span>);</span><br><span class="line">            writer.write(<span class="string">&quot;Hello, IO!&quot;</span>);</span><br><span class="line">            writer.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="5-Object">5 Object</h4>
<p>基础概念</p>
<p><code>Object</code> 类是 Java 中所有类的根类，每个类都是 <code>Object</code> 类的子类。它定义了一些基本的方法，如 <code>toString</code>、<code>equals</code> 和 <code>hashCode</code>。在 Java 中，所有对象都可以被赋值给 <code>Object</code> 类型的变量。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>docs.oracle.com<span class="regexp">/javase/</span><span class="number">8</span><span class="regexp">/docs/</span>api<span class="regexp">/java/</span>lang/Object.html</span><br></pre></td></tr></table></figure>
<p><strong><code>toString()</code>方法：</strong></p>
<ul>
<li>用于返回对象的字符串表示。默认情况下，<code>toString()</code>返回类名后跟对象的哈希码。</li>
</ul>
<p><strong><code>equals(Object obj)</code>方法：</strong></p>
<ul>
<li>用于比较两个对象是否相等。默认实现是比较对象的引用地址，但通常在子类中会被重写以根据业务逻辑判断对象是否相等。</li>
</ul>
<p><strong><code>hashCode()</code>方法：</strong></p>
<ul>
<li>返回对象的哈希码。哈希码用于在哈希表等数据结构中快速查找对象。</li>
</ul>
<p><strong><code>getClass()</code>方法：</strong></p>
<ul>
<li>返回对象的运行时类，即对象所属的类。</li>
</ul>
<p><strong><code>notify()</code>、<code>notifyAll()</code>和<code>wait()</code>方法：</strong></p>
<ul>
<li>用于线程间的协调和通信。这些方法通常与多线程编程有关，用于实现线程的等待和唤醒机制。</li>
</ul>
<p><strong><code>finalize()</code>方法：</strong></p>
<ul>
<li>在垃圾回收器清理对象之前调用。子类可以重写此方法以执行资源清理等操作。</li>
</ul>
<p><strong><code>clone()</code>方法：</strong></p>
<ul>
<li>创建并返回一个对象的副本。默认情况下，<code>clone()</code>方法执行的是浅拷贝，但可以在子类中重写以实现深拷贝。</li>
</ul>
<p><strong><code>getClass()</code>方法：</strong></p>
<ul>
<li>返回对象的运行时类，即对象所属的类。</li>
</ul>
<p><strong><code>wait()</code>, <code>notify()</code>, <code>notifyAll()</code>：</strong></p>
<ul>
<li>用于线程间的协调和通信，通常与多线程编程相关。</li>
</ul>
<p>Java Web，是用 Java 技术来解决相关 WEB 互联网领域的技术栈。</p>
<p>WEB 包括：WEB 服务端和 WEB 客户端两部分。Java 在客户端的应用有 Java Applet，不过使用得很少。</p>
<p>Java在服务器端的应用非常的丰富，比如 Servlet，JSP、SpringBoot 等等。</p>
<p>JavaWeb 架构演变过程大致分为以下几个阶段：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/Java%E6%9E%B6%E6%9E%84%E6%BC%94%E5%8F%98.jpg" alt="Java架构演变"></p>
<p>下面，我们通过案例学习这些技术点。</p>
<h2 id="Servlet-以及过滤器、监听器和拦截器">Servlet 以及过滤器、监听器和拦截器</h2>
<h3 id="Servlet">Servlet</h3>
<h4 id="1-1、什么是Servlet">1.1、什么是Servlet</h4>
<p>Servlet 是运行在 Web 服务器或应用服务器上的程序，它是作为来自 Web 浏览器或其他 HTTP 客户端的请求和 HTTP 服务器上的数据库或应用程序之间的中间层。</p>
<p>画个简易图，便于理解。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/servlet%E6%B5%81%E7%A8%8B%E7%AE%80%E6%98%93%E5%9B%BE.jpg" alt="servlet流程简易图"></p>
<p>上面是个简易图，用语言描述下流程。</p>
<p>比如，我们打开一个网站有个注册功能，在填写完信息后，点击提交，所填写的信息传输到后端，根据所指向的路径，来匹配对应的servlet，专门用于处理注册流程。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E6%B3%A8%E5%86%8Cservlet.jpg" alt="注册servlet"></p>
<p>当然，我们还可以有登录Servlet，个人信息Servlet等等。</p>
<p>从代码上来说，Servlets 是 Java 类，服务于 HTTP 请求并实现了 <strong>javax.servlet.Servlet</strong> 接口。</p>
<h4 id="1-2、Servlet-生命周期">1.2、Servlet 生命周期</h4>
<p>Servlet 生命周期就是从创建到毁灭的过程。</p>
<p>大致是四个阶段。</p>
<ol>
<li>init()：初始化阶段，只被调用一次，也就是在第一次创建 Servlet 时被调用。</li>
<li>service()：服务阶段，主要处理来自客户端的请求，并可以根据 HTTP 请求类型来调用对应的方法，比如<code>doGet()，doPost()，doPut()</code>等等。</li>
<li>doGet()，doPost()：处理阶段，将主要代码逻辑写在此处。根据不同 HTTP 请求对应不同方法。</li>
<li>destroy()：销毁阶段，该方法只会被调用一次，即在 Servlet 生命期结束时被调用。一般都是在关闭系统时执行。</li>
</ol>
<p>画个简易图，大致流程如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/servlet%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%AE%80%E6%98%93%E5%9B%BE.jpg" alt="servlet生命周期简易图"></p>
<h4 id="1-3、你的第一个Servlet">1.3、你的第一个Servlet</h4>
<p>光说不练假把式，我们动手写个 Servlet 案例，进一步理解它。</p>
<p>我们使用 Maven 创建一个 Servlet 案例，Maven在<code>Java基础环境搭建</code>中有讲到，可以回顾一下。</p>
<h5 id="1-3-1、创建项目">1.3.1、创建项目</h5>
<p>①、双击启动 IDEA，点击<code>Create New Project</code>（如果默认进入某个项目，需要退出，点击左上角<code>File -&gt; Close Project </code>，左侧选择<code>Maven</code>项目，选中<code>Create from archetype</code>后选择<code>maven-archetype-webapp</code>，点击Next，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E9%80%89%E6%8B%A9maven.jpg" alt="选择maven"></p>
<p>选择<code>archetype</code>可以简单理解为选择模板，选择不同的模板会有各自的规范。</p>
<p>②、点击创建即可，稍等片刻，自行会自行加载相关依赖，如果有报错请尝试退出重进。</p>
<p>④、在<code>pom.xml</code>中引入 servlet 依赖，写在<code>&lt;dependencies&gt;</code>标签内，然后可以点击右上角<code>加载文件改动</code>的按钮（也就是重新加载安装依赖），如下图所示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E5%A1%AB%E5%86%99servlet%E4%BE%9D%E8%B5%96.jpg" alt="填写servlet依赖"></p>
<h5 id="1-3-2、配置-Tomcat-服务器">1.3.2、配置 Tomcat 服务器</h5>
<p>①、访问Tomcat官网<code>https://tomcat.apache.org/download-80.cgi</code>，下载任意版本Tomcat，我选择的版本是<code>8.5.81</code>，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E9%80%89%E6%8B%A9tomcat%E7%89%88%E6%9C%AC.jpg" alt="选择tomcat版本"></p>
<p>选择<code>Binary Distributions</code>下的<code>Core</code>分类，这是 Tomcat 正式的二进制发布版本，一般学习和开发都用此版本。根据自己计算机系统选择下载项。</p>
<p>②、下载完成后，解压到一个固定常用的目录下。</p>
<p>③、进入 IDEA，配置 Tomcat。在右上侧选择<code>Add Configuration...</code>，在新的界面点击左上角的<code>+</code>按钮，滑到下面找到<code>Tomcat Server</code>点击选择<code>Local</code>，如下图所示：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/配置添加tomcat.jpg" alt="配置添加tomcat" style="zoom: 50%;" />
<p>④、在 Server 标签栏下点击 <code>Configure...</code>，进入新的界面，在<code>Tomcat Home</code>处添加 Tomcat，最后点击 OK。如下图所示：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/添加tomcat.jpg" alt="添加tomcat" style="zoom: 67%;" />
<p>⑤、配置部署方式，选择<code>Deployment</code>标签栏，在右侧点击<code>+</code>按钮，选择<code>war exploded</code>方式，如下图所示：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/选择部署方式.jpg" alt="选择部署方式" style="zoom:67%;" />
<p><code>war方式</code>：是发布模式，先打包成 war 包，再发布。<code>war exploded方式</code>：常在开发的时候使用这种方式，它可以支持热部署，但需要设置。</p>
<p>跟本次案例调试无关，选择哪个都可以，对于我们练习影响不太大。</p>
<p>⑥、最后注意上图应用程序上下文出设置设置 URL 根路径后，一般就<code>/</code> 即可，最后点击应用，再点击确定即可。如下图所示：</p>
<p>如果在配置发现没有工件，那就需要再配置下。</p>
<p>第一步，点击编辑工件，点左上角<code>文件 - 项目结构 - 工件</code>也可以，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E7%BC%96%E8%BE%91%E5%B7%A5%E4%BB%B6.jpg" alt="点击这里编辑工件"></p>
<p>第二步，点击加好，选择 WEB 应用程序，这两个看哪个有<code>基于模块</code>点击这个即可。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E6%B7%BB%E5%8A%A0%E5%B7%A5%E4%BB%B6.jpg" alt="添加工件"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E9%80%89%E6%8B%A9%E6%A8%A1%E5%9D%97.jpg" alt="选择模块"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E5%AE%8C%E6%88%90%E5%B7%A5%E4%BB%B6%E6%B7%BB%E5%8A%A0.jpg" alt="完成工件添加"></p>
<p>然后点击应用确定即可，然后在转到部署工件处可成功部署。</p>
<p>最后，点击小三角运行，如果服务器没有报错，弹出浏览器输出了 hello world 及说明配成功，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E6%88%90%E5%8A%9F%E8%BF%90%E8%A1%8C.jpg" alt="成功运行"></p>
<p>至此，IDEA 中配置 Tomcat 就完成了。</p>
<p>下面我们开始编写代码案例。</p>
<h5 id="1-3-3、编写Servlet并运行">1.3.3、编写Servlet并运行</h5>
<p>接<code>1.3.1、创建项目</code>，在创建好后项目进行下面步骤。</p>
<p>①、鼠标右键点击<code>main</code>目录，选择<code>New - Directory</code>，创建名为<code>java</code>的主目录，后面我们的代码都写在此处。</p>
<p>②、鼠标右键点击<code>java</code>目录，选择<code>New - Java Class</code>，创建名为<code>FirstServlet</code>的class文件，在这里面编写我们的代码，最终如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E5%88%9B%E5%BB%BAservlet%E7%9A%84class.jpg" alt="创建servlet的class"></p>
<p>③、想要真正运行起来 Servlet 程序，我们需要继承<code>HTTPServlet</code>，重写部分方法，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E7%BB%A7%E6%89%BFHTTPServlet.jpg" alt="继承HTTPServlet"></p>
<p>④、编写代码，响应 Get 和 Post 请求内容，最终如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/servlet%E6%9C%80%E7%BB%88%E4%BB%A3%E7%A0%81.jpg" alt="servlet最终代码"></p>
<p>⑤、在 servlet 中，需要根据 URL 路径匹配映射到对应的 servlet。即在<code>web.xml</code>中注册 servlet，如下图所示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>FirstServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>FirstServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>FirstServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/FirstServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E8%AE%BE%E7%BD%AE%E6%98%A0%E5%B0%84%E8%B7%AF%E5%BE%84.jpg" alt="设置映射路径"></p>
<p>映射匹配流程：<code>/FirstServlet</code>路径绑定的<code>Servlet-name为FirstServlet</code>，而<code>FirstServlet绑定的class是FirstServlet</code>，最终访问<code>/FirstServlet</code>，调用的类也就是<code>FirstServlet.class</code>。</p>
<p>多看两遍就明白了了。</p>
<p>servlet 注册有两种方式：一是通过上述<code>web.xml</code>进行注册，二是在 servlet3 以后可以通过<code>@WebServlet()</code>注解方式进行注册。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/webservlet%E6%B3%A8%E8%A7%A3.jpg" alt="webservlet注解"></p>
<p>⑥、启动项目，可以点击右上侧运行按钮，稍等片刻，看到控制台输出以下信息即表明启动成功，如下图所示：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/启动成功.jpg" alt="启动成功" style="zoom: 50%;" />
<p>⑦、浏览器访问<code>127.0.0.1:8080/FirstServlet</code>，即可看到代码中输出的信息，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/servlet%E6%88%90%E5%8A%9F%E8%BE%93%E5%87%BA.jpg" alt="servlet成功输出"></p>
<p>至此，你的第一个 Servlet 程序成功运行启动起来了。</p>
<p>现阶段，你只需要关注知道 Servlet 是什么就好，我相信这个流程走下来你能明白不少。</p>
<p>如果想进一步了解，我从网上找了几个 JSP + Servlet 的系统，可以进一步研究下。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/Hui4401/</span>StudentManager</span><br><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/czwbig/</span>Tmall_JavaEE</span><br></pre></td></tr></table></figure>
<h3 id="二、过滤器、监听器和拦截器">二、过滤器、监听器和拦截器</h3>
<p>**过滤器(Filter)：**在 servlet 中，过滤器也就是<code>Filter</code>，它主要用于过滤字符编码，做一些统一的业务等等。是使用<code>javax.servlet.Filter</code>接口进行实现的。在代码安全中，他常被用于防止 XSS，防 SQL注入，防任意文件上传等。再配置了Filter之后，它可以统一过滤危险字符，省时省力。</p>
<p><strong>监听器(Listener)：<strong>在servlet中，监听器也就是<code>Listener</code>，它主要用于做一些</strong>初始化的内容</strong>。是使用<code>javax.servlet.ServletContextListener</code>接口进行实现的。如果同时有监听器和过滤器，监听器是在过滤器之前启动。</p>
<p>**拦截器(Interceptor)：**依赖 WEB 框架，在 SrpingMvc 中就依赖 SpringMVC 框架。是属于面向切面变成的一种运用。</p>
<p>过滤器和拦截器的区别，分为以下五种：</p>
<ul>
<li>拦截器是基于 Java 的反射机制的，而过滤器是基于函数回调</li>
<li>过滤器依赖与 servlet 容器，而拦截器不依赖与 servlet 容器</li>
<li>拦截器只能对 action 请求起作用，而过滤器则可以对几乎所有的请求起作用</li>
<li>拦截器可以访问 action 上下文、值栈里的对象，而过滤器不能</li>
<li>在 action 的生命周期中，拦截器可以多次被调用，而过滤器只能在容器初始化时被调用一次</li>
</ul>
<p>我们现在主要关注一下过滤器。</p>
<h4 id="2-1、过滤器代码">2.1、过滤器代码</h4>
<p>过滤器是使用<code>javax.servlet.Filter</code>接口进行实现的。需要使用<code>doFilter()</code>方法实现拦截。</p>
<p>以<code>1.3.3、编写Servlet并运行</code>代码为基础，继续编写Filter代码。</p>
<p>①、在<code>main/java</code>右键点击后选择<code>New - package</code>，键入<code>com.test.filter</code>新建个filter，编写过滤层代码，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E8%BF%87%E6%BB%A4%E5%99%A8%E4%BB%A3%E7%A0%81.jpg" alt="过滤器代码"></p>
<p>我们重写了<code>doFilter()</code>方法，代码逻辑如下：</p>
<p>首先通过<code>String requestURI = request.getRequestURI();</code>获取URL路径。然后对路径进行判断，如果路径中包含<code>/FirstServlet</code>，则放行。否则就跳转到根路径下。</p>
<p>②、然后在 web.xml 中配置注册过滤器，如下图所示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置过滤器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>FilterTest<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.test.filter.FilterTest<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--映射过滤器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>FilterTest<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--“/*”表示拦截所有的请求 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E6%B3%A8%E5%86%8C%E8%BF%87%E6%BB%A4%E5%99%A8.jpg" alt="注册过滤器"></p>
<p>过滤器标签需要要在servlet标签上面，程序会按照注册顺序进行执行。如果涉及多个过滤器，也是按照注册顺序进行执行的。</p>
<p>注册过滤器有两种方式：一是上面通过<code>web.xml</code>进行注册，另一种是通过<code>@WebFilter()</code>注解的方式进行注册。</p>
<p>③、运行项目，访问不通路径，观察不同效果。如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/servlet%E6%88%90%E5%8A%9F%E8%BE%93%E5%87%BA.jpg" alt="servlet成功输出"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E8%BF%87%E6%BB%A4%E5%99%A8%E6%8B%A6%E6%88%AA%E9%A1%B5%E9%9D%A2.jpg" alt="过滤器拦截页面"></p>
<h2 id="JSP-基础">JSP 基础</h2>
<h3 id="一、什么是-JSP">一、什么是 JSP</h3>
<p>JSP 全称 Java Server Page，基于 Java 语言，是一种动态网页技术。</p>
<p>它使用 JSP 标签在 HTML 网页中插入 Java 代码。标签通常以<code>&lt;% code %&gt;</code>显示。</p>
<p>JSP 本质是简化版的 Servlet，JSP 在编译后就变成了 Servlet。JVM 只能识别 Java 的类，是无法识别 JSP 代码的。所以 WEB 服务器会将 JSP 编译成 JVM 能识别的 Java类。</p>
<p>JSP 跟 Servlet 区别在于，JSP 常用于动态页面显示，Servlet 常用于逻辑控制。在代码中常使用 JSP 做前端动态页面，在接收到用户输入后交给对应的 Servlet 进行处理。当然 JSP 也可以当做后端代码进行逻辑控制。</p>
<h3 id="二、JSP-基础知识">二、JSP 基础知识</h3>
<p>以下相关概念了解即可。后续可再根据自己兴趣拓展学习。</p>
<p>1、JSP 文件后缀名为 <code>*.jsp</code></p>
<p>2、JSP 代码需要写在指定的标签之中，比如：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">常用：</span><br><span class="line">&lt;% </span><br><span class="line">out.println(<span class="string">&quot;hellpo JSP!&quot;</span>); </span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:scriptlet&gt;</span><br><span class="line">   代码片段</span><br><span class="line">&lt;/jsp:scriptlet&gt;</span><br></pre></td></tr></table></figure>
<p>3、JSP 生命周期：<code>编译阶段 -&gt; 初始化阶段 -&gt; 执行阶段 -&gt; 销毁阶段</code>，此处多了一个编译阶段，是将 JSP 编译成 Servlet 的阶段。</p>
<p>而这个阶段也是有三个步骤的：<code>解析 JSP 文件 -&gt; 将 JSP 文件转为 Servlet -&gt; 编译 Servlet</code>。</p>
<p>4、JSP 指令：是用来设置 JSP 整个页面属性的。格式为：<code>&lt;%@ directive attribute=&quot;value&quot; %&gt;</code>。JSP 中的三种指令标签：</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>指令</strong></th>
<th style="text-align:left"><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">&lt;%@ page … %&gt;</td>
<td style="text-align:left">定义网页依赖属性，比如脚本语言、error页面、缓存需求等等</td>
</tr>
<tr>
<td style="text-align:left">&lt;%@ include … %&gt;</td>
<td style="text-align:left">包含其他文件</td>
</tr>
<tr>
<td style="text-align:left">&lt;%@ taglib … %&gt;</td>
<td style="text-align:left">引入标签库的定义</td>
</tr>
</tbody>
</table>
<p>5、JSP的九大内置对象（隐式对象），这九个对象，可以不用声明直接使用。</p>
<table>
<thead>
<tr>
<th><strong>名称</strong></th>
<th><strong>类型</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>out</td>
<td>javax.Servlet.jsp.JspWriter</td>
<td>页面输出</td>
</tr>
<tr>
<td>request</td>
<td>javax.Servlet.http.HttpServletRequest</td>
<td>获得用户请求</td>
</tr>
<tr>
<td>response</td>
<td>javax.Servlet.http.HttpServletResponse</td>
<td>服务器向客户端的回应信息</td>
</tr>
<tr>
<td>config</td>
<td>javax.Servlet.ServletConfig</td>
<td>服务器配置，可以取得初始化参数</td>
</tr>
<tr>
<td>session</td>
<td>javax.Servlet.http.HttpSession</td>
<td>保存用户的信息</td>
</tr>
<tr>
<td>application</td>
<td>javax.Servlet.ServletContext</td>
<td>所有用户的共享信息</td>
</tr>
<tr>
<td>page</td>
<td>java.lang.Object</td>
<td>指当前页面转换后的Servlet类的实例</td>
</tr>
<tr>
<td>pageContext</td>
<td>javax.Servlet.jsp.PageContext</td>
<td>JSP的页面容器</td>
</tr>
<tr>
<td>exception</td>
<td>java.lang.Throwable</td>
<td>表示JSP页面所发生的异常，在错误页中才起作用</td>
</tr>
</tbody>
</table>
<h3 id="三、JSP程序运行">三、JSP程序运行</h3>
<p>光说不练假把式。</p>
<p>通过创建 JSP 项目加上代码 demo 来进一步理解下吧。</p>
<h4 id="2-1、创建项目">2.1、创建项目</h4>
<p>下面步骤讲解是基于 Maven 创建的 JSP 项目。</p>
<p>①、打开 IDEA 后，点击<code>Create New Project</code>，选择Mavan，勾选<code>Create from archetype</code>，选择的模板是<code>maven-archetype-webapp</code>，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E9%80%89%E6%8B%A9maven.jpg" alt="创建项目选择maven"></p>
<p>②、然后点击Next，给项目起个名字，其他默认即可。此处步骤和<code>1.2.1 JavaWeb基础（一）Servlet以及过滤器、监听器和拦截器 中 1.3.1、创建项目</code>相同，不再演示。</p>
<p>③、下面开始配置Tomcat。此处步骤和<code>1.2.1 JavaWeb基础（一）Servlet以及过滤器、监听器和拦截器 中 1.3.2、环境配置Tomcat</code>相同，不再演示。</p>
<p>④、配置完成后，点击运行，最终结果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E6%88%90%E5%8A%9F%E8%BF%90%E8%A1%8Cjsp.png" alt="成功运行jsp"></p>
<h4 id="2-2、代码-Demo">2.2、代码 Demo</h4>
<p>我们通过 JSP 模拟一下登录的过程。</p>
<p>首先引入一下依赖Jar包。点击左上角<code>File - Project Structure - Libraries</code>，点击<code>+</code>号，进入 Tomcat 的 lib 文件夹下，将依赖全部引入（对于我们这样最省事），最后点击 OK。如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96.jpg" alt="引入依赖"></p>
<p>下面编写代码。</p>
<p>①、在webapp下面创建两个 JSP 文件，分别为<code>login.jsp</code>和<code>do_login.jsp</code>，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E5%88%9B%E5%BB%BA%E4%B8%A4%E4%B8%AAJSP%E6%96%87%E4%BB%B6.jpg" alt="创建两个JSP文件"></p>
<p>②、在<code>login.jsp</code>键入以下代码，如下图所示：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=utf-8&quot;</span></span><br><span class="line">         pageEncoding=<span class="string">&quot;utf-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span> <span class="string">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;User to Register Page!&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;hr&gt;&lt;br&gt;登录页面&lt;br&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;do_login.jsp&quot;</span> method=<span class="string">&quot;get&quot;</span>&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;h1&gt;Please input your message:&lt;/h1&gt;&lt;br&gt;</span><br><span class="line">    Name:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    Pswd:&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;br&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span>&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;input type=<span class="string">&quot;reset&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/login%E7%9A%84%E4%BB%A3%E7%A0%81.jpg" alt="login的代码"></p>
<p>③、在<code>do_login.jsp</code>键入以下代码，如下图所示：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=utf-8&quot;</span></span><br><span class="line">         pageEncoding=<span class="string">&quot;utf-8&quot;</span>%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.sql.*&quot;</span> %&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span> <span class="string">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;Server to <span class="keyword">do</span> the register page!&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    String username=request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    String password=request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    <span class="comment">//模拟登录成功与否</span></span><br><span class="line">    <span class="keyword">if</span>(username.equals(<span class="string">&quot;admin&quot;</span>) &amp;&amp; password.equals(<span class="string">&quot;password&quot;</span>))&#123;</span><br><span class="line">        response.getWriter().write(<span class="string">&quot;Success!&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        response.getWriter().write(<span class="string">&quot;Error!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/dologin%E7%9A%84%E4%BB%A3%E7%A0%81.jpg" alt="dologin的代码"></p>
<p>④、左上角运行代码，浏览器访问<code>127.0.0.1:8080/login.jsp</code>，分别输入正确和错误的账号密码，观察操作结果。</p>
<p>以上仅是 Demo 案例，用于演示理解 JSP 代码。</p>
<h3 id="四、JSP-木马">四、JSP 木马</h3>
<p>前几年是 JSP 木马的鼎盛时期，由于技术的迭代。现在大型企业使用 SprinBoot 框架来开发的系统了，该框架默认是不引入 JSP 解析的，需要引入特定依赖才可以。</p>
<p>而且现在前端大多使用vue，thymeleaf，freemarker等等。因此JSP木马也算逐渐没落了。</p>
<p>但我们还是得学习了解，毕竟网站数量基数很大，难免会在授权的测试中遇见。</p>
<p>JSP木马也可以称作JSP Webshell，如果对方在上传文件或其他功能没有做防护的话，攻击者可以利用任意文件上传漏洞将恶意代码传到后端，继而攻击者可以达到操作目标网站的目的。</p>
<p>切勿对未授权的系统进行非法测试，这是违法行为。</p>
<p>推荐一些较为老派的 JSP 木马的 github 仓库：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/theralfbrown/</span>WebShell-<span class="number">2</span><span class="regexp">/tree/m</span>aster/jsp</span><br></pre></td></tr></table></figure>
<p>近两年主流 webshell 管理工具：冰蝎，哥斯拉，蚁剑…</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">冰蝎：https:<span class="regexp">//gi</span>thub.com<span class="regexp">/rebeyond/</span>Behinder</span><br><span class="line">蚁剑：https:<span class="regexp">//gi</span>thub.com/AntSwordProject</span><br><span class="line">哥斯拉：https:<span class="regexp">//gi</span>thub.com<span class="regexp">/BeichenDream/</span>Godzilla</span><br></pre></td></tr></table></figure>
<h4 id="1、JSP-大马">1、JSP 大马</h4>
<p>JSP 大马，在代码中写入了更多功能，可以实现在网页中进行一些危险操作。</p>
<p>以下演示案例中的JSP大马用的是<code>https://github.com/theralfbrown/WebShell-2/tree/master/jsp</code>这个仓库中<code>无密码的jsp大马.jsp</code>。</p>
<p>①、在webapp下新建个<code>shell.jsp</code>，在该文件中复制粘贴以上代码。如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/JSP%E5%A4%A7%E9%A9%AC.jpg" alt="JSP大马"></p>
<p>②、点击运行，；浏览器访问<code>127.0.0.1:8080/shell.jsp</code>，从中可以看到，我们可以进行的危险操作有上传文件、执行命令等等，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E5%A4%A7%E9%A9%AC%E6%89%A7%E8%A1%8Cping%E5%91%BD%E4%BB%A4.jpg" alt="大马执行ping命令"></p>
<p>建议各位动手操作吧，动手操作加深理解。</p>
<p>感兴趣的可以自己私下阅读学习源码。</p>
<h4 id="2、Godzilla（哥斯拉）JSP木马操作">2、Godzilla（哥斯拉）JSP木马操作</h4>
<p>Godzilla（哥斯拉），主要用于管理Webshell的客户端工具。近两年比较主流的工具。哥斯拉内置了 3 种 Payload 以及 6 种加密器,6 种支持脚本后缀，20 个内置插件。</p>
<p>Github地址：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/BeichenDream/</span>Godzilla</span><br></pre></td></tr></table></figure>
<p>下载地址：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/BeichenDream/</span>Godzilla<span class="regexp">/releases/</span>tag/v4.<span class="number">0.1</span>-godzilla</span><br></pre></td></tr></table></figure>
<p>下面我们在代码文件中再新建一个名为<code>shell1.jsp</code>文件，配合哥斯拉的JSP木马进行操作。</p>
<p>①、下载完成后，启动哥斯拉，点击左上角管理，选择生成，此步骤是为了生成JSP木马代码，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E5%93%A5%E6%96%AF%E6%8B%89%E7%94%9F%E6%88%90%E6%9C%A8%E9%A9%AC.jpg" alt="哥斯拉生成木马"></p>
<p>然后点击生成，suffix 选择为 JSP，点击确定后选择存放目录。</p>
<p>②、将已生成的代码复制粘贴到<code>shell1.jsp</code>中，然后启动项目。如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E5%A4%8D%E5%88%B6%E7%B2%98%E8%B4%B4%E5%88%B0shell1jsp%E4%B8%AD.jpg" alt="复制粘贴到shell1jsp中"></p>
<p>③、打开哥斯拉，点击左上角目标，选择添加，将shell1.jsp地址添加进去后点击添加，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E6%B7%BB%E5%8A%A0%E7%9B%AE%E6%A0%87.jpg" alt="添加目标"></p>
<p>④、点击添加后，在管理页面即可看到该链接，右键选择进入，成功进入webshell管理页面，剩下的自己研究下吧。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/shell%E6%89%A7%E8%A1%8Cwhoami.jpg" alt="shell执行whoami"></p>
<p>JSP 章节到此结束了。关于以上代码建议大家动手操作，便于加深理解。</p>
<p>对于哥斯拉 JSP木马代码，在后续提升阶段可以进一步学习，目前理解即可。</p>
<p>感兴趣的可以私下进一步学习。</p>
<h2 id="Spring-和-SpringMVC">Spring 和 SpringMVC</h2>
<h3 id="一、什么是-Spring">一、什么是 Spring</h3>
<p>Spring 是一个开源的框架，用于构建企业级 Java 应用程序。它提供了广泛的基础设施支持和一系列的解决方案，使开发者能够更轻松地构建和部署复杂的应用。</p>
<p>Spring 框架的核心特点包括：</p>
<p><strong>轻量级：</strong> Spring 是一个轻量级框架，不需要大量的配置信息，使开发更加简单。</p>
<p><strong>控制反转（IoC）：</strong> Spring 实现了控制反转，即容器负责对象的创建、组装和管理。这样，开发者可以专注于业务逻辑而不是对象的创建和管理。</p>
<p><strong>面向切面编程（AOP）：</strong> Spring 支持面向切面编程，允许开发者定义横切关注点，并将其与主要业务逻辑分离。</p>
<p><strong>容器：</strong> Spring 提供了一个容器，用于管理应用中的对象。这个容器负责对象的生命周期和配置。</p>
<p><strong>数据访问：</strong> Spring 提供了对各种数据访问技术的支持，包括 JDBC、ORM（对象关系映射）等。</p>
<p><strong>事务管理：</strong> Spring 支持声明式事务管理，简化了事务管理的配置。</p>
<p><strong>模块化：</strong> Spring 框架被划分为多个模块，开发者可以选择使用特定的模块，以满足其特定需求。</p>
<p>Spring Framework官方介绍：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>spring.io<span class="regexp">/projects/</span>spring-framework</span><br></pre></td></tr></table></figure>
<p>Spring 源码：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/spring-projects/</span>spring-framework</span><br></pre></td></tr></table></figure>
<p>对于现阶段，大家理解 Spring 是一个 Java 开源框架接口，也是一个生态体系。其核心框架是 Spring Framework，在此基础上又衍生出来 Spring Boot、Spring Cloud、Spring Data、Spring Security 等一系列优秀项目。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/spring%E7%94%9F%E6%80%81%E9%A1%B9%E7%9B%AE.jpg" alt="spring生态项目"></p>
<h3 id="二、什么是-SpringMVC">二、什么是 SpringMVC</h3>
<p>SpringMVC 是 Spring 基础之上的一个 MVC 框架，基于模型-视图-控制器（Model-View-Controller，简称 MVC）设计模式进行 JavaWeb 系统的开发，它是 Spring 的一个模块，通过 Dispatcher Servlet, ModelAndView 和 View Resolver 等，让应用开发变得很容易。</p>
<p>SpringMVC 是基于 Spring 功能之上添加的 Web 框架，想用 SpringMVC 必须先依赖 Spring。</p>
<p>拓展学习：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Spring,Spring MVC及Spring Boot区别</span><br><span class="line">https:<span class="regexp">//</span>www.jianshu.com<span class="regexp">/p/</span><span class="number">42620</span>a0a2c33</span><br></pre></td></tr></table></figure>
<h3 id="三、什么是-MVC">三、什么是 MVC</h3>
<p>MVC 模式是一种软件框架模式，被广泛应用在 JavaEE 项目的开发中。MVC 模式通过提供一种良好的组织结构和分工方式，帮助解决了软件开发中的耦合、可维护性、可测试性和可扩展性等方面的问题。这使得开发者能够更有效地构建和维护复杂的应用程序。</p>
<p>MVC 即模型（Model） 、视图（View）、控制器（Controller）。</p>
<ul>
<li>模型（Model）</li>
</ul>
<p>模型是用于处理数据逻辑的部分。</p>
<p>所谓数据逻辑，也就是数据的映射以及对数据的增删改查，Bean、DAO（data access object，数据访问对象）等都属于模型部分。</p>
<ul>
<li>视图（View）</li>
</ul>
<p>视图负责数据与其它信息的显示，也就是给用户看到的页面。</p>
<p>html、JSP 等页面都可以作为视图。</p>
<ul>
<li>控制器（controller）</li>
</ul>
<p>控制器是模型与视图之间的桥梁，控制着数据与用户的交互。</p>
<p>控制器通常负责从视图读取数据，处理用户输入，并向模型发送数据，也可以从模型中读取数据，再发送给视图，由视图显示。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/spring-springframework-mvc-4.png" alt="spring-springframework-mvc-4"></p>
<h4 id="3-1、核心架构流程">3.1、核心架构流程</h4>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/spring-springframework-mvc-5.png" alt="spring-springframework-mvc-5"></p>
<p>在 Spring MVC 框架中，<code>DispatcherServlet</code>、<code>HandlerMapping</code> 和 <code>HandlerAdapter</code> 是三个重要的组件，它们各自承担不同的角色，协同工作以处理客户端的请求并调度相应的处理程序。以下是它们的解释和作用：</p>
<p><strong>DispatcherServlet（调度器Servlet）：</strong></p>
<ul>
<li><strong>作用：</strong> <code>DispatcherServlet</code> 是 Spring MVC 中的前端控制器（Front Controller），负责接收客户端的所有请求并将其分派给适当的处理程序（Controller）。</li>
<li><strong>解释：</strong> 当客户端发送请求时，<code>DispatcherServlet</code> 接收请求，然后根据配置和规则找到合适的 <code>HandlerMapping</code> 来确定请求对应的处理程序。一旦找到处理程序，<code>DispatcherServlet</code> 将请求交给该处理程序进行处理。它还负责处理异常、视图解析和其他与请求生命周期相关的任务。</li>
<li><strong>源代码路径：</strong></li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/spring-projects/</span>spring-framework<span class="regexp">/blob/m</span>ain<span class="regexp">/spring-webmvc/</span>src<span class="regexp">/main/</span>java<span class="regexp">/org/</span>springframework<span class="regexp">/web/</span>servlet/DispatcherServlet.java</span><br></pre></td></tr></table></figure>
<p><strong>HandlerMapping（处理程序映射）：</strong></p>
<ul>
<li><strong>作用：</strong> <code>HandlerMapping</code> 负责将请求映射到相应的处理程序（Controller）。它确定了客户端请求应该由哪个处理程序来处理。</li>
<li><strong>解释：</strong> 在 Spring MVC 中，可以有多个 <code>HandlerMapping</code> 实现，包括基于注解的映射、基于路径的映射等。<code>HandlerMapping</code> 将请求的 URL 映射到具体的控制器类和方法，以便 <code>DispatcherServlet</code> 可以将请求分发给正确的处理程序。</li>
<li><strong>源代码路径：</strong></li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/spring-projects/</span>spring-framework<span class="regexp">/blob/m</span>ain<span class="regexp">/spring-webmvc/</span>src<span class="regexp">/main/</span>java<span class="regexp">/org/</span>springframework<span class="regexp">/web/</span>servlet/HandlerMapping.java</span><br></pre></td></tr></table></figure>
<p><strong>HandlerAdapter（处理程序适配器）：</strong></p>
<ul>
<li><strong>作用：</strong> <code>HandlerAdapter</code> 负责调用实际的处理程序（Controller）来处理请求，并将处理程序的执行结果返回给 <code>DispatcherServlet</code>。</li>
<li><strong>解释：</strong> 不同的处理程序可能有不同的接口，<code>HandlerAdapter</code> 的作用是适配各种不同类型的处理程序，使得它们能够被 <code>DispatcherServlet</code> 统一调用。它将请求传递给处理程序，处理程序执行后，<code>HandlerAdapter</code> 还负责处理返回的结果，如视图解析、数据绑定等。</li>
<li><strong>源代码路径：</strong></li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/spring-projects/</span>spring-framework<span class="regexp">/blob/m</span>ain<span class="regexp">/spring-webmvc/</span>src<span class="regexp">/main/</span>java<span class="regexp">/org/</span>springframework<span class="regexp">/web/</span>servlet/HandlerAdapter.java</span><br></pre></td></tr></table></figure>
<p>这三个组件共同协作，实现了请求的分发和处理。<code>DispatcherServlet</code> 充当总管，<code>HandlerMapping</code> 负责找到处理程序，而 <code>HandlerAdapter</code> 则负责调用实际的处理程序执行业务逻辑。这种设计使得 Spring MVC 具有灵活性，允许通过配置来适应不同的业务需求和处理程序类型。</p>
<blockquote>
<p>以上部分内容引用自下方链接，推荐大家拓展阅读</p>
<p><a target="_blank" rel="noopener" href="https://pdai.tech/md/spring/spring-x-framework-springmvc.html">https://pdai.tech/md/spring/spring-x-framework-springmvc.html</a></p>
<p><a target="_blank" rel="noopener" href="https://pdai.tech/files/kaitao-springMVC.pdf">https://pdai.tech/files/kaitao-springMVC.pdf</a></p>
</blockquote>
<h3 id="四、IDEA-创建-Spring-项目">四、IDEA 创建 Spring 项目</h3>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>juejin.cn<span class="regexp">/post/</span><span class="number">6996542590820548639</span></span><br><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/Laverrr/</span>bookstore</span><br></pre></td></tr></table></figure>
<p>①、打开IDEA，选择<code>Create New Project</code>。</p>
<p>②、左侧选择Srping，并勾选相关选项，并且勾选<code>Create empty spirng-config.xml</code>，如下图所示：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/新建项目spring.jpg" alt="新建项目spring" style="zoom:50%;" />
<p>③、点击next，给项目起个名字，以及设置存放目录地址后点击<code>Finish</code>，稍等片刻，他会自动下载依赖的 JAR 包，如下图所示：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/项目名称与加载.jpg" alt="项目名称与加载" style="zoom:50%;" />
<p>④、新建完成的项目结构如下图所示：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/spring项目结构.jpg" alt="spring项目结构" style="zoom:50%;" />
<p>⑤、右键选中src目录下新建两个Java Class分别为<code>HelloSpring</code>和<code>Main</code>，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E6%96%B0%E5%BB%BA%E4%B8%A4%E4%B8%AA%E7%B1%BB.jpg" alt="新建两个类"></p>
<p>⑥、在<code>HelloSpring</code>文件中键入以下代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloSpring</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMessage</span><span class="params">(String message)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.message  = message;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getMessage</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Your Message : &quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/hellospring代码.jpg" alt="hellospring代码" style="zoom:67%;" />
<p>⑦、在<code>Main</code>文件中键入以下代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">            <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;spring-config.xml&quot;</span>);</span><br><span class="line">            <span class="type">HelloSpring</span> <span class="variable">obj</span> <span class="operator">=</span> (HelloSpring) context.getBean(<span class="string">&quot;HelloSpring&quot;</span>);</span><br><span class="line">            obj.getMessage();</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/MAIN代码.jpg" alt="MAIN代码" style="zoom:67%;" />
<p>⑧、在<code>spring-config.xml</code>配置文件中增加以下内容。</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=<span class="string">&quot;HelloSpring&quot;</span> <span class="keyword">class</span>=&quot;<span class="symbol">HelloSpring</span>&quot;&gt;</span><br><span class="line">    &lt;<span class="symbol">property</span> <span class="symbol">name</span>=&quot;<span class="symbol">message</span>&quot; <span class="symbol">value</span>=&quot;<span class="symbol">i</span> <span class="symbol">am</span> <span class="symbol">groot</span>!!&quot;/&gt;</span><br><span class="line">&lt;/<span class="symbol">bean</span>&gt;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/springconfigxml.jpg" alt="springconfigxml"></p>
<p>⑨、最终点击运行，观察结果如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E8%BF%90%E8%A1%8C%E9%A1%B9%E7%9B%AE.jpg" alt="运行项目"></p>
<p>是不是感觉不知所以然？在这基础上，给大家推荐一篇文章，在进一步理解一下，<code>https://juejin.cn/post/6844903912034533383</code>。</p>
<p>扩展学习，推荐这本书：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Spring实战（第五版），这是网上翻译版，尽可能买原版书籍。</span><br><span class="line">https:<span class="regexp">//</span>potoyang.gitbook.io<span class="regexp">/spring-in-action-v5/</span></span><br></pre></td></tr></table></figure>
<p>是不是感觉配置繁琐，当然这还只是基础案例，在实际开发中配置会更加繁琐。</p>
<p>因此由于人类的【懒惰】，衍生出来了Spring Boot框架。</p>
<p>我们将在下一章节学习。</p>
<h3 id="五、拓展-Spring-Spring-MVC-的项目">五、拓展 Spring + Spring MVC 的项目</h3>
<p>对于学习代码审计，也许我们代码写的不是很溜，甚至不会写。</p>
<p>但拿到一个项目一定要会看。</p>
<p>推荐几个 Spring + Spring MVC 的项目进一步学习。</p>
<ul>
<li>某在线教育平台</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/impxiahuaxian/</span>zaixianjiaoyu</span><br></pre></td></tr></table></figure>
<ul>
<li>某网上书店</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/Laverrr/</span>bookstore</span><br></pre></td></tr></table></figure>
<ul>
<li>某在线课程学习网站</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>tee.com<span class="regexp">/zhangjiazhao/</span>online_course_learning_website</span><br></pre></td></tr></table></figure>
<ul>
<li>某汽车租赁系统</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>tee.com<span class="regexp">/huang_xiao_feng/</span>carrentalsystem</span><br></pre></td></tr></table></figure>
<ul>
<li>某人力资源管理系统</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/BradWenqiang/</span>hr</span><br></pre></td></tr></table></figure>
<h2 id="SpingBoot-和-SpringCloud">SpingBoot 和 SpringCloud</h2>
<h3 id="一、什么是Srping-Boot">一、什么是Srping Boot</h3>
<p>SpringBoot 是一款基于 JAVA 的开源框架。目的是为了简化 Spring 应用搭建和开发流程。是目前比较流行，大中小型企业常用的框架。正因为极大简化了开发流程，才受到绝大开发人员的喜爱。</p>
<p>SpringBoot 核心原理是自动装配（自动配置）。</p>
<p>在这之前，开发一个JavaWeb，Spring 等项目要进行很多配置，使用了 SpringBoot 就不用在过多考虑这些方面。</p>
<p>并且在 SpringBoot 中还内置了 Tomcat。</p>
<p>官方介绍：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>spring.io<span class="regexp">/projects/</span>spring-boot</span><br></pre></td></tr></table></figure>
<p>在 Spring Boot 中，自动装配是一项非常重要的功能，它帮助开发者简化了项目的配置和搭建过程。Spring Boot通过一系列的约定和默认配置，自动地将各种组件进行装配，使得开发者能够更专注于业务逻辑而不必过多关注框架的配置。</p>
<p>以下是 Spring Boot 自动装配体现的一些主要方面：</p>
<p><strong>依赖管理：</strong> Spring Boot 通过 Maven 或 Gradle 等构建工具，引入了一系列默认的依赖项，以简化项目的搭建。例如，通过添加<code>spring-boot-starter-web</code>依赖，你就能够使用Spring MVC来构建Web应用。</p>
<p><strong>类路径扫描：</strong> Spring Boot会自动扫描项目中的特定包及其子包，寻找标有特殊注解的类，比如<code>@Controller</code>、<code>@Service</code>、<code>@Repository</code>等，然后将它们注册为Spring的组件。</p>
<p><strong>默认配置：</strong> Spring Boot 提供了大量的默认配置，当没有显式配置时，这些默认配置会自动应用。例如，如果项目中引入了数据库相关的依赖，Spring Boot 会根据类路径上的数据库驱动自动配置数据源。</p>
<p><strong>条件化装配：</strong> Spring Boot 引入了条件化装配的概念，根据类路径上的特定条件来决定是否启用某些配置。这使得可以根据不同的环境或条件来自动装配不同的组件。</p>
<p><strong>Spring Boot Starter：</strong> Spring Boot 提供了一系列的 Starter 依赖，这些 Starter 提供了一组常用的依赖项的整合，比如<code>spring-boot-starter-data-jpa</code>、<code>spring-boot-starter-security</code>等，它们能够一次性地引入一组相关的依赖和配置，简化了开发者的工作。</p>
<p><strong>自定义Starter：</strong> 除了 Spring Boot 提供的 Starter 之外，开发者也可以创建自己的 Starter，将一组相关的依赖和配置封装起来，使得它们能够在不同的项目中被重复使用。</p>
<p><strong>自动化配置类：</strong> Spring Boot通过自动化配置类来实现自动装配。这些配置类使用<code>@Configuration</code>注解标记，并且通常包含有<code>@ConditionalOn...</code>注解，用于指定生效的条件。</p>
<p>总体来说，Spring Boot通过一系列约定、默认配置、条件化装配等方式，实现了自动装配，使得开发者能够更加方便地构建和配置项目。</p>
<h3 id="二、Spring-Boot-项目简介">二、Spring Boot 项目简介</h3>
<p>通过经典 HelloWorld 程序，来看看 Springboot 项目搭建多么简便。</p>
<p>①、打开 IDEA，点击新建项目，选择<code>Spring Initializer</code>，配置信息如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/1.jpg" alt="1"></p>
<p>②、点击选择一些常用依赖，比如 Web 下的 Spring Web，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/2.jpg" alt="2"></p>
<p>③、点击创建，稍等片刻，Maven 自动加载完所需依赖后，整体项目结构如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/3.jpg" alt="helloworld项目结构"></p>
<p><code>@SpringBootApplication</code>注解表示这个类为 SpringBoot 的主配置类，SpringBoot 项目应运行这个类下面的 main 方法来启动 SpringBoot 应用。</p>
<p>也就是说这个 XXXApplication 是该项目的入口。</p>
<p>④、我们使用的是阿里云的脚手架创建的 SpringBoot 项目，可以看到在com\example\demo 目录下有个 demos\web 目录，里面是一些示例代码。如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/4.jpg" alt="helloworld代码"></p>
<p>⑦、点击右上方运行，或者进入 XXXApplication 中，点击左侧绿色小按钮，即刻运行项目，打开浏览器输入<code>http://127.0.0.1:8080/hello</code>，即可看到返回了一些内容，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/5.jpg" alt="返回helloworld"></p>
<p>⑧、下面我们进入 <a target="_blank" rel="noopener" href="http://demos.web">demos.web</a> 目录下，看看他的 Controller 代码，也就是返回上面内容的接口代码，是位于该目录下的 BasicController，拿上述接口距离，访问 hello 会返回你输入的名字，默认值是 unkonown user，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/6.jpg" alt=""></p>
<p><strong>其他一些注解含义：</strong></p>
<p><code>@Controller</code>注解：标注该类为controller类，可以处理 http 请求。@Controller 一般要配合模版来使用。现在项目大多是前后端分离，后端处理请求，然后返回JSON格式数据即可，这样也就不需要模板了。</p>
<p><code>@ResponseBody</code>注解：将该注解写在类的外面，表示这个类所有方法的返回的数据直接给浏览器。<code> @RestController 相当于 @ResponseBody 加上 @Controller</code></p>
<p><code>@RequestMapping</code>注解：配置<code>URL映射</code>，可以作用于某个Controller类上，也可以作用于某Controller类下的具体方法中，说白了就是URL中请求路径会直接映射到具体方法中执行代码逻辑。</p>
<p><code>@PathVariable</code>注解：接受请求URL路径中占位符的值，示例代码如下图所示：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">&quot;/hello&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">&quot;/whoami/&#123;name&#125;/&#123;sex&#125;&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">String</span>  <span class="title function_">hello</span>(<span class="params"><span class="meta">@PathVariable</span>(<span class="string">&quot;name&quot;</span>) <span class="built_in">String</span> name, <span class="meta">@PathVariable</span>(<span class="string">&quot;sex&quot;</span>) <span class="built_in">String</span> sex</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello&quot;</span> + name + sex;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>@RequestParam</code>注解：将请求参数绑定到你控制器的方法参数上（是springmvc中接收普通参数的注解），常用于POST请求处理表单。</p>
<p>综上演示，可以看到 Spring Boot 部署非常方便，并且在开发后端服务时也极大简化了各种配置，可以更专注于编写代码。这对于我们审计 Spring Boot 架构的系统也极为的便利。</p>
<h3 id="三、什么是Spring-Cloud">三、什么是Spring Cloud</h3>
<p>Spring Cloud 是一系列框架的有序集合。是一套基于 Spring Framework 的分布式系统开发工具，用于构建分布式应用程序中的各种模块化组件。</p>
<p>它利用 Spring Boot 的开发便利性巧妙地简化了分布式系统基础设施的开发，如服务发现注册、配置中心、消息总线、负载均衡、断路器、数据监控等，都可以用 Spring Boot 的开发风格做到一键启动和部署。</p>
<p>Spring Cloud 的诞生并不是为了解决微服务中的某一个问题，而是提供了一套解决微服务架构实施的综合性解决方案。</p>
<p>Spring Cloud 并没有重复制造轮子，它只是将各家公司开发的比较成熟、经得起实际考验的服务框架组合起来，通过 Spring Boot 风格进行再封装屏蔽掉了复杂的配置和实现原理，最终给开发者留出了一套简单易懂、易部署和易维护的分布式系统开发工具包。</p>
<p>大家也听过微服务吧。那它和 Spring Cloud 什么关系呢？</p>
<p>首先，什么是微服务？</p>
<p>微服务（英语：Microservices）是一种软件架构风格，它是以专注于单一责任与功能的小型功能区块 (Small Building Blocks) 为基础，利用模块化的方式组合出复杂的大型应用程序，各功能区块使用与语言无关的API集相互通信。</p>
<p>简单来说，微服务就是将一个大型的应用拆分成很多个小的应用，这些应用之间一般通过基于HTTP的RESTful API进行通信协作，并且能够各自进行独立部署以及伸缩。由于微服务独立部署，可伸缩的特性，它能够迅速地大规模部署到云服务器上。</p>
<p>而使用 Spring Cloud 能够快速实现微服务架构。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/7.jpg" alt="7"></p>
<p>官方介绍：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>spring.io<span class="regexp">/projects/</span>spring-cloud</span><br></pre></td></tr></table></figure>
<p>Spring Cloud 提供了许多模块，以下是一些常用的模块及其主要作用：</p>
<p><strong>Spring Cloud Config（配置中心）：</strong></p>
<ul>
<li>作用：用于集中管理配置信息，可以将配置信息存储在版本控制系统中，并在需要时动态刷新。</li>
</ul>
<p><strong>Spring Cloud Netflix（服务治理）：</strong></p>
<ul>
<li>作用：整合了Netflix开发的一些组件，包括Eureka（服务注册与发现）、Ribbon（客户端负载均衡）、Hystrix（熔断器）、Feign（声明式REST客户端）等，用于构建具有高可用性和弹性的微服务架构。</li>
</ul>
<p><strong>Spring Cloud Bus（消息总线）：</strong></p>
<ul>
<li>作用：通过消息总线，实现微服务架构中配置的动态刷新，使得配置的修改能够快速传播到各个微服务实例。</li>
</ul>
<p><strong>Spring Cloud Sleuth（分布式追踪）：</strong></p>
<ul>
<li>作用：用于跟踪分布式系统中的请求流程，生成跨服务的唯一标识，方便在分布式系统中进行日志跟踪和性能监控。</li>
</ul>
<p><strong>Spring Cloud Gateway（网关）：</strong></p>
<ul>
<li>作用：提供了一种简单而有效的方式来进行路由、过滤以及转发请求，用于构建微服务架构中的API网关。</li>
</ul>
<p><strong>Spring Cloud Stream（消息驱动）：</strong></p>
<ul>
<li>作用：简化了消息驱动的微服务开发，提供了一套统一的编程模型，支持多种消息中间件。</li>
</ul>
<p><strong>Spring Cloud Security（安全）：</strong></p>
<ul>
<li>作用：提供了一些安全工具和特性，用于保护分布式系统中的微服务。</li>
</ul>
<p><strong>Spring Cloud Data Flow（数据流）：</strong></p>
<ul>
<li>作用：用于构建和部署实时数据处理和分析的微服务，支持复杂的数据流操作。</li>
</ul>
<p><strong>Spring Cloud OpenFeign（声明式REST客户端）：</strong></p>
<ul>
<li>作用：简化了微服务之间的REST调用，通过声明式的方式定义和调用服务接口。</li>
</ul>
<p><strong>Spring Cloud Task（任务调度）：</strong></p>
<ul>
<li>作用：用于简化任务调度和执行，支持在分布式环境中进行批处理任务的调度和执行。</li>
</ul>
<p>若依微服务版本：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>tee.com<span class="regexp">/y_project/</span>RuoYi-Cloud</span><br></pre></td></tr></table></figure>
<h2 id="Java-分层思想与-MVC-模式">Java 分层思想与 MVC 模式</h2>
<h3 id="一、Java-分层思想">一、Java 分层思想</h3>
<h4 id="1、分层讲解">1、分层讲解</h4>
<p>Java 分层思想是一种软件架构设计理念，旨在将一个复杂的系统划分为多个相对独立且互相关联的层次，每个层次负责不同的功能，以实现高内聚、低耦合的设计。这种思想有助于提高代码的可维护性、可扩展性，并使团队更容易协同工作。以下是Java分层思想的主要层次：</p>
<p><strong>表现层（Presentation Layer）：</strong> 主要负责与用户交互，处理用户界面和用户输入输出。在 Java 中，通常由 Servlet、JSP、或者更现代的框架如 Spring MVC 负责、或者 Springboot 下的 Controller 层。</p>
<p><strong>业务层（Business Layer）：</strong> 业务层包含应用程序的业务逻辑，处理业务规则和数据处理。这一层通常由 JavaBean、Service 等组成，负责执行具体的业务操作。</p>
<p><strong>服务层（Service Layer）：</strong> 服务层是业务层的一部分，提供业务逻辑的具体实现。在 Spring 框架中，使用 @Service 注解来表示服务层。</p>
<p><strong>持久层（Persistence Layer）：</strong> 持久层负责数据的持久化，通常与数据库交互。在 Java 中，常见的持久层技术包括 JDBC、Hibernate、MyBatis 等。</p>
<p><strong>数据访问层（Data Access Layer）：</strong> 这一层是持久层的一部分，负责封装数据访问细节，提供统一的接口给业务层。通常由 DAO（Data Access Object）组成。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/Java%E5%88%86%E5%B1%82.png" alt="Java分层"></p>
<p>通过明确划分这些层次，开发人员可以更容易地理解、维护和扩展代码。这种分层思想还有助于实现模块化开发，每个层次都可以独立测试和替换，从而提高系统的可测试性和灵活性。在实际应用中，可以根据项目的规模和需求进行适度的调整和扩展。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>www.cnblogs.com<span class="regexp">/java-123/</span>p/<span class="number">9174547</span>.html</span><br></pre></td></tr></table></figure>
<h4 id="2、代码案列">2、代码案列</h4>
<p>以后面实战阶段第一套系统举例说明，这是一个架构非常简单清晰的系统。</p>
<p>首先，<code>src/main</code>下面有两个目录，分别是<code>java</code>和<code>resources</code></p>
<p><code>java</code>目录中主要存放的是 Java 代码</p>
<p><code>resources</code>目录中主要存放的是静态资源文件，比如：html、js、css等。</p>
<p>在<code>java</code>目录下还有其他一些常见目录，具体含义整理如下：</p>
<h5 id="2-1、java-目录">2.1、java 目录</h5>
<p><code>annotation</code>：放置项目自定义注解</p>
<p><code>controller/</code>: 存放控制器，接收从前端传来的参数，对访问控制进行转发、各类基本参数校验或者不复用的业务简单处理等。</p>
<p><code>dao/</code>: 数据访问层，与数据库进行交互，负责数据库操作，在Mybaits框架中存放自定义的Mapper接口</p>
<p><code>entity/</code>: 存放实体类</p>
<p><code>interceptor/</code>: 拦截器</p>
<p><code>service/</code>: 存放服务类，负责业务模块逻辑处理。<code>Service</code>层中有两种类，一是<code>Service</code>，用来声明接口；二是<code>ServiceImpl</code>，作为实现类实现接口中的方法。</p>
<p><code>utils/</code>: 存放工具类</p>
<p><code>dto/</code>: 存放数据传输对象（Data Transfer Object），如请求参数和返回结果</p>
<p><code>vo/</code>: 视图对象（View Object）用于封装客户端请求的数据，防止部分数据泄漏，保证数据安全</p>
<p><code>constant/</code>: 存放常量</p>
<p><code>filter/</code>: 存放过滤器</p>
<h5 id="2-2、resources-目录">2.2、resources 目录</h5>
<p><code>mapper/</code>: 存放Mybaits的mapper.xml文件</p>
<p><code>static/</code>: 静态资源文件目录（Javascript、CSS、图片等），在这个目录中的所有文件可以被直接访问</p>
<p><code>templates/</code>: 存放模版文件</p>
<p><code>application.properties</code>或<code>application.yml</code>: Spring Boot默认配置文件</p>
<h3 id="二、Java-MVC-模式">二、Java MVC 模式</h3>
<h4 id="1、模式讲解">1、模式讲解</h4>
<p>MVC 即模型（Model） 、视图（View）、控制器（Controller）。</p>
<p>MVC（Model-View-Controller）是一种软件架构模式，用于设计和组织代码。它将一个应用程序分为三个主要组件：模型（Model）、视图（View）和控制器（Controller）。每个组件有不同的责任，以实现代码的分离和模块化，以便更容易维护和扩展应用程序。</p>
<p>通俗来说，各司其职高效完成任务。</p>
<ul>
<li>模型（Model）</li>
</ul>
<p>模型是用于处理数据逻辑的部分。</p>
<p>所谓数据逻辑，也就是数据的映射以及对数据的增删改查，Bean、DAO（data access object，数据访问对象）等都属于模型部分。</p>
<ul>
<li>视图（View）</li>
</ul>
<p>视图负责数据与其它信息的显示，也就是给用户看到的页面。</p>
<p>html、JSP 等页面都可以作为视图。</p>
<ul>
<li>控制器（controller）</li>
</ul>
<p>控制器是模型与视图之间的桥梁，控制着数据与用户的交互。</p>
<p>控制器通常负责从视图读取数据，处理用户输入，并向模型发送数据，也可以从模型中读取数据，再发送给视图，由视图显示。</p>
<h4 id="2、代码案例">2、代码案例</h4>
<p>在前面我们简单学习了 Spring MVC，这就是基于 MVC 结合 Spring 形成的架构。</p>
<p>推荐几个 Spring + Spring MVC 的项目进一步学习。</p>
<ul>
<li>某在线教育平台</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/impxiahuaxian/</span>zaixianjiaoyu</span><br></pre></td></tr></table></figure>
<ul>
<li>某网上书店</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/Laverrr/</span>bookstore</span><br></pre></td></tr></table></figure>
<ul>
<li>某在线课程学习网站</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>tee.com<span class="regexp">/zhangjiazhao/</span>online_course_learning_website</span><br></pre></td></tr></table></figure>
<ul>
<li>某汽车租赁系统</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>tee.com<span class="regexp">/huang_xiao_feng/</span>carrentalsystem</span><br></pre></td></tr></table></figure>
<ul>
<li>某人力资源管理系统</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/BradWenqiang/</span>hr</span><br></pre></td></tr></table></figure>
<p>对于 Java 代码审计来说，分层思想也好，MVC 模式也罢，我们主要关注的是整个请求流程的走向，以便更好地正向追踪，或是逆向追踪整个代码请求流程，实现 Java 代码审计闭环。</p>
<h3 id="三、其他">三、其他</h3>
<p>推荐了解《阿里巴巴Java开发手册》：</p>
<p>《阿里巴巴Java开发手册》以Java开发者为中心视角，划分为编程规约、异常日志、单元测试、安全规约、MySQL 数据库、工程结构、设计规约七个维度，再根据内容特征，细分成若干二级子目录。</p>
<p>一份倡导性的 Java 项目开发规范文档，对于我们来说，从开发者角度了解开发规范，可以让我们在代码审计各个项目时对于细节更加的了解。</p>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span>//<span class="number">00</span>fly.online/upload/alibaba/<span class="variable">%E9</span><span class="variable">%98</span><span class="variable">%BF</span><span class="variable">%E9</span><span class="variable">%87</span><span class="variable">%8</span>C<span class="variable">%E5</span><span class="variable">%B7</span><span class="variable">%B4</span><span class="variable">%E5</span><span class="variable">%B7</span><span class="variable">%B4Java</span><span class="variable">%E5</span><span class="variable">%BC</span><span class="variable">%80</span><span class="variable">%E5</span><span class="variable">%8</span>F<span class="variable">%91</span><span class="variable">%E6</span><span class="variable">%89</span><span class="variable">%8</span>B<span class="variable">%E5</span><span class="variable">%86</span><span class="variable">%8</span>C<span class="variable">%EF</span><span class="variable">%BC</span><span class="variable">%88</span><span class="variable">%E6</span><span class="variable">%B3</span><span class="variable">%B0</span><span class="variable">%E5</span><span class="variable">%B1</span><span class="variable">%B1</span><span class="variable">%E7</span><span class="variable">%89</span><span class="variable">%88</span><span class="variable">%EF</span><span class="variable">%BC</span><span class="variable">%89</span>.pdf</span><br></pre></td></tr></table></figure>
<h2 id="Java-文件操作之文件上传">Java 文件操作之文件上传</h2>
<p>此章节我们关注学习两种文件上传方式：Multipartfile方式文件上传和ServletFileUpload方式文件上传。</p>
<p>两种方式给出代码案例，从不同侧来学习Java中文件上传方式。</p>
<p>以下给出的文件上传代码均为示例代码，无安全防护，目前仅是为了让大家学习理解这几种上传方式。</p>
<p>提前铺垫下一阶段任意文件上传漏洞前置知识。</p>
<p>当然还有其他方式和组件的文件上传，比如文件流方式，smartupload组件等等。</p>
<p>本次仅讲述常见的两种。不论用那种方式都换汤不换药，方式的不同对于我们后面进行任意文件上传代码审计影响不会太大。到时再具体问题具体分析。</p>
<h3 id="一、Multipartfile-方式文件上传">一、Multipartfile 方式文件上传</h3>
<h4 id="1、简介">1、简介</h4>
<p>MultipartFile <strong>是 Spring 框架中的一个接口，它提供了一种方便的方式来处理文件上传</strong>。 它可以处理从表单中上传的文件，并提供了访问文件名称、大小、类型以及内容等信息的方法。 MultipartFile 接口还提供了一些实用的方法，如将文件保存到本地磁盘、将文件转换为字节数组等。</p>
<h4 id="2、环境搭建">2、环境搭建</h4>
<p>①、创建 SpringBoot 项目，打开 IDEA，点击新建项目，选择 Spring Initializr，使用以下配置后点击Next，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E6%96%B0%E5%BB%BA.jpg" alt="创建项目"></p>
<p>②、依赖选择添加 Web -&gt; Spring Web，最后点击创建即可。如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E6%96%B0%E5%BB%BA2.jpg" alt="新建2"></p>
<p>③、完善下项目结构。在 main 目录下新建<code>webapp</code>目录，然后在 webapp 目录下新建<code>WEB-INF</code>目录。如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E5%8F%B3%E9%94%AE%E9%80%89%E6%8B%A9%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95.jpg" alt="右键选择创建目录"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E5%88%9B%E5%BB%BAwebapp%E7%9B%AE%E5%BD%95.jpg" alt="创建webapp目录"></p>
<p>备注：<code>WEB-INF </code>目录为 JAVA WEB 中安全目录，该目录仅允许服务端访问，客户端无法访问。该目录下有 web.xml 文件。</p>
<p>④、在<code>pom.xml</code>文件中的<code>&lt;dependencies&gt;...&lt;/dependencies&gt;</code>标签内添加 JSP 依赖，并重载 maven 为了下载所添加的依赖。如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- servlet 依赖 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;</span><br><span class="line">    &lt;scope&gt;provided&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jstl&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- tomcat 的支持.--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;</span><br><span class="line">    &lt;scope&gt;provided&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E6%B7%BB%E5%8A%A0jsp%E4%BE%9D%E8%B5%96.jpg" alt="添加jsp依赖"></p>
<p>⑤、在<code>application.properties</code>添加一些配置信息，如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">server.port=<span class="number">7089</span></span><br><span class="line">#视图前缀</span><br><span class="line">spring.mvc.view.prefix=/jsp/</span><br><span class="line">#视图后缀</span><br><span class="line">spring.mvc.view.suffix=.jsp</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF.jpg" alt="修改配置信息"></p>
<p>⑧、在 webapp 文件下创建 jsp 目录，并新建一个 index.jsp 文件，键入以下信息，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E5%88%9B%E5%BB%BAjsp%E7%9B%AE%E5%BD%95%E5%92%8Cindexjsp.jpg" alt="创建jsp目录和indexjsp"></p>
<p>⑨、启动运行，如成功搭建，响应如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E6%88%90%E5%8A%9F%E5%90%AF%E5%8A%A8index.jpg" alt="成功启动index"></p>
<h4 id="3、代码示例">3、代码示例</h4>
<p>①、在 jsp 文件夹下新建一个名为<code>multipartfileUpload.jsp</code>的文件，键入以下代码。如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span><br><span class="line">    &lt;title&gt;文件上传页面&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;文件上传页面&lt;/h1&gt;</span><br><span class="line">&lt;form method=<span class="string">&quot;post&quot;</span> action=<span class="string">&quot;/upload&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="line">    选择要上传的文件：&lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;file&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/multipartfileUpload-JSP.jpg" alt="multipartfileUpload-JSP"></p>
<p>②、在<code>com.example.demo</code>目录下右键新建一个class名为<code>multipartfileController</code>，键入以下代码，如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestPart;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Files;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">multipartfileController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;file.upload.path&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String path;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">uploadPage</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;upload&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">create</span><span class="params">(<span class="meta">@RequestPart</span> MultipartFile file)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line">        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> path + fileName;</span><br><span class="line"></span><br><span class="line">        <span class="type">File</span> <span class="variable">dest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(filePath);</span><br><span class="line">        Files.copy(file.getInputStream(), dest.toPath());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Upload file success : &quot;</span> + dest.getAbsolutePath();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/multipartfileController%E4%BB%A3%E7%A0%81.jpg" alt="multipartfileController代码"></p>
<p>③、在<code>application.properties</code>配置文件中添加一条配置信息<code>file.upload.path=C:/Users/powerful/Desktop/</code>，是上传文件存放的地址，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E5%AD%98%E6%94%BE%E5%9C%B0%E5%9D%80.jpg" alt="存放地址"></p>
<p>④、运行启动项目，访问<code>127.0.0.1/jsp/multipartfileUpload.jsp</code>，上传文件观察结果（是否将上传的图片存放到了桌面处）。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E5%AD%98%E6%94%BE%E7%BB%93%E6%9E%9C.jpg" alt="存放结果"></p>
<p>此案例非常简单，使用了multipartfile方式进行文件上传，配合文件流保存上传内容。</p>
<h3 id="二、ServletFileUpload-方式文件上传">二、ServletFileUpload 方式文件上传</h3>
<h4 id="1、简介-2">1、简介</h4>
<p>ServletFileUpload 方式文件上传依赖 commons-fileupload 组件。</p>
<p>对于 commons-fileupload 组件介绍：FileUpload依据规范RFC1867中”基于表单的 HTML 文件上载”对上传的文件数据进行解析，解析出来的每个项目对应一个 FileItem 对象。<br>
每个 FileItem 都有我们可能所需的属性：获取contentType，获取原本的文件名，获取文件大小，获取FiledName(如果是表单域上传)，判断是否在内存中，判断是否属于表单域等。<br>
FileUpload使用FileItemFactory创建新的FileItem。该工厂可以控制每个项目的创建方式。目前提供的工厂实现可以将项目的数据存储临时存储在内存或磁盘上，具体取决于项目的大小（即数据字节，在指定的大小内时，存在内存中，超出范围，存在磁盘上）。</p>
<p>FileUpload 又依赖于 Commons IO。</p>
<p>官方网站：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>commons.apache.org<span class="regexp">/proper/</span>commons-fileupload/</span><br></pre></td></tr></table></figure>
<p>常用的一些方法：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>FileItemFactory</td>
<td>表单项工厂接口</td>
</tr>
<tr>
<td>ServletFileUpload</td>
<td>文件上传类，用于解析上传的数据</td>
</tr>
<tr>
<td>FileItem</td>
<td>表单项类，表示每一个表单项</td>
</tr>
<tr>
<td>public List<FileItem> parseRequest(HttpServletRequest request)</td>
<td>解析上传的数据，返回包含 表单项的 List 集合</td>
</tr>
<tr>
<td>String FileItem.getFieldName()</td>
<td>获取表单项的 name 属性值</td>
</tr>
<tr>
<td>String FileItem.getString()</td>
<td>获取当前表单项的值；</td>
</tr>
<tr>
<td>String FileItem.getName()</td>
<td>获取上传的文件名</td>
</tr>
<tr>
<td>void FileItem.write(file)</td>
<td>将上传的文件写到 参数 file 所指向存取的硬盘位置</td>
</tr>
</tbody>
</table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">FileItemFactory      表单项工厂接口</span><br><span class="line">ServletFileUpload    文件上传类，用于解析上传的数据</span><br><span class="line">FileItem             表单项类，表示每一个表单项</span><br><span class="line"><span class="type">boolean</span> ServletFileUpload.isMultipartContent(HttpServletRequest request)   判断当前上传的数据格式是否是多段的格式，只有是多段数据，才能使用该方式</span><br><span class="line"><span class="keyword">public</span> List&lt;FileItem&gt; <span class="title function_">parseRequest</span><span class="params">(HttpServletRequest request)</span>             解析上传的数据，返回包含 表单项的 List 集合</span><br><span class="line"><span class="type">boolean</span> FileItem.isFormField() 　　　　　　判断当前这个表单项，是否是普通的表单项，还是上传的文件类型，<span class="literal">true</span> 表示普通类型的表单项；<span class="literal">false</span> 表示上传的文件类型</span><br><span class="line">String FileItem.getFieldName() 　　　　　　获取表单项的 name 属性值</span><br><span class="line">String FileItem.getString()       　　　　获取当前表单项的值；</span><br><span class="line"> </span><br><span class="line">String FileItem.getName()　　　　　　　　  获取上传的文件名</span><br><span class="line"><span class="keyword">void</span> FileItem.write( file )　　　　　　　　将上传的文件写到 参数 file 所指向存取的硬盘位置 </span><br></pre></td></tr></table></figure>
<h4 id="2、创建项目">2、创建项目</h4>
<p>①、启动 IDEA，新建个名为 servletDemo 的项目，选择 maven-webapp 模板，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/servlet%E6%96%B0%E5%BB%BA.jpg" alt="servlet新建"></p>
<p>②、在<code>pom.xml</code>中引入 servlet 的依赖，写在<code>&lt;dependencies&gt;</code>标签内，然后可以点击右上角<code>加载文件改动</code>的按钮（也就是重新加载安装依赖），如下图所示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E5%A1%AB%E5%86%99servlet%E4%BE%9D%E8%B5%96.jpg" alt="填写servlet依赖"></p>
<h4 id="3、环境配置Tomcat">3、环境配置Tomcat</h4>
<p>①、访问Tomcat官网<code>https://tomcat.apache.org/download-80.cgi</code>，下载任意版本Tomcat，我选择的版本是<code>8.5.81</code>，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E9%80%89%E6%8B%A9tomcat%E7%89%88%E6%9C%AC.jpg" alt="选择tomcat版本"></p>
<p>选择<code>Binary Distributions</code>下的<code>Core</code>分类，这是Tomcat正式的二进制发布版本，一般学习和开发都用此版本。根据自己计算机系统选择下载项。</p>
<p>②、下载完成后，先解压到桌面备用。</p>
<p>③、进入IDEA，配置Tomcat。在右上侧选择<code>Add Configuration...</code>，在新的界面点击左上角的<code>+</code>按钮，滑到下面找到<code>Tomcat Server</code>点击选择<code>Local</code>，如下图所示：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/配置添加tomcat.jpg" alt="配置添加tomcat" style="zoom: 50%;" />
<p>④、在Server标签栏下点击<code>Configure...</code>，进入新的界面，在<code>Tomcat Home</code>处添加Tomcat，最后点击OK。如下图所示：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/添加tomcat.jpg" alt="添加tomcat" style="zoom: 67%;" />
<p>⑤、配置部署方式，选择<code>Deployment</code>标签栏，在右侧点击<code>+</code>按钮，选择<code>war exploded</code>方式，如下图所示：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/选择部署方式.jpg" alt="选择部署方式" style="zoom:67%;" />
<p><code>war方式</code>：是发布模式，先打包成war包，再发布。<code>war exploded方式</code>：常在开发的时候使用这种方式，它可以支持热部署，但需要设置。跟本次案例调试无关，仅是给大家简单讲讲。</p>
<p>⑥、设置URL根路径后，点击<code>Apply</code>，左后点击<code>OK</code>。如下图所示：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/设置路径后apply.jpg" alt="设置路径后apply" style="zoom:67%;" />
<p>至此，完成了在IDEA中配置Tomcat。</p>
<h4 id="4、代码示例">4、代码示例</h4>
<p>下文代码示例使用的<code>https://www.cnblogs.com/liuyangv/p/8298997.html</code>文章中的代码。作者给出了详细的注解，非常适合学习。</p>
<p>配合上面项目搭建，调试一下吧。</p>
<p>①、首先在 pom.xml 中添加所需依赖后重新加载 maven，如下图所示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/commons-io/commons-io --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/commons-fileupload%E4%BE%9D%E8%B5%96.jpg" alt="commons-fileupload依赖"></p>
<p>②、在<code>index.jsp</code>文件中键入以下代码，如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html&quot;</span> pageEncoding=<span class="string">&quot;utf-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;文件上传&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;FileUploadServlet&quot;</span> method=<span class="string">&quot;post&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="line">    用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    文件<span class="number">1</span>：&lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;f1&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    文件<span class="number">2</span>：&lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;f2&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/INDEXjsp%E4%BB%A3%E7%A0%81.jpg" alt="INDEXjsp代码"></p>
<p>③、右键main目录新建一个名为java的目录，并在该目录下创建一个class，名为<code>FileUploadServlet</code>，并键入一下代码，如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.FileItem;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.FileUploadException;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.ProgressListener;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.disk.DiskFileItemFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.servlet.ServletFileUpload;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> powerful</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileUploadServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//得到上传文件的保存目录。 将上传的文件存放于WEB-INF目录下，不允许外界直接访问，保证上传文件的安全</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext().getRealPath(<span class="string">&quot;/upload&quot;</span>);<span class="comment">//  /WEB-INF/files</span></span><br><span class="line">            System.out.println(<span class="string">&quot;文件存放位置:&quot;</span>+realPath);</span><br><span class="line">            <span class="comment">//设置临时目录。 上传文件大于缓冲区则先放于临时目录中</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">tempPath</span> <span class="operator">=</span> <span class="string">&quot;C:\\Users\\powerful\\Desktop&quot;</span>;</span><br><span class="line">            System.out.println(<span class="string">&quot;临时文件存放位置:&quot;</span>+tempPath);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">//判断存放上传文件的目录是否存在（不存在则创建）</span></span><br><span class="line">            <span class="type">File</span> <span class="variable">f</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(realPath);</span><br><span class="line">            <span class="keyword">if</span>(!f.exists()&amp;&amp;!f.isDirectory())&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;目录或文件不存在! 创建目标目录。&quot;</span>);</span><br><span class="line">                f.mkdir();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//判断临时目录是否存在（不存在则创建）</span></span><br><span class="line">            <span class="type">File</span> <span class="variable">f1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(tempPath);</span><br><span class="line">            <span class="keyword">if</span>(!f1.isDirectory())&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;临时文件目录不存在! 创建临时文件目录&quot;</span>);</span><br><span class="line">                f1.mkdir();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * 使用Apache文件上传组件处理文件上传步骤：</span></span><br><span class="line"><span class="comment">             *</span></span><br><span class="line"><span class="comment">             * */</span></span><br><span class="line">            <span class="comment">//1、设置环境:创建一个DiskFileItemFactory工厂</span></span><br><span class="line">            <span class="type">DiskFileItemFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DiskFileItemFactory</span>();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//设置上传文件的临时目录</span></span><br><span class="line">            factory.setRepository(f1);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//2、核心操作类:创建一个文件上传解析器。</span></span><br><span class="line">            <span class="type">ServletFileUpload</span> <span class="variable">upload</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServletFileUpload</span>(factory);</span><br><span class="line">            <span class="comment">//解决上传&quot;文件名&quot;的中文乱码</span></span><br><span class="line">            upload.setHeaderEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//3、判断enctype:判断提交上来的数据是否是上传表单的数据</span></span><br><span class="line">            <span class="keyword">if</span>(!ServletFileUpload.isMultipartContent(req))&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;不是上传文件，终止&quot;</span>);</span><br><span class="line">                <span class="comment">//按照传统方式获取数据</span></span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//==获取输入项==</span></span><br><span class="line"><span class="comment">//            //限制单个上传文件大小(5M)</span></span><br><span class="line"><span class="comment">//            upload.setFileSizeMax(1024*1024*4);</span></span><br><span class="line"><span class="comment">//            //限制总上传文件大小(10M)</span></span><br><span class="line"><span class="comment">//            upload.setSizeMax(1024*1024*6);</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//4、使用ServletFileUpload解析器解析上传数据，解析结果返回的是一个List&lt;FileItem&gt;集合，每一个FileItem对应一个Form表单的输入项</span></span><br><span class="line">            List&lt;FileItem&gt; items =upload.parseRequest(req);</span><br><span class="line">            <span class="keyword">for</span>(FileItem item:items)&#123;</span><br><span class="line">                <span class="comment">//如果fileitem中封装的是普通输入项的数据（输出名、值）</span></span><br><span class="line">                <span class="keyword">if</span>(item.isFormField())&#123;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">filedName</span> <span class="operator">=</span> item.getFieldName();<span class="comment">//普通输入项数据的名</span></span><br><span class="line">                    <span class="comment">//解决普通输入项的数据的中文乱码问题</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">filedValue</span> <span class="operator">=</span> item.getString(<span class="string">&quot;UTF-8&quot;</span>);<span class="comment">//普通输入项的值</span></span><br><span class="line">                    System.out.println(<span class="string">&quot;普通字段:&quot;</span>+filedName+<span class="string">&quot;==&quot;</span>+filedValue);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="comment">//如果fileitem中封装的是上传文件，得到上传的文件名称，</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> item.getName();<span class="comment">//上传文件的名</span></span><br><span class="line">                    <span class="comment">//多个文件上传输入框有空 的 异常处理</span></span><br><span class="line">                    <span class="keyword">if</span>(fileName==<span class="literal">null</span>||<span class="string">&quot;&quot;</span>.equals(fileName.trim()))&#123;  <span class="comment">//去空格是否为空</span></span><br><span class="line">                        <span class="keyword">continue</span>;<span class="comment">// 为空，跳过当次循环，  第一个没输入则跳过可以继续输入第二个</span></span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">//注意：不同的浏览器提交的文件名是不一样的，有些浏览器提交上来的文件名是带有路径的，如：  c:\a\b\1.txt，而有些只是单纯的文件名，如：1.txt</span></span><br><span class="line">                    <span class="comment">//处理上传文件的文件名的路径，截取字符串只保留文件名部分。//截取留最后一个&quot;\&quot;之后，+1截取向右移一位（&quot;\a.txt&quot;--&gt;&quot;a.txt&quot;）</span></span><br><span class="line">                    fileName = fileName.substring(fileName.lastIndexOf(<span class="string">&quot;\\&quot;</span>)+<span class="number">1</span>);</span><br><span class="line">                    <span class="comment">//拼接上传路径。存放路径+上传的文件名</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> realPath+<span class="string">&quot;\\&quot;</span>+fileName;</span><br><span class="line">                    <span class="comment">//构建输入输出流</span></span><br><span class="line">                    <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> item.getInputStream(); <span class="comment">//获取item中的上传文件的输入流</span></span><br><span class="line">                    <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(filePath); <span class="comment">//创建一个文件输出流</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">//创建一个缓冲区</span></span><br><span class="line">                    <span class="type">byte</span> b[] = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">                    <span class="comment">//判断输入流中的数据是否已经读完的标识</span></span><br><span class="line">                    <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">                    <span class="comment">//循环将输入流读入到缓冲区当中，(len=in.read(buffer))！=-1就表示in里面还有数据</span></span><br><span class="line">                    <span class="keyword">while</span>((len=in.read(b))!=-<span class="number">1</span>)&#123;  <span class="comment">//没数据了返回-1</span></span><br><span class="line">                        <span class="comment">//使用FileOutputStream输出流将缓冲区的数据写入到指定的目录(savePath+&quot;\\&quot;+filename)当中</span></span><br><span class="line">                        out.write(b, <span class="number">0</span>, len);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//关闭流</span></span><br><span class="line">                    out.close();</span><br><span class="line">                    in.close();</span><br><span class="line">                    <span class="comment">//删除临时文件</span></span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    item.delete();<span class="comment">//删除处理文件上传时生成的临时文件</span></span><br><span class="line">                    System.out.println(<span class="string">&quot;文件上传成功&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileUploadException e) &#123;</span><br><span class="line">            <span class="comment">//e.printStackTrace();</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;服务器繁忙，文件上传失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/fileuploadservlet.jpg" alt="fileuploadservlet"></p>
<p>④、运行项目，上传文件观察结果。</p>
<p>至此，两种上传方式均已演示完毕。大家调试下代码学习一下吧。</p>
<h3 id="三、拓展文件上传项目学习">三、拓展文件上传项目学习</h3>
<p>1、SpringBoot 集成上传文件，该项目多是使用的 Multipartfile 方式进行的文件上传。但其中有一块是使用了文件流方式，位于<code>/src/main/java/com/example/springbootupload/controller/FileUploadController.java</code>文件内，大家可以调试一下。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/xiaonongOne/</span>springboot-upload</span><br></pre></td></tr></table></figure>
<p>2、MyUploader-Backend 项目实现了单文件上传，多文件上传，大文件上传，断点续传，文件秒传，图片上传。完整项目建议学习。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/gaoyuyue/</span>MyUploader-Backend</span><br></pre></td></tr></table></figure>
<h2 id="Java-文件操作之文件读取与下载">Java 文件操作之文件读取与下载</h2>
<p>我先抛出一个问题，读取文件与下载文件在代码审计有何区别呢？</p>
<p>先简单说下答案，实际上在后端大多是通过读取文件方式获得目标文件内容，这个不难理解。最后将文件流内容传给浏览器，并在 header 头中添加浏览器解析方式和文件名，比如：文件下载到本地实现方法可以使用响应头<code>Content-disposition</code>来控制，也就是说下载这个动作是交给浏览器去操作的。</p>
<p><code>Content-Disposition</code> 响应头：指示回复的内容该以何种形式展示，是以<code>内联</code>的形式（即网页或者页面的一部分），还是以<code>附件</code>的形式下载并保存到本地。</p>
<p>但从漏洞挖掘角度来看，我们使用下载或读取功能的目的是获得目标敏感文件中的数据。</p>
<h3 id="一、新建-Java-基础工程">一、新建 Java 基础工程</h3>
<p>使用IDEA创建一个基础项目工程，用于下面几种文件读取/下载实现方法的调试。</p>
<p>①、打开 IDEA 创建一个项目，注意选择 maven webapp 模板，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE1.jpg" alt="新建项目1"></p>
<p>②、点击创建即可。</p>
<p>③、在桌面随便创建一个 txt 文本文件，里面键入任意内容，目的是用于下面读取文件的。</p>
<p>到此项目创建完成，下面根据每一个实现方法编写对应实现代码。</p>
<h3 id="二、文件读取-下载实现方法">二、文件读取/下载实现方法</h3>
<p>下面介绍几种我学到的 Java读取/下载文件的几种实现方法。</p>
<h4 id="方法一：使用java-nio-file-Files读取文本">方法一：使用java.nio.file.Files读取文本</h4>
<h5 id="1、简述">1、简述</h5>
<p>使用<code>Files</code>类将文件的所有内容读入字节数组。<code>Files</code>类还有一个方法可以读取所有行到字符串列表。<code>Files</code>类是在Java 7中引入的，如果想加载所有文件内容，使用这个类是比较适合的。只有在处理小文件并且需要加载所有文件内容到内存中时才应使用此方法。</p>
<h5 id="2、实现代码">2、实现代码</h5>
<p>①、在刚才创建的工程下的<code>src/main/java</code>目录下创建一个名为<code>ReadFiles</code>的Java Class。并键入以下代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Files;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Path;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Paths;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 编号7089</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReadFiles</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> <span class="string">&quot;C:\\Users\\power\\Desktop\\test.txt&quot;</span>;</span><br><span class="line">        <span class="comment">//使用Java 7中的Files类处理小文件，获取完整的文件数据</span></span><br><span class="line">        readUsingFiles(fileName);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">readUsingFiles</span><span class="params">(String fileName)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Path</span> <span class="variable">path</span> <span class="operator">=</span> Paths.get(fileName);</span><br><span class="line">        System.out.println(<span class="string">&quot;使用File类字节数组读取文件.........&quot;</span>);</span><br><span class="line">        <span class="comment">//将文件读取到字节数组</span></span><br><span class="line">        <span class="type">byte</span>[] bytes = Files.readAllBytes(path);</span><br><span class="line">        System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(bytes));</span><br><span class="line">        System.out.println(<span class="string">&quot;使用File类字读取文件字符串列表.........&quot;</span>);</span><br><span class="line">        <span class="meta">@SuppressWarnings(&quot;unused&quot;)</span></span><br><span class="line">        List&lt;String&gt; allLines = Files.readAllLines(path, StandardCharsets.UTF_8);</span><br><span class="line">        System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(allLines.toString()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>②、启动运行项目，观察结果，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E4%BD%BF%E7%94%A8files%E7%B1%BB%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6.jpg" alt="使用files类读取文件.jpg"></p>
<h4 id="方法二：使用java-io-FileReader类读取文本">方法二：使用java.io.FileReader类读取文本</h4>
<h5 id="1、简述-2">1、简述</h5>
<p>可以使用<code>FileReader</code>获取<code>BufferedReader</code>，然后逐行读取文件。<code>FileReader</code>不支持编码并使用系统默认编码，因此它不是一种java中读取文本文件的非常有效的方法。</p>
<h5 id="2、实现代码-2">2、实现代码</h5>
<p>①、在刚才创建的工程下的<code>src/main/java</code>目录下创建一个名为<code>ReadFileReader</code>的Java Class。并键入以下代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReadFileReader</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> <span class="string">&quot;C:\\Users\\powerful\\Desktop\\test.txt&quot;</span>;</span><br><span class="line">        <span class="comment">//使用FileReader读取，没有编码支持，效率不高</span></span><br><span class="line">        readUsingFileReader(fileName);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">readUsingFileReader</span><span class="params">(String fileName)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">            <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(fileName);</span><br><span class="line">        <span class="type">FileReader</span> <span class="variable">fr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(file);</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(fr);</span><br><span class="line">        String line;</span><br><span class="line">        System.out.println(<span class="string">&quot;使用FileReader读取文本文件......&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span>((line = br.readLine()) != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">//逐行读取</span></span><br><span class="line">            System.out.println(line);</span><br><span class="line">        &#125;</span><br><span class="line">        br.close();</span><br><span class="line">        fr.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>②、启动运行项目，观察结果，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E4%BD%BF%E7%94%A8filereader%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6.jpg" alt="使用filereader读取文件"></p>
<h4 id="方法三：使用java-io-BufferedReader读取文本">方法三：使用java.io.BufferedReader读取文本</h4>
<h5 id="1、简述-3">1、简述</h5>
<p>如果想逐行读取文件并对它们进行处理，那么<code>BufferedReader</code>是非常合适的。它适用于处理大文件，也支持编码。</p>
<p><code>BufferedReader</code>是同步的，因此可以安全地从多个线程完成对<code>BufferedReader</code>的读取操作。<code>BufferedReader</code>的默认缓冲区大小为：<code>8KB</code>。</p>
<h5 id="2、实现代码-3">2、实现代码</h5>
<p>①、在刚才创建的工程下的<code>src/main/java</code>目录下创建一个名为<code>ReadBufferedReader</code>的Java Class。并键入以下代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.Charset;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReadBufferedReader</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> <span class="string">&quot;C:\\Users\\powerful\\Desktop\\test.txt&quot;</span>;</span><br><span class="line">        <span class="comment">//使用BufferedReader读取，逐行读取,并设置编码为UTF_8</span></span><br><span class="line">        readUsingBufferedReader(fileName, StandardCharsets.UTF_8);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">readUsingBufferedReader</span><span class="params">(String fileName, Charset cs)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(fileName);</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">        <span class="type">InputStreamReader</span> <span class="variable">isr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(fis, cs);</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(isr);</span><br><span class="line">        String line;</span><br><span class="line">        System.out.println(<span class="string">&quot;使用BufferedReader读取文本文件......&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span>((line = br.readLine()) != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">//逐行读取</span></span><br><span class="line">            System.out.println(line);</span><br><span class="line">        &#125;</span><br><span class="line">        br.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>②、启动运行项目，观察结果，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E4%BD%BF%E7%94%A8bufferreader%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6.jpg" alt="使用bufferreader读取文件"></p>
<h4 id="方法四：使用-Scanner-读取文本">方法四：使用 Scanner 读取文本</h4>
<h5 id="1、简述-4">1、简述</h5>
<p>如果要逐行读取文件或基于某些java正则表达式读取文件，则可使用<code>Scanner</code>类。</p>
<p><code>Scanner</code>类使用分隔符模式将其输入分解为标记，分隔符模式默认匹配空格。然后可以使用各种下一种方法将得到的标记转换成不同类型的值。<code>Scanner</code>类不同步，因此不是线程安全的。</p>
<h5 id="2、实现代码-4">2、实现代码</h5>
<p>①、在刚才创建的工程下的<code>src/main/java</code>目录下创建一个名为<code>ReadScanner</code>的Java Class。并键入以下代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Path;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Paths;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReadScanner</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> <span class="string">&quot;C:\\Users\\powerful\\Desktop\\test.txt&quot;</span>;</span><br><span class="line">        <span class="comment">//使用Scanner类来处理大文件，逐行读取</span></span><br><span class="line">        readUsingScanner(fileName);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">readUsingScanner</span><span class="params">(String fileName)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Path</span> <span class="variable">path</span> <span class="operator">=</span> Paths.get(fileName);</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(path);</span><br><span class="line">        System.out.println(<span class="string">&quot;使用Scanner读取文本文件.....&quot;</span>);</span><br><span class="line">        <span class="comment">//逐行读取</span></span><br><span class="line">        <span class="keyword">while</span>(scanner.hasNextLine())&#123;</span><br><span class="line">            <span class="comment">//逐行处理</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> scanner.nextLine();</span><br><span class="line">            System.out.println(line);</span><br><span class="line">        &#125;</span><br><span class="line">        scanner.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>②、启动运行项目，观察结果，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E4%BD%BF%E7%94%A8scanner%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6.jpg" alt="使用scanner读取文件"></p>
<h4 id="方法五：使用RandomAccessFile断点续传读取文本">方法五：使用RandomAccessFile断点续传读取文本</h4>
<h5 id="1、简述-5">1、简述</h5>
<p>随机流（RandomAccessFile）不属于IO流，支持对文件的读取和写入随机访问。</p>
<p>首先把随机访问的文件对象看作存储在文件系统中的一个大型 byte 数组，然后通过指向该 byte 数组的光标或索引（即：文件指针 FilePointer）在该数组任意位置读取或写入任意数据。</p>
<p>断点续传是在下载或上传时，将下载或上传任务（一个文件或一个压缩包）划分为几个部分，每一个部分采用一个线程进行上传或下载，如果碰到网络故障，可以从已经上传或下载的部分开始继续上传或者下载未完成的部分，而没有必要从头开始上传或者下载。</p>
<p>断点续传实现原理：</p>
<ol>
<li>下载断开的时候，记录文件断点的位置position；</li>
<li>继续下载的时候，通过<strong>RandomAccessFile</strong>找到之前的position位置开始下载</li>
</ol>
<h5 id="2、实现代码-5">2、实现代码</h5>
<p>①、在刚才创建的工程下的<code>src/main/java</code>目录下创建一个名为<code>ReadRandomAccessFile</code>的Java Class。并键入以下代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.RandomAccessFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReadRandomAccessFile</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> <span class="string">&quot;C:\\Users\\powerful\\Desktop\\test.txt&quot;</span>;</span><br><span class="line">        <span class="comment">//使用RandomAccessFile来实现断点续传读取/下载文件</span></span><br><span class="line">        readUsingRandomAccessFile(fileName);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">readUsingRandomAccessFile</span><span class="params">(String fileName)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">RandomAccessFile</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RandomAccessFile</span>(fileName, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">        String str;</span><br><span class="line">        <span class="keyword">while</span> ((str = file.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;使用RandomAccessFile来实现断点续传读取/下载文件......&quot;</span>);</span><br><span class="line">            System.out.println(str);</span><br><span class="line">        &#125;</span><br><span class="line">        file.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>②、启动运行项目，观察结果，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/RandomAccessFile%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6.jpg" alt="RandomAccessFile读取文件"></p>
<h4 id="方式六：使用-commons-io读取文本">方式六：使用 commons-io读取文本</h4>
<h5 id="1、简述-6">1、简述</h5>
<p>Commons IO 是 Apache 软件基金会的一个项目，它提供了一组用于处理 I/O 操作的实用工具类。这个库旨在简化 Java 编程中常见的文件和流操作，使开发者能够更轻松地处理文件读写、流操作、文件过滤和目录操作等。</p>
<p>一些 Commons IO 提供的主要功能包括：</p>
<p><strong>文件操作：</strong> 提供了一系列用于文件复制、移动、删除和重命名的方法，还包括了获取文件大小、检查文件是否存在等常见操作。</p>
<p><strong>流操作：</strong> 提供了用于处理输入和输出流的实用方法，如关闭流、复制流、转换流等。</p>
<p><strong>文件过滤：</strong> 提供了一些实用的文件过滤器，可以根据文件名、文件大小、最后修改时间等条件对文件进行过滤。</p>
<p><strong>目录操作：</strong> 提供了一些方便的方法来处理目录，如创建目录、列出目录内容等。</p>
<p><strong>文件内容操作：</strong> 提供了一些用于读取、写入和比较文件内容的方法。</p>
<p>下面使用 Commons-io 库一行代码文件来实现读取文件。</p>
<h5 id="2、实现代码-6">2、实现代码</h5>
<p>①、首先要在<code>pom.xml</code>中引入<code>Commons-io</code>依赖后重载maven。如下图所示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/commons-io/commons-io --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E5%BC%95%E5%85%A5commonsio%E4%BE%9D%E8%B5%96.jpg" alt="引入commonsio依赖"></p>
<p>②、在刚才创建的工程下的<code>src/main/java</code>目录下创建一个名为<code>ReadCommonsIo</code>的Java Class。并键入以下代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.io.FileUtils;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReadCommonsIo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> <span class="string">&quot;C:\\Users\\powerful\\Desktop\\test.txt&quot;</span>;</span><br><span class="line">        readUsingCommonsIo(fileName);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">readUsingCommonsIo</span><span class="params">(String fileName)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(fileName);</span><br><span class="line">        System.out.println(<span class="string">&quot;使用Commons-io读取文件......&quot;</span>);</span><br><span class="line">        System.out.println(FileUtils.readFileToString(file, StandardCharsets.UTF_8));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>③、启动运行项目，观察结果，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E4%BD%BF%E7%94%A8Commonsio%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6.jpg" alt="使用Commonsio读取文件"></p>
<h4 id="方法七：使用-Files-readString-读取文本">方法七：使用 Files.readString 读取文本</h4>
<h5 id="①、简述">①、简述</h5>
<p>Java 11添加了readString()方法来读取小文件String。官方介绍：<code>https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/Files.html#readString(java.nio.file.Path,java.nio.charset.Charset)</code></p>
<h3 id="②、实现代码">②、实现代码</h3>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String content = <span class="module-access"><span class="module"><span class="identifier">Files</span>.</span></span>read<span class="constructor">String(<span class="params">path</span>, StandardCharsets.US_ASCII)</span>;</span><br></pre></td></tr></table></figure>
<h3 id="三、文件读取-下载-JavaWeb-工程">三、文件读取/下载 JavaWeb 工程</h3>
<p>我们创建一个基于SpringBoot的读取文件的JavaWeb工程，这回我们从WEB角度调试上面几种方法。</p>
<p>①、打开 IDEA 创建个名为 webreadfile 的 SpringBoot 项目工程，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E5%88%9B%E5%BB%BA%E5%B7%A5%E7%A8%8B1.jpg" alt="创建工程1"></p>
<p>②、下一步，选择 Spring web 依赖，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E9%80%89%E6%8B%A9springweb%E4%BE%9D%E8%B5%96.jpg" alt="选择springweb依赖"></p>
<p>③、在<code>pom.xml</code>中引入 Commons-Io 依赖后重载Maven，便于后面使用。如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/webreadfile%E5%BC%95%E5%85%A5commonsio%E4%BE%9D%E8%B5%96.jpg" alt="webreadfile引入commonsio依赖"></p>
<p>④、在<code>src/main/java/com/example/demo</code>目录下创建一个名为<code>ReadFilesController</code>的Java Class，并键入以下代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.FileUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Files;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Path;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Paths;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 编号7089</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReadFilesController</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/readUsingFiles&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">readUsingFiles</span><span class="params">(String fileName, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//使用Java 7中的Files类处理小文件，获取完整的文件数据</span></span><br><span class="line">        <span class="type">Path</span> <span class="variable">path</span> <span class="operator">=</span> Paths.get(fileName);</span><br><span class="line">        <span class="comment">//将文件读取到字节数组</span></span><br><span class="line">        <span class="type">byte</span>[] bytes = Files.readAllBytes(path);</span><br><span class="line">        System.out.println(<span class="string">&quot;使用File类读取文件.........&quot;</span>);</span><br><span class="line">        <span class="meta">@SuppressWarnings(&quot;unused&quot;)</span></span><br><span class="line">        List&lt;String&gt; allLines = Files.readAllLines(path, StandardCharsets.UTF_8);</span><br><span class="line">        <span class="comment">//将注释去掉，重新运行启动项目，在浏览器键入要读取的文件地址，观察下效果有什么不一样。</span></span><br><span class="line">        <span class="comment">//response.reset();</span></span><br><span class="line">        <span class="comment">//response.setContentType(&quot;application/octet-stream&quot;);</span></span><br><span class="line">        <span class="comment">//response.addHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + URLEncoder.encode(fileName, &quot;UTF-8&quot;));</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(bytes));</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>(bytes);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/readUsingFileReader&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">readUsingFileReader</span><span class="params">(String fileName, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//使用FileReader读取，没有编码支持，效率不高</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(fileName);</span><br><span class="line">        <span class="type">FileReader</span> <span class="variable">fr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(file);</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(fr);</span><br><span class="line">        String line;</span><br><span class="line">        System.out.println(<span class="string">&quot;使用FileReader读取文本文件......&quot;</span>);</span><br><span class="line">        <span class="comment">//将注释去掉，重新运行启动项目，在浏览器键入要读取的文件地址，观察下效果有什么不一样。</span></span><br><span class="line">        <span class="comment">//response.reset();</span></span><br><span class="line">        <span class="comment">//response.setContentType(&quot;application/octet-stream&quot;);</span></span><br><span class="line">        <span class="comment">//response.addHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + URLEncoder.encode(fileName, &quot;UTF-8&quot;));</span></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        <span class="keyword">while</span> ((line = br.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">//逐行读取</span></span><br><span class="line">            System.out.println(line);</span><br><span class="line">            out.print(line);</span><br><span class="line">        &#125;</span><br><span class="line">        br.close();</span><br><span class="line">        fr.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/ReadBufferedReader&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">readBufferedReader</span><span class="params">(String fileName, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(fileName);</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">        <span class="type">InputStreamReader</span> <span class="variable">isr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(fis, StandardCharsets.UTF_8);</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(isr);</span><br><span class="line">        String line;</span><br><span class="line">        <span class="comment">//将注释去掉，重新运行启动项目，在浏览器键入要读取的文件地址，观察下效果有什么不一样。</span></span><br><span class="line">        <span class="comment">//response.reset();</span></span><br><span class="line">        <span class="comment">//response.setContentType(&quot;application/octet-stream&quot;);</span></span><br><span class="line">        <span class="comment">//response.addHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + URLEncoder.encode(fileName, &quot;UTF-8&quot;));</span></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        System.out.println(<span class="string">&quot;使用BufferedReader读取文本文件......&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span>((line = br.readLine()) != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">//逐行读取</span></span><br><span class="line">            System.out.println(line);</span><br><span class="line">            out.print(line);</span><br><span class="line">        &#125;</span><br><span class="line">        br.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/readScanner&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">readScanner</span><span class="params">(String fileName, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="type">Path</span> <span class="variable">path</span> <span class="operator">=</span> Paths.get(fileName);</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(path);</span><br><span class="line">        System.out.println(<span class="string">&quot;使用Scanner读取文本文件.....&quot;</span>);</span><br><span class="line">        <span class="comment">//将注释去掉，重新运行启动项目，在浏览器键入要读取的文件地址，观察下效果有什么不一样。</span></span><br><span class="line">        <span class="comment">//response.reset();</span></span><br><span class="line">        <span class="comment">//response.setContentType(&quot;application/octet-stream&quot;);</span></span><br><span class="line">        <span class="comment">//response.addHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + URLEncoder.encode(fileName, &quot;UTF-8&quot;));</span></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        <span class="comment">//逐行读取</span></span><br><span class="line">        <span class="keyword">while</span>(scanner.hasNextLine())&#123;</span><br><span class="line">            <span class="comment">//逐行处理</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> scanner.nextLine();</span><br><span class="line">            System.out.println(line);</span><br><span class="line">            out.print(line);</span><br><span class="line">        &#125;</span><br><span class="line">        scanner.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/readUsingRandomAccessFile&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">readUsingRandomAccessFile</span><span class="params">(String fileName, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="type">RandomAccessFile</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RandomAccessFile</span>(fileName, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">        String str;</span><br><span class="line">        <span class="comment">//将注释去掉，重新运行启动项目，在浏览器键入要读取的文件地址，观察下效果有什么不一样。</span></span><br><span class="line">        <span class="comment">//response.reset();</span></span><br><span class="line">        <span class="comment">//response.setContentType(&quot;application/octet-stream&quot;);</span></span><br><span class="line">        <span class="comment">//response.addHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + URLEncoder.encode(fileName, &quot;UTF-8&quot;));</span></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        <span class="keyword">while</span> ((str = file.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;使用RandomAccessFile来实现断点续传读取/下载文件......&quot;</span>);</span><br><span class="line">            System.out.println(str);</span><br><span class="line">            out.print(str);</span><br><span class="line">        &#125;</span><br><span class="line">        file.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/readUsingCommonsIo&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">readUsingCommonsIo</span><span class="params">(String fileName,HttpServletResponse response)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(fileName);</span><br><span class="line">        <span class="comment">//将注释去掉，重新运行启动项目，在浏览器键入要读取的文件地址，观察下效果有什么不一样。</span></span><br><span class="line">        response.reset();</span><br><span class="line">        response.setContentType(<span class="string">&quot;application/octet-stream&quot;</span>);</span><br><span class="line">        response.addHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment; filename=&quot;</span> + URLEncoder.encode(fileName, <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;使用Commons-io读取文件......&quot;</span>);</span><br><span class="line">        System.out.println(FileUtils.readFileToString(file, StandardCharsets.UTF_8));</span><br><span class="line">        <span class="keyword">return</span> FileUtils.readFileToString(file, StandardCharsets.UTF_8);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>⑤、启动运行项目，打开浏览器，访问其中一个读取/下载文件的接口，如下图所示：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span><span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">8080</span><span class="regexp">/readUsingRandomAccessFile?fileName=C:/</span>Users<span class="regexp">/powerful/</span>Desktop/test.txt</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E9%80%89%E6%8B%A9%E4%BB%BB%E6%84%8F%E6%8E%A5%E5%8F%A3%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6.jpg" alt="选择任意接口读取文件"></p>
<p>⑥、在代码文件中，每个接口我都留了相同的注释，我们选择一个接口将注释去除掉，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E9%80%89%E6%8B%A9%E4%BB%BB%E6%84%8F%E6%8E%A5%E5%8F%A3%E5%8E%BB%E6%8E%89%E6%B3%A8%E9%87%8A.jpg" alt="选择任意接口去掉注释"></p>
<p>⑦、再次启动运行，访问去掉注释的这个接口，我们可以看到将文件下载到了本地，如下图所示：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span><span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">8080</span><span class="regexp">/readUsingFiles?fileName=C:/</span>Users<span class="regexp">/powerful/</span>Desktop/test.txt</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E5%8E%BB%E9%99%A4%E6%B3%A8%E9%87%8A%E6%8E%A5%E5%8F%A3%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6%E5%88%B0%E6%9C%AC%E5%9C%B0.jpg" alt="去除注释接口下载文件到本地"></p>
<p>至此，文件读取/下载的几种方式讲完了。</p>
<p>一定要动手实践调试。</p>
<h2 id="Java-命令执行">Java 命令执行</h2>
<h3 id="零、前言">零、前言</h3>
<p>在 Java 中可用于执行系统命令的方式有三种，分别是<strong>java.lang.Runtime</strong>，<strong>java.lang.ProcessBuilder</strong>以及<strong>java.lang.UNIXProcess/ProcessImpl</strong>。</p>
<p>这三种方式都是 JDK 原生提供的，并不需要再额外引入。</p>
<p>下面我们通过代码示例来进一步理解这几种方式是如何执行系统命令的。</p>
<p>在我们针对 Java 系统进行代码审计以及渗透测试时，目标系统如果存在执行命令的功能，大概率是这三种方法之一。</p>
<h3 id="一、创建Demo工程">一、创建Demo工程</h3>
<p>使用 IDEA 创建一个基础项目工程，用于下面几种命令执行方法的调试。</p>
<p>①、双击 IDEA 启动，点击<code>Create New Project</code>。</p>
<p>②、左侧选择 Maven，模板就不用选择了，点击 Next。如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/maven%E9%BB%98%E8%AE%A4.jpg" alt="maven默认"></p>
<p>③、随便起个名字，最后点击Finish即可。如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E9%A1%B9%E7%9B%AE%E5%90%8D%E5%AD%97.jpg" alt="项目名字"></p>
<p>到此项目创建完成，下面根据每一个实现方式编写对应的示例代码。</p>
<h3 id="二、java-lang-Runtime执行命令">二、java.lang.Runtime执行命令</h3>
<h4 id="1、使用说明">1、使用说明</h4>
<p>java.lang提供了一系列对 Java 编程至关重要的类。具体提供的类可看：<a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/7/docs/api/java/lang/package-summary.html">https://docs.oracle.com/javase/7/docs/api/java/lang/package-summary.html</a></p>
<p>其中 Runtime 是 java.lang 中的一个类，主要是与操作系统交互执行操作命令。</p>
<p>而在<code>java.lang.Runtime</code>中我们主要关注<code>exec()</code>方法，使用该方法执行具体的命令，而执行exec()方法有以下六种重载形式，可以传入不同的数据类型的参数，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/exec%E5%85%AD%E7%A7%8D%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8F.jpg" alt="exec六种执行方式"></p>
<table>
<thead>
<tr>
<th>方法</th>
<th>英文释义</th>
<th>中文释义（非标准）</th>
</tr>
</thead>
<tbody>
<tr>
<td>exec(String[] cmdarray)</td>
<td>Executes the specified command and arguments in a separate process.</td>
<td>在单独的进程中执行指定的命令和参数。</td>
</tr>
<tr>
<td>exec(String command)</td>
<td>Executes the specified string command in a separate process.</td>
<td>在单独的进程中执行指定的字符串命令。</td>
</tr>
<tr>
<td>exec(String command, String[] envp, File dir)</td>
<td>Executes the specified string command in a separate process with the specified environment and working directory.</td>
<td>在具有指定环境和工作目录的单独进程中执行指定的字符串命令。</td>
</tr>
<tr>
<td>exec(String command, String[] envp)</td>
<td>Executes the specified string command in a separate process with the specified environment.</td>
<td>在具有指定环境的单独进程中执行指定的字符串命令。</td>
</tr>
<tr>
<td>exec(String[] cmdarray, String[] envp)</td>
<td>Executes the specified command and arguments in a separate process with the specified environment.</td>
<td>在具有指定环境的单独进程中执行指定的命令和参数。</td>
</tr>
<tr>
<td>exec(String[] cmdarray, String[] envp, File dir)</td>
<td>Executes the specified command and arguments in a separate process with the specified environment and working directory.</td>
<td>在具有指定环境和工作目录的单独进程中执行指定的命令和参数。</td>
</tr>
</tbody>
</table>
<p>java.lang.Runtime 的 API 文档https://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html</p>
<p>目前我们只先关注<code>exec(String command)</code>和<code>exec(String[] cmdarray)</code>这两种执行方式。</p>
<p>下面通过示例代码来理解。</p>
<h5 id="1-1、exec-String-command">1.1、exec(String command)</h5>
<p>在单独的进程中执行指定的字符串命令。</p>
<p>简单来说就是直接执行字符串命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//简易示例代码</span><br><span class="line">String <span class="built_in">command</span> = <span class="string">&quot;whoami&quot;</span>;</span><br><span class="line">Runtime.getRuntime().<span class="built_in">exec</span>(<span class="built_in">command</span>)</span><br></pre></td></tr></table></figure>
<h5 id="1-2、exec-String-cmdarray">1.2、exec(String[] cmdarray)</h5>
<p>在单独的进程中执行指定的命令和参数。</p>
<p>简单来说就是以数组的形式接收多个字符串然后执行。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//简易示例代码</span><br><span class="line">String[] <span class="built_in">command</span> = &#123; <span class="string">&quot;cmd&quot;</span>, <span class="string">&quot;/c&quot;</span>, <span class="string">&quot;whoami&quot;</span> &#125;;</span><br><span class="line">Runtime.getRuntime().<span class="built_in">exec</span>(<span class="built_in">command</span>)</span><br></pre></td></tr></table></figure>
<h4 id="2、代码示例">2、代码示例</h4>
<p>①、在<code>src/main/java</code>目录下新建一个Java Class，名叫<code>ExecRuntime</code>，并键入以下代码，最终如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.Charset;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExecRuntime</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">command1</span> <span class="operator">=</span> <span class="string">&quot;cmd /c whoami&quot;</span>;</span><br><span class="line">        <span class="comment">//windows环境下执行</span></span><br><span class="line">        String[] command2 = &#123;<span class="string">&quot;cmd&quot;</span>,<span class="string">&quot;/c&quot;</span>,<span class="string">&quot;ping www.baidu.com&quot;</span>&#125;;</span><br><span class="line">        <span class="comment">//String[] command2 = &#123;&quot;cmd&quot;,&quot;/c&quot;, &quot;py&quot;,&quot;-3&quot;, &quot;C:\\Users\\powerful\\Desktop\\dirsearch-0.4.2\\dirsearch.py&quot;, &quot;-u&quot;, &quot;https://www.baidu.com&quot;, &quot;-e *&quot;&#125;;</span></span><br><span class="line">        <span class="comment">//Linux环境下执行，也可以是bash，</span></span><br><span class="line">        <span class="comment">//String[] command3 = &#123;&quot;/bin/sh&quot;, &quot;/root/xxx.sh&quot;, &quot;xxx.sh所需的参数&quot;&#125;;</span></span><br><span class="line">        <span class="comment">//exec执行字符串命令</span></span><br><span class="line">        cmdstring(command1);</span><br><span class="line">        <span class="comment">//exec以数组方式接受多个参数并执行</span></span><br><span class="line">        cmdarray(command2);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//exec执行字符串命令</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">cmdstring</span><span class="params">(String command)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Process</span> <span class="variable">process</span> <span class="operator">=</span> Runtime.getRuntime().exec(command);</span><br><span class="line">        <span class="comment">//使用BufferedReader设置编码解决执行命令响应中文乱码问题</span></span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span></span><br><span class="line">                    <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(process.getInputStream(), Charset.forName(<span class="string">&quot;GBK&quot;</span>)));</span><br><span class="line">        <span class="keyword">while</span> ((line = bufferedReader.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            System.out.println(line);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//exec以数组方式接受多个参数并执行</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">cmdarray</span><span class="params">(String[] command)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Process</span> <span class="variable">process</span> <span class="operator">=</span> Runtime.getRuntime().exec(command);</span><br><span class="line">        <span class="comment">//使用BufferedReader设置编码解决执行命令响应中文乱码问题</span></span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(process.getInputStream(), Charset.forName(<span class="string">&quot;GBK&quot;</span>)));</span><br><span class="line">        <span class="keyword">while</span> ((line = bufferedReader.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            System.out.println(line);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/execruntime%E6%89%A7%E8%A1%8C%E7%BB%93%E6%9E%9C.jpg" alt="execruntime执行结果"></p>
<p>②、在代码注释中直接以字符串形式执行命令和以字符串数组形式执行命令给出了几个样例，大家可以关闭注释调试下。</p>
<p>③、为了便于理解字符串数组形式执行命令，我举了个执行python脚本的例子，命令如下：<code>String[] command2 = &#123;&quot;cmd&quot;,&quot;/c&quot;, &quot;py&quot;,&quot;-3&quot;, &quot;C:\\Users\\powerful\\Desktop\\dirsearch-0.4.2\\dirsearch.py&quot;, &quot;-u&quot;, &quot;https://www.baidu.com&quot;, &quot;-e *&quot;&#125;;</code>，大家可以关闭该注释可以启动调试一下，观察下结果。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E6%89%A7%E8%A1%8Cdirsearch%E6%8E%A2%E6%B5%8B.jpg" alt="执行dirsearch探测"></p>
<p>④、我们的执行命令样例都是在Windows环境下执行的，等到练习命令执行注入漏洞时，会进一步讲解在Linux系统下遇见的各种问题。现在先熟悉下这些函数方法吧。</p>
<h3 id="三、java-lang-ProcessBuilder执行命令">三、java.lang.ProcessBuilder执行命令</h3>
<h4 id="1、使用说明-2">1、使用说明</h4>
<p>在上面介绍了java.lang。java.lang.Runtime是其中的一个API。而<code>java.lang.ProcessBuilder</code>也是java.lang中的一个API。该类主要用于创建操作系统进程。具体介绍可查看：<a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html%E3%80%82">https://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html。</a></p>
<p>在<code>java.lang.ProcessBuilder</code>中我们要关注<code>command()</code>方法，可通过该方法设置要执行的命令参数。以及<code>start()</code>方法，简单来说使用该方法可以执行命令。以及</p>
<h5 id="1-1、command-方法">1.1、command()方法</h5>
<p>官方原文介绍：<a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html#command()">https://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html#command()</a></p>
<p><code>command()</code>方法主要用于设置要执行的命令。</p>
<p><code>command()</code>方法传参有两种方式，一种是可变的字符串（简单说就是可以传入普通字符串，或者字符串数组），另一种是字符串列表，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/command%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F.jpg" alt="command两种方式"></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//简易示例代码</span><br><span class="line">ProcessBuilder p <span class="operator">=</span> new ProcessBuilder()<span class="comment">;</span></span><br><span class="line">p.command(<span class="string">&quot;calc&quot;</span>)<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<h5 id="1-2、start-方法">1.2、start()方法</h5>
<p>官方原文介绍：<a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html#start()">https://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html#start()</a></p>
<p>使用<code>start()</code>方法可以创建一个新的具有命令，或环境，或工作目录，或输入来源，或标准输出和标准错误输出的目标，或redirectErrorStream属性的进程。<br>
新进程中调用的命令和参数有<code>command()</code>方法设置，工作目录将由<code>directory()</code>方法设置，进程环境将由<code>environment()</code>设置。</p>
<p>在使用<code>command()</code>方法设置执行命令参数后，然后由<code>start()</code>方法创建一个新的进程进而在系统中执行了我们设置的命令。</p>
<p>这么看来<code>java.lang.ProcessBuilder#start()</code>和<code>Runtime.exec(String[] cmdarray, String[] envp, File dir)</code>有些相似。</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//简易示例代码</span></span><br><span class="line">Process cmd = <span class="keyword">new</span> <span class="constructor">ProcessBuilder(<span class="params">command</span>)</span>.start<span class="literal">()</span>;</span><br></pre></td></tr></table></figure>
<p>​</p>
<h4 id="2、代码示例-2">2、代码示例</h4>
<p>①、在<code>src/main/java</code>目录下新建一个Java Class，名叫<code>ExecProcessBuilder</code>，并键入以下代码，最终如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.Charset;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExecProcessBuilder</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">ProcessBuilder</span> <span class="variable">processBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProcessBuilder</span>();</span><br><span class="line">        <span class="comment">// 在Windows上运行这个命令，cmd， /c 参数是在运行后终止</span></span><br><span class="line">        processBuilder.command(<span class="string">&quot;cmd.exe&quot;</span>, <span class="string">&quot;/c&quot;</span>, <span class="string">&quot;ping www.baidu.com&quot;</span>);</span><br><span class="line">        <span class="comment">// 在Linux上运行</span></span><br><span class="line">        <span class="comment">//processBuilder.command(&quot;bash&quot;, &quot;-c&quot;, &quot;ping  baidu.com&quot;);</span></span><br><span class="line">        <span class="type">Process</span> <span class="variable">process</span> <span class="operator">=</span> processBuilder.start();</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(process.getInputStream(), Charset.forName(<span class="string">&quot;GBK&quot;</span>)));</span><br><span class="line">        String line;</span><br><span class="line">        <span class="keyword">while</span> ((line = bufferedReader.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            System.out.println(line);</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/processbuilder%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%E7%BB%93%E6%9E%9C.jpg" alt="processbuilder执行命令结果"></p>
<p>②、建议大家私下多试一些命令进行调试，天马行空的想法都可以尝试一下，另外在代码中还给出了linux系统下运行的命令方法。</p>
<h3 id="四、java-lang-UNIXProcess-ProcessImpl执行命令">四、java.lang.UNIXProcess/ProcessImpl执行命令</h3>
<h4 id="1、使用说明-3">1、使用说明</h4>
<p>首先对于<code>UNIXProcess</code>和<code>ProcessImpl</code>可以理解本就是一个东西，因为在 JDK9 的时候把<code>UNIXProcess</code>合并到了<code>ProcessImpl</code>当中了。具体可查看：<code>https://hg.openjdk.java.net/jdk-updates/jdk9u/jdk/rev/98eb910c9a97</code>。</p>
<p><code>UNIXProcess</code>和<code>ProcessImpl</code>最终都是调用<code>native</code>执行系统命令的类，这个类提供了一个叫<code>forkAndExec</code>的native方法，如方法名所述主要是通过<code>fork&amp;exec</code>来执行本地系统命令。</p>
<p>UNIXProcess类是*nix系统在 java 程序中的体现，可以使用该类创建新进程，实现与”fork”类似的功能（对于Windows系统，使用的是java.lang.ProcessImpl类）</p>
<p>ProcessImpl 是更为底层的实现，Runtime和ProcessBuilder执行命令实际上也是调用了ProcessImpl这个类。</p>
<p>对于 ProcessImpl 类，我们不能直接调用需要配合使用反射。因为 java.lang.ProcessImpl 代码都被 private 封装起来了。并没有设置公共的 API 接口。</p>
<h4 id="2、代码示例-3">2、代码示例</h4>
<p>①、在<code>src/main/java</code>目录下新建一个Java Class，名叫<code>ExecProcessImpl</code>，并键入以下代码，最终如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.Charset;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExecProcessImpl</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        String[] cmds = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;whoami&quot;</span>&#125;;</span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;java.lang.ProcessImpl&quot;</span>);</span><br><span class="line">        <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> clazz.getDeclaredMethod(<span class="string">&quot;start&quot;</span>, String[].class, Map.class, String.class, ProcessBuilder.Redirect[].class, <span class="type">boolean</span>.class);</span><br><span class="line">        method.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">Process</span> <span class="variable">process</span> <span class="operator">=</span> (Process) method.invoke(<span class="literal">null</span>, cmds, <span class="literal">null</span>, <span class="string">&quot;.&quot;</span>, <span class="literal">null</span>, <span class="literal">true</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(process.getInputStream(), Charset.forName(<span class="string">&quot;GBK&quot;</span>)));</span><br><span class="line">        <span class="keyword">while</span> ((line = bufferedReader.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            System.out.println(line);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/processimpl%E5%8F%8D%E5%B0%84%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4.jpg" alt="processimpl反射执行命令"></p>
<p>②、由于ProcessImpl类不能直接调用，需要配合反射来进行命令执行，因此此部分中的反射知识点可先自行学习。到后面Java反射章节会在进一步讲解。</p>
<h3 id="五、执行命令Java-Web项目">五、执行命令Java Web项目</h3>
<h4 id="1、创建javawebexec工程">1、创建javawebexec工程</h4>
<p>我们创建一个基于SpringBoot的执行系统命令的JavaWeb工程，这回我们从WEB视角调试上面几种方法。</p>
<p>①、双击IDEA启动，点击<code>Create New Project</code>。</p>
<p>②、左侧选择<code>Spring Initializr</code>，内容默认即可，点击Next，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E9%80%89%E6%8B%A9spring%E5%88%9D%E5%A7%8B%E5%8C%96.jpg" alt="选择spring初始化"></p>
<p>③、稍等片刻， Srping Initializr Project Settings页面配置内容将Java Version选择为8,，其他默认即可。如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/spring%E9%85%8D%E7%BD%AE.jpg" alt="spring配置"></p>
<p>④、点击Next，进入依赖项选择页面，我们选择<code>Web -&gt; Spring Web</code>这一个即可，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/web-springweb.jpg" alt="web-springweb"></p>
<p>⑤、起个项目名称为<code>javawebexec</code>，最后点击Finish，稍等片刻进入项目工程。</p>
<p>⑥、在<code>pom.xml</code>中引入servlet依赖，并重载maven，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96%E5%B9%B6%E9%87%8D%E8%BD%BD.jpg" alt="引入依赖并重载"></p>
<h4 id="2、示例代码">2、示例代码</h4>
<p>①、在<code>src/main/java/com/example/demo</code>目录下创建一个名为<code>ExecController</code>的Java Class，并键入以下代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.Charset;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExecController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/execRuntimeString&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">execRuntimeString</span><span class="params">(String command, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Process</span> <span class="variable">process</span> <span class="operator">=</span> Runtime.getRuntime().exec(command);</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(process.getInputStream(), Charset.forName(<span class="string">&quot;GBK&quot;</span>)));</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        <span class="keyword">while</span> ((line = bufferedReader.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">//逐行读取</span></span><br><span class="line">            System.out.println(line);</span><br><span class="line">            out.print(line);</span><br><span class="line">        &#125;</span><br><span class="line">        bufferedReader.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/execRuntimeArray&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">execRuntimeArray</span><span class="params">(String command, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        String[] commandarray =&#123;<span class="string">&quot;cmd&quot;</span>,<span class="string">&quot;/c&quot;</span>,command&#125;;</span><br><span class="line">        <span class="type">Process</span> <span class="variable">process</span> <span class="operator">=</span> Runtime.getRuntime().exec(commandarray);</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(process.getInputStream(), Charset.forName(<span class="string">&quot;GBK&quot;</span>)));</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        <span class="keyword">while</span> ((line = bufferedReader.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">//逐行读取</span></span><br><span class="line">            System.out.println(line);</span><br><span class="line">            out.print(line);</span><br><span class="line">        &#125;</span><br><span class="line">        bufferedReader.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/execcontroller%E6%89%A7%E8%A1%8C%E7%BB%93%E6%9E%9C.jpg" alt="execcontroller执行结果"></p>
<p>②、在这个Controller里面我只写了java.lang.Runtime下执行命令的两种方式。在此留作业，请各位将<code>java.lang.ProcessBuilder</code>和<code>java.lang.ProcessImpl</code>根据上面形式写出对应的Controller，并成功运行。</p>
<p>本节讲述两种 Java 数据库操作的方式，一是比较原生繁琐的 JDBC 方式，二是现在比较简便主流的 Mybatis 方式。</p>
<p>由于 Mybatis 在做数据库操作时更加简便，成为了比较主流之一的方式，值得我们关注学习。</p>
<p>但也需要了解原生的 JDBC 方式，毕竟这是基础，主流的框架也大多由此衍生。</p>
<h2 id="Java-数据库操作">Java 数据库操作</h2>
<h3 id="一、Java数据库操作之-JDBC">一、Java数据库操作之 JDBC</h3>
<h4 id="1、简介-3">1、简介</h4>
<p>Java 数据库连接，（Java Database Connectivity，简称 JDBC）是Java 语言中用来规范客户端程序如何来访问数据库的应用程序接口(位于 jdk 的 java.sql 中)。我们通常说的 JDBC 是面向关系型数据库的，提供了诸如查询、更新、删除、增加数据库中数据的方法。在使用时候需要导入具体的jar包，不同数据库需要导入的jar包不同。</p>
<p>JDBC与MySQL进行连接交互，通常为以下6个流程：</p>
<ul>
<li>1：注册驱动 (仅仅做一次)</li>
<li>2：建立连接(Connection)</li>
<li>3：构建运行 SQL 的语句(Statement)</li>
<li>4：运行语句</li>
<li>5：处理运行结果(ResultSet)</li>
<li>6：释放资源</li>
</ul>
<p>JDBC中常用的API，推荐看这里：<code>https://book.itheima.net/course/1265899443273850881/1272721284588904449/1272772917125455877</code></p>
<h4 id="2、代码示例-4">2、代码示例</h4>
<p>下面通过一个简单的代码示例来理解JDBC链接Mysql，并查询数据的过程。</p>
<p>JDBC 与 Mysql 交互需要在本机安装 Mysql，我选择的是 PHPStudy自带的 Mysql，版本为<code>MySQL 5.7.26</code>，点击启动，即可使用，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/phpstudy%E5%90%AF%E5%8A%A8mysql.jpg" alt="phpstudy启动mysql"></p>
<p>①、首先，需要创建练习所需的数据库，同时创建数据表，以及添加对应的数据，分别执行以下三个部分的代码，最终执行结果如下图所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE jdbcdemo;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">USE jdbcdemo;</span><br><span class="line">CREATE TABLE `user` (</span><br><span class="line">  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT &#x27;唯一ID&#x27;,</span><br><span class="line">  `username` varchar(25) NOT NULL COMMENT &#x27;用户名&#x27;,</span><br><span class="line">  `password` varchar(25) NOT NULL COMMENT &#x27;密码&#x27;,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO user(id,username,password) VALUES (1, &quot;power7089&quot;, &quot;power7089&quot;);</span><br><span class="line">INSERT INTO user(id,username,password) VALUES (2, &quot;root&quot;, &quot;root&quot;);</span><br><span class="line">INSERT INTO user(id,username,password) VALUES (3, &quot;admin&quot;, &quot;admin@123&quot;);</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/jdbc%E6%95%B0%E6%8D%AE%E5%BA%93.jpg" alt="jdbc数据库"></p>
<p>②、下面创建一个项目工程，名为<code>jdbcdemo</code>，打开IDEA，选择<code>Create New Porject</code>。</p>
<p>③、在<code>Spring Initializr Project Settings</code>页面，将<code>Java Version设置为8</code>，其他配置项默认即可，点击Next。</p>
<p>④、在依赖选项界面，我们选择<code>SQL -&gt; JDBC API</code>，<code>SQL -&gt; Mysql Driver   </code>，注意，一共需要勾选两个依赖。如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/jdbc%E9%80%89%E6%8B%A9%E4%BE%9D%E8%B5%96.jpg" alt="jdbc选择依赖"></p>
<p>⑤、点击Next，起个项目名称为<code>jdbcdemo</code>，最后点击Finish。</p>
<p>⑥、在<code>src.main.java.com.example.demo</code>的文件下新建一个名为<code>JdbcDemo</code>的Java Class，并键入以下代码，如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 注册驱动</span></span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="comment">// 获取连接</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/jdbcdemo?useUnicode=true&amp;characterEncoding=utf8&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(url, user, password);</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT * FROM user&quot;</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> stmt.executeQuery(sql);</span><br><span class="line">        <span class="keyword">while</span>(rs.next()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;==================&quot;</span>);</span><br><span class="line">            System.out.println(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">            System.out.println(rs.getString(<span class="string">&quot;username&quot;</span>));</span><br><span class="line">            System.out.println(rs.getString(<span class="string">&quot;password&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 回收资源</span></span><br><span class="line">        rs.close();</span><br><span class="line">        stmt.close();</span><br><span class="line">        conn.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/jdbc%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81.jpg" alt="jdbc示例代码"></p>
<p>⑦、点击运行<code>JdbcDemo</code>类，观察运行响应结果，可以看到正确连接到数据库，并查询回来了所需数据，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E8%BF%90%E8%A1%8Cjdbc%E4%BB%A3%E7%A0%81.jpg" alt="运行jdbc代码"></p>
<p>一个简单的JDBC链接Mysql并查询数据的示例代码。</p>
<h3 id="二、Java数据库操作之Mybatis">二、Java数据库操作之Mybatis</h3>
<h4 id="1、简述-7">1、简述</h4>
<p>MyBatis 是一款优秀的持久层框架，它支持自定义 SQL、存储过程以及高级映射。MyBatis 免除了几乎所有的 JDBC 代码以及设置参数和获取结果集的工作。MyBatis 可以通过简单的 XML 或注解来配置和映射原始类型、接口和 Java POJO（Plain Old Java Objects，普通老式 Java 对象）为数据库中的记录。</p>
<p>Mybatis中文文档：<code>https://mybatis.org/mybatis-3/zh/index.html</code></p>
<h4 id="2、代码示例-5">2、代码示例</h4>
<p>下面，我们通过SpringBoot整合Mybatis，来模拟一个增删改查的场景。</p>
<p>务必按顺序跟着下面每一个步骤进行练习。</p>
<h5 id="2-1、创建项目工程">2.1、创建项目工程</h5>
<p>先创建一个名为<code>mybatis-springboot</code>的工程项目，用于后面编写示例代码。</p>
<p>①、打开IDEA，选择<code>Create New Porject</code>。</p>
<p>②、左侧选择<code>Spring Initializr</code>，配置默认即可，点击Next。</p>
<p>③、在<code>Spring Initializr Project Settings</code>页面，将<code>Java Version设置为8</code>，其他配置项默认即可，点击Next。</p>
<p>④、在依赖选项界面，我们选择<code>web -&gt; Spring Web</code>，<code>SQL -&gt; JDBC API</code>，<code>SQL -&gt; Mybatis Framework </code>，<code>SQL -&gt; Mysql Driver   </code>，注意，一共需要勾选四个依赖。如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E9%85%8D%E7%BD%AE%E9%A1%B5%E9%9D%A2%E9%80%89%E6%8B%A9%E4%BE%9D%E8%B5%96.jpg" alt="配置页面选择依赖"></p>
<p>⑤、点击Next，这一步给项目起个名字，就叫<code>mybatis-springboot</code>吧。其他默认即可。最后点击Finish。</p>
<h5 id="2-2、创建数据库">2.2、创建数据库</h5>
<p>在编写代码之前，我们需要对项目做一些前置工作。</p>
<p>首先需要创建一个数据库并添加一些数据。我使用的是PHPStudy下自带的Mysql，版本为<code>Mysql 5.7.26</code>。</p>
<p>①、启动Mysql后，我使用的是命令行方式进入Mysql。创建一个名为<code>mybatisdemo</code>的数据库，如下图所示：</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> mybatisdemo;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93.jpg" alt="创建数据库"></p>
<p>②、先切换使用<code>mybatisdemo</code>数据库。然后创建<code>user</code>数据表，如下图所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">USE mybatisdemo;</span><br><span class="line">CREATE TABLE `user` (</span><br><span class="line">  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT &#x27;唯一ID&#x27;,</span><br><span class="line">  `username` varchar(25) NOT NULL COMMENT &#x27;用户名&#x27;,</span><br><span class="line">  `password` varchar(25) NOT NULL COMMENT &#x27;密码&#x27;,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%E8%A1%A8.jpg" alt="添加数据表"></p>
<p>③、向<code>info</code>数据表中添加具体数据，如下图所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO user(id,username,password) VALUES (1, &quot;power7089&quot;, &quot;power7089&quot;);</span><br><span class="line">INSERT INTO user(id,username,password) VALUES (2, &quot;root&quot;, &quot;root&quot;);</span><br><span class="line">INSERT INTO user(id,username,password) VALUES (3, &quot;admin&quot;, &quot;admin@123&quot;);</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/user%E8%A1%A8%E4%B8%AD%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE.jpg" alt="info表中添加数据"></p>
<h5 id="2-3、编写代码">2.3、编写代码</h5>
<p>下面我们编写 SpringBoot 整合 Mybatis 实现增删改查的场景。</p>
<p>这个场景案例非常有意义，比较提盒真实的SpringBoot项目。</p>
<p>并且通过示例代码，可以直观的了解到JavaWeb从接口到数据库的请求过程。</p>
<p>①、首先我们针对目录结构进行改动，根据不同作用类创建对应的代码包，在<code>src.main.java.com.example.demo</code>下分别创建<code>controller</code>，<code>service</code>，<code>entity</code>，<code>mapper</code>，<code>service-&gt;impl</code>，以及<code>src.main.resources</code>下创建<code>mapper</code>，最终目录结构如下图所示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">controller：Controller层</span><br><span class="line">service：业务逻辑层</span><br><span class="line">service/impl：service的实现</span><br><span class="line">mapper：数据操作层 DAO</span><br><span class="line">entity：实体类,作用一般是和数据表做映射。</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E6%9C%80%E7%BB%88%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84.jpg" alt="最终项目目录结构"></p>
<p>②、在<code>src.main.java.com.example.demo.entiy</code>包下新建一个Java Class，名为<code>User</code>，这是一个实体类，和数据表做下映射，键入以下代码，最终如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User [id=&quot;</span> + id + <span class="string">&quot;, username=&quot;</span> + username + <span class="string">&quot;, password=&quot;</span> + password + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/user%E5%AE%9E%E4%BD%93%E7%B1%BB.jpg" alt="user实体类"></p>
<p>③、在<code>src.main.java.com.example.demo.mapper</code>文件下新建一个名为<code>UserMapper</code>的Java Interface，键入以下代码，最终如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.demo.entity.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新增用户</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">addUser</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除用户</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">delUser</span><span class="params">(String userName)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改用户</span></span><br><span class="line"><span class="comment">     *<span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">     *<span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">updateUser</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 单个查询</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getUser</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询全部</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getUsers</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/usermapper%E4%BB%A3%E7%A0%81.jpg" alt="usermapper代码"></p>
<p>④、在<code>src.main.resources.mapper</code>文件下新建一个名为<code>UserMapper.xml</code>文件，与dao层的<code>UserMapper</code>做好映射绑定，键入以下代码，最终如下图所示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.example.demo.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 添加用户 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.example.demo.entity.User&quot;</span>&gt;</span></span><br><span class="line">    	insert into user(id, username, password) values(#&#123;id&#125;, #&#123;username&#125;, #&#123;password&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 删除用户 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;delUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;String&quot;</span>&gt;</span></span><br><span class="line">    	delete from user WHERE username = #&#123;username&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 修改用户 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.example.demo.entity.User&quot;</span>&gt;</span></span><br><span class="line">  		update user set username = #&#123;username&#125;, password = #&#123;password&#125;,</span><br><span class="line">  		where id = #&#123;id&#125;</span><br><span class="line">  	<span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 根据主键查询用户 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUser&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.example.demo.entity.User&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">        select * from user where id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 查询全部数据 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUsers&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.example.demo.entity.User&quot;</span>&gt;</span></span><br><span class="line">    	select * from user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/usermapperxml%E6%96%87%E4%BB%B6.jpg" alt="usermapperxml文件"></p>
<p>⑤、在<code>src.main.java.com.example.demo.service</code>文件下新建一个名为<code>UserService</code>的Java interface，键入以下代码，最终如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.demo.entity.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="comment">// 添加数据</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">addUser</span><span class="params">(User user)</span>;</span><br><span class="line">    <span class="comment">// 删除数据</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">delUserByName</span><span class="params">(String userName)</span>;</span><br><span class="line">    <span class="comment">// 修改数据</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">updateUserByUserId</span><span class="params">(User user)</span>;</span><br><span class="line">    <span class="comment">// 根据id查询数据</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getUser</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">    <span class="comment">// 查询全部数据</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getUsers</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/service%E4%BB%A3%E7%A0%81.jpg" alt="service代码"></p>
<p>⑤、在<code>src.main.java.com.example.demo.service.impl</code>文件下新建一个名为<code>UserServiceImpl</code>的Java class，这是UserService实现方法，继承UserService并重写方法。键入以下代码，最终如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.demo.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.example.demo.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.example.demo.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 添加用户</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">addUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> flag;<span class="comment">// 默认值是false</span></span><br><span class="line">        flag = userMapper.addUser(user);</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据id删除用户</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">delUserByName</span><span class="params">(String userName)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> flag;<span class="comment">// 默认值是false</span></span><br><span class="line">        flag = userMapper.delUser(userName);</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改用戶</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">updateUserByUserId</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> flag;<span class="comment">// 默认值是fals</span></span><br><span class="line">        flag = userMapper.updateUser(user);</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据id获取用户</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getUser</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.getUser(id);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询全部数据</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getUsers</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;User&gt; users = userMapper.getUsers();</span><br><span class="line">        <span class="keyword">return</span> users;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/userserviceimpl%E4%BB%A3%E7%A0%811.jpg" alt="userserviceimpl代码1"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/userserviceimpl%E4%BB%A3%E7%A0%812.jpg" alt="userserviceimpl代码2"></p>
<p>⑥、在<code>src.main.java.com.example.demo.controller</code>文件下新建一个名为<code>UserController</code>的Java class，键入以下代码，最终如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.demo.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.example.demo.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService service;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新增用户</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value=&quot;/add&quot;, method=RequestMethod.POST)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">addUser</span><span class="params">(User user)</span>&#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> service.addUser(user);</span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;faile&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除用户</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value=&quot;/del&quot;, method=RequestMethod.POST)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">delUserByName</span><span class="params">(<span class="meta">@RequestParam(&quot;name&quot;)</span> String userName)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> service.delUserByName(userName);</span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;faile&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改用户</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> User</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value=&quot;/updata&quot;, method=RequestMethod.POST)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">updateUserByName</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> service.updateUserByUserId(user);</span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;faile&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 单个查询</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value=&quot;/get/&#123;id&#125;&quot;, method= RequestMethod.GET)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getUser</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="type">int</span> id)</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> service.getUser(id);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询全部</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value=&quot;/getUser/list&quot;, method=RequestMethod.GET)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span> <span class="comment">// @ResponseBody - 返回json字符串</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getUsers</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;User&gt; users = service.getUsers();</span><br><span class="line">        <span class="keyword">return</span> users;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/usercontroller%E4%BB%A3%E7%A0%81.jpg" alt="usercontroller代码"></p>
<p>⑦、在<code>DemoApplication</code>启动类中添加注解<code>@MapperScan()</code>，如下图所示：</p>
<p>@MapperScan 注解：扫描 com.example.demo.dao 下的所有的类作为 Mapper 映射文件</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E6%B7%BB%E5%8A%A0mapperscan%E6%B3%A8%E8%A7%A3.jpg" alt="添加mapperscan注解"></p>
<p>⑧、最后在<code>src.main.resources -&gt; application.properties</code>文件中添加以下配置，如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server.port=<span class="number">7089</span></span><br><span class="line">## 数据源配置</span><br><span class="line">spring.datasource.url=jdbc:mysql:<span class="comment">//localhost:3306/mybatisdemo?useUnicode=true&amp;characterEncoding=utf8</span></span><br><span class="line">## 下面是数据库连接账户密码，设置成自己的</span><br><span class="line">spring.datasource.username=root</span><br><span class="line">spring.datasource.password=rootroot</span><br><span class="line">spring.datasource.driver-class-name=com.mysql.jdbc.Driver</span><br><span class="line"></span><br><span class="line">## Mybatis 配置</span><br><span class="line">## mybatis.typeAliasesPackage 配置为com.example.demo.dao，指向实体类包路径。</span><br><span class="line">mybatis.typeAliasesPackage=com.example.demo.dao</span><br><span class="line">## mybatis.mapperLocations 配置为 classpath 路径下 mapper 包下，* 代表会扫描所有 xml 文件。</span><br><span class="line">mybatis.mapperLocations=classpath:mapper<span class="comment">/*.xml</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/application%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.jpg" alt="application配置文件"></p>
<p>⑨、启动项目，访问我们在<code>UserController</code>中定义的接口，比如：<code>http://127.0.0.1:7089/get/1</code>，<code>http://127.0.0.1:7089/getUser/list</code>，最终响应如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E8%AE%BF%E9%97%AEget%E6%8E%A5%E5%8F%A3.jpg" alt="访问get接口"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/getuser%E6%8E%A5%E5%8F%A3.jpg" alt="getuser接口"></p>
<p>还剩几个接口，大家自行调试下吧。有问题不要怕，迎难而上解决问题。</p>
<p>注意：</p>
<p>在实际项目开发中，每个人的风格不同，实现代码的方式因此也各有千秋。我上面举例的代码仅为最基础，便于理解。在我们以后代码审计中，肯定会遇见各种风格代码，以后遇见再说吧，毕竟以后我们的重心还是在代码审计上面。</p>
<h2 id="Java-反射基础">Java 反射基础</h2>
<h3 id="一、Java反射基础">一、Java反射基础</h3>
<p>其实，在 Java 命令执行和 Java 数据库操作章节，我们就已经简单接触到 Java 反射了。</p>
<p>一是<code>Java命令执行</code>章节中，使用<code>java.lang.ProcessImpl</code>的话需要配合反射机制来执行命令。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;java.lang.ProcessImpl&quot;</span>);</span><br><span class="line"><span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> clazz.getDeclaredMethod(<span class="string">&quot;start&quot;</span>, String[].class, Map.class, String.class, ProcessBuilder.Redirect[].class, <span class="type">boolean</span>.class);</span><br><span class="line">method.setAccessible(<span class="literal">true</span>);</span><br><span class="line"><span class="type">Process</span> <span class="variable">process</span> <span class="operator">=</span> (Process) method.invoke(<span class="literal">null</span>, cmds, <span class="literal">null</span>, <span class="string">&quot;.&quot;</span>, <span class="literal">null</span>, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>
<p>二是<code>Java数据库操作</code>章节中，使用反射机制来注册Mysql驱动。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注册驱动</span></span><br><span class="line">Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>本节我们就学习下Java反射机制的基础知识吧。</p>
<h4 id="1、什么是反射？">1、什么是反射？</h4>
<p>Java 的反射（reflection）机制是指在程序运行中，可以构造任意一个类的对象，可以了解任意一个对象所属的类，可以了解任意一个类的成员变量和方法，可以调用任意一个对象的属性和方法。 这种<strong>动态获取程序信息</strong>以及<strong>动态调用对象的功能</strong>称为 Java语言的反射机制 。</p>
<p>反射机制允许我们在 Java程序运行时检查，操作或者说获取任何类、接口、构造函数、方法和字段。还可以动态创建Java类实例、调用任意的类方法、修改任意的类成员变量值等操作。</p>
<p>在 Java代码审计中学习反射机制，我们目的是可以利用反射机制操作目标方法执行系统命令。比如我们想要反射调用<code>java.lang.runtime</code>去执行系统命令。这个下面会讲到。</p>
<p>下面，通过代码案例来学习反射API，进一步理解反射机制。</p>
<p>推荐一篇文章，关于”java的反射到底是有什么用处？怎么用？“：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>www.zhihu.com<span class="regexp">/question/</span><span class="number">377483107</span></span><br></pre></td></tr></table></figure>
<h4 id="2、创建练习项目工程">2、创建练习项目工程</h4>
<p>老规矩，先创建一个名为<code>reflectdemo</code>的项目工程，用于下面示例代码的练习。</p>
<p>①、打开IDEA，点击<code>Create New Project</code>，创建新的工程。</p>
<p>②、左侧选择Maven，配置默认即可，不选择任何模板，点击Next。</p>
<p>③、起个项目名称为<code>reflectdemo</code>，其他默认即可，点击Finish。</p>
<p>④、在Java目录下创建名为<code>com.exampl.demo</code>的包，并在demo包下再创建一个名为<code>entity</code>的包，最终目录结构如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84.jpg" alt="目录结构"></p>
<p>下面创建个用于练习的类。</p>
<p>①、我们在<code>com.example.demo.entity</code>下创建个<code>User</code>类，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;power7089&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String testStr)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/User%E5%AE%9E%E4%BD%93%E7%B1%BB.jpg" alt="User实体类"></p>
<h4 id="3、获取-Class-对象">3、获取 Class 对象</h4>
<p>获取 Class 对象的方式有下面几种，：</p>
<ul>
<li>根据类名：类名.class</li>
<li>根据对象：对象.getClass()</li>
<li><strong>根据全限定类名：Class.forName(全路径类名)</strong></li>
<li>通过类加载器获得class对象：ClassLoader.getSystemClassLoader().loadClass(“<a target="_blank" rel="noopener" href="http://com.example.xxx">com.example.xxx</a>”);</li>
</ul>
<p>我们在<code>com.example.demo</code>先创建一个名为<code>GetClass</code>的类，用于演示获取User Class对象几种方式，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"><span class="keyword">import</span> com.example.demo.entity.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetClass</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">        <span class="comment">//1.通过类名.class</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">c1</span> <span class="operator">=</span> User.class;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.通过对象的getClass()方法</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        <span class="type">Class</span> <span class="variable">c2</span> <span class="operator">=</span> user.getClass();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.通过 Class.forName()获得Class对象;</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">c3</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.example.demo.entity.User&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.通过类加载器获得class对象</span></span><br><span class="line">        <span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> ClassLoader.getSystemClassLoader();</span><br><span class="line">        <span class="type">Class</span> <span class="variable">c4</span> <span class="operator">=</span> classLoader.loadClass(<span class="string">&quot;com.example.demo.entity.User&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(c1);</span><br><span class="line">        System.out.println(c2);</span><br><span class="line">        System.out.println(c3);</span><br><span class="line">        System.out.println(c4);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/getclass%E7%B1%BB%E4%BB%A3%E7%A0%81.jpg" alt="getclass类代码"></p>
<p>动手操作调试，观察运行结果，并加以思考。</p>
<p>那他们几个有什么需要注意的呢？</p>
<ul>
<li>类名.class：需要导入类的包。</li>
<li>对象.getClass()：初始化对象后，其实不需要再使用反射了。</li>
<li><strong>Class.forName(全路径类名)：需要知道类的完整全路径，这是我们常使用的方法。</strong></li>
<li>通过类加载器获得class对象：ClassLoader.getSystemClassLoader().loadClass(“<a target="_blank" rel="noopener" href="http://com.example.xxx">com.example.xxx</a>”);</li>
</ul>
<p>Class.forName() 获取 class 对象方法是常用的一种方式，下面所有示例代码我们都使用<code>Class.forName()</code>这个方法来获取Class对象。</p>
<p>在获取到目标Class对象后，我们可以做的事就多了，下面我们通过示例代码进一步演示。</p>
<h4 id="4、Java-反射-API">4、Java 反射 API</h4>
<p>Java 提供了一套反射 API，该API由<code>Class</code>类与<code>java.lang.reflect</code>类库组成。</p>
<p>该类库包含了<code>Field</code>、<code>Method</code>、<code>Constructor</code>等类。</p>
<p>java.lang.reflect官方文档：<code>https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/package-summary.html</code></p>
<p>（这部分的官方文档我都是给的 java8 的，大家可以将路径中的数字 8 改为7，9，10等，这几个版本会有不同的地方大家可自行比对学习）</p>
<hr>
<p>:warning:在进行下面练习前，首先我们需要在<code>com.example.demo</code>下新建一个名为<code>reflectdemo</code>的包，并新建一个名为<code>UserInfo</code>的Java Class，并键入一下代码，最终如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.reflectdemo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserInfo</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserInfo</span><span class="params">()</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">UserInfo</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserInfo</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">introduce</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;我叫&quot;</span> + name + <span class="string">&quot;，今年&quot;</span> + age + <span class="string">&quot;岁了！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello！我叫[&quot;</span> + name + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Person&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/userinfo%E7%B1%BB%E4%BB%A3%E7%A0%81.JPG" alt="userinfo类代码"></p>
<h5 id="4-1、java-lang-Class">4.1、java.lang.Class</h5>
<p>用来描述类的内部信息，<code>Class</code>的实例可以获取类的包、注解、修饰符、名称、超类、接口等。</p>
<p>官方文档：<code>https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html</code>。</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>释义</th>
</tr>
</thead>
<tbody>
<tr>
<td>getPackage()</td>
<td>获取该类的包</td>
</tr>
<tr>
<td>getDeclaredAnnotations()</td>
<td>获取该类上所有注解</td>
</tr>
<tr>
<td>getModifiers()</td>
<td>获取该类上的修饰符</td>
</tr>
<tr>
<td>getName()</td>
<td>获取类名称</td>
</tr>
<tr>
<td>getSimpleName()</td>
<td>获取简单类名称</td>
</tr>
<tr>
<td>getGenericSuperclass()</td>
<td>获取直属超类</td>
</tr>
<tr>
<td>getGenericInterfaces()</td>
<td>获取直属实现的接口</td>
</tr>
<tr>
<td>newInstance()</td>
<td>根据构造函数创建一个实例</td>
</tr>
<tr>
<td>更多方法可查看官方文档…</td>
<td></td>
</tr>
</tbody>
</table>
<h6 id="4-1-1、示例代码">4.1.1、示例代码</h6>
<p>①、在创建<code>com.example.demo.reflectdemo</code>下创建一个名为<code>ClassDemo</code>的Java Class，并键入以下代码，最终如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.reflectdemo;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Modifier;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 编号7089</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.example.demo.reflectdemo.UserInfo&quot;</span>);</span><br><span class="line">        <span class="comment">// 获取该类所在包路径</span></span><br><span class="line">        <span class="type">Package</span> <span class="variable">aPackage</span> <span class="operator">=</span> clazz.getPackage();</span><br><span class="line">        System.out.println(<span class="string">&quot;getPackage运行结果：&quot;</span> + aPackage);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取类上的修饰符</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">modifiers</span> <span class="operator">=</span> clazz.getModifiers();</span><br><span class="line">        <span class="type">String</span> <span class="variable">modifier</span> <span class="operator">=</span> Modifier.toString(modifiers);</span><br><span class="line">        System.out.println(<span class="string">&quot;getModifiers运行结果：&quot;</span> + modifier);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取类名称</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> clazz.getName();</span><br><span class="line">        System.out.println(<span class="string">&quot;getName运行结果：&quot;</span> + name);</span><br><span class="line">        <span class="comment">// 获取简单类名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">simpleName</span> <span class="operator">=</span> clazz.getSimpleName();</span><br><span class="line">        System.out.println(<span class="string">&quot;getSimpleName运行结果：&quot;</span> + simpleName);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/classdemo%E4%BB%A3%E7%A0%81.jpg" alt="classdemo代码"></p>
<p>运行结果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/classdemo%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C.jpg" alt="classdemo运行结果"></p>
<h5 id="4-2、获取属性信息">4.2、获取属性信息</h5>
<p>java.lang.reflect.Field 提供了类的属性信息。可以获取属性（字段）上的注解、修饰符、属性类型、属性名等。</p>
<p>官方文档：<code>https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/Field.html</code>。</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>释义</th>
</tr>
</thead>
<tbody>
<tr>
<td>getField(“xxx”)</td>
<td>获取指定名称的<strong>公有字段</strong>（即使用 <code>public</code> 修饰的字段）的声明信息</td>
</tr>
<tr>
<td>getFields()</td>
<td>获取该类以及其父类中<strong>所有的公有字段</strong>的声明信息</td>
</tr>
<tr>
<td>getDeclaredField(“xxx”)</td>
<td>获取指定名称的<strong>任意字段</strong>的声明信息，无论其访问权限是公有的还是私有的。</td>
</tr>
<tr>
<td>getDeclaredFields()</td>
<td>获取该类中<strong>所有声明的字段</strong>的声明信息，包括公有的、受保护的、默认访问权限的和私有的字段，但不包括父类中的字段</td>
</tr>
<tr>
<td>getName()</td>
<td>返回字段的名称。</td>
</tr>
<tr>
<td>getType()</td>
<td>返回字段的类型</td>
</tr>
<tr>
<td>get()</td>
<td>返回指定对象上该字段的值</td>
</tr>
<tr>
<td>set()</td>
<td>将指定对象上的该字段设置为指定的新值</td>
</tr>
<tr>
<td>更多方法可查看官方文档…</td>
<td></td>
</tr>
</tbody>
</table>
<h6 id="4-2-1、示例代码">4.2.1、示例代码</h6>
<p>①、在创建<code>com.example.demo.reflectdemo</code>下创建一个名为<code>FieldDemo</code>的Java Class，并键入以下代码，最终如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.reflectdemo;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Modifier;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FieldDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        Class&lt;?&gt; clazz = Class.forName(<span class="string">&quot;com.example.demo.reflectdemo.UserInfo&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取一个该类或父类中声明为 public 的属性</span></span><br><span class="line">        <span class="type">Field</span> <span class="variable">field1</span> <span class="operator">=</span> clazz.getField(<span class="string">&quot;age&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;getField运行结果：&quot;</span> + field1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取该类及父类中所有声明为 public 的属性</span></span><br><span class="line">        Field[] fieldArray1 = clazz.getFields();</span><br><span class="line">        <span class="keyword">for</span> (Field field : fieldArray1) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;getFields运行结果：&quot;</span> + field);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取一个该类中声明的属性</span></span><br><span class="line">        <span class="type">Field</span> <span class="variable">field2</span> <span class="operator">=</span> clazz.getDeclaredField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;getDeclaredField运行结果：&quot;</span> + field2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取某个属性的修饰符（该示例为获取上面name属性的修饰符）</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">modifier</span> <span class="operator">=</span> Modifier.toString(field2.getModifiers());</span><br><span class="line">        System.out.println(<span class="string">&quot;getModifiers运行结果： &quot;</span> + modifier);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取该类中所有声明的属性</span></span><br><span class="line">        Field[] fieldArray2 = clazz.getDeclaredFields();</span><br><span class="line">        <span class="keyword">for</span> (Field field : fieldArray2) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;getDeclaredFields运行结果：&quot;</span> + field);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/fielddemo%E4%BB%A3%E7%A0%81.jpg" alt="fielddemo代码"></p>
<p>运行结果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/fielddemo%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C.jpg" alt="fielddemo运行结果"></p>
<h5 id="4-3、获取方法信息">4.3、获取方法信息</h5>
<p>java.lang.reflect.Method 提供了类的方法信息。可以获取方法上的注解、修饰符、返回值类型、方法名称、所有参数。</p>
<p>官方文档：<code>https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/Method.html</code>。</p>
<p>一些获取方法的函数（包括 java.lang.class 部分），</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>释义</th>
</tr>
</thead>
<tbody>
<tr>
<td>getDeclaredMethods()</td>
<td>获取所有在该类中声明的方法，无论其访问修饰符是什么。这个方法返回一个包含 <code>Method</code> 对象的数组</td>
</tr>
<tr>
<td>getDeclaredMethod()</td>
<td>获取一个在该类中声明的方法，无论其访问修饰符是什么</td>
</tr>
<tr>
<td>getMethod(“setAge”, String.class)</td>
<td>获取目标类及父类中声明为 public 的方法，需要指定方法的入参类型</td>
</tr>
<tr>
<td>getMethods()</td>
<td>获取该类及父类中所有声明为 public 的方法</td>
</tr>
<tr>
<td>getParameters()</td>
<td>获取所有传参</td>
</tr>
<tr>
<td>更多方法可查看官方文档…</td>
<td></td>
</tr>
</tbody>
</table>
<h6 id="4-3-1、示例代码">4.3.1、示例代码</h6>
<p>①、在创建<code>com.example.demo.reflectdemo</code>下创建一个名为<code>MethodDemo</code>的Java Class，并键入以下代码，最终如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.reflectdemo;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Parameter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MethodDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        Class&lt;?&gt; clazz = Class.forName(<span class="string">&quot;com.example.demo.reflectdemo.UserInfo&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取一个该类及父类中声明为 public 的方法，需要指定方法的入参类型</span></span><br><span class="line">        <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;setName&quot;</span>, String.class);</span><br><span class="line">        System.out.println(<span class="string">&quot;01-getMethod运行结果：&quot;</span> + method);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取所有入参</span></span><br><span class="line">        Parameter[] parameters = method.getParameters();</span><br><span class="line">        <span class="keyword">for</span> (Parameter temp : parameters) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;getParameters运行结果 &quot;</span> + temp);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取该类及父类中所有声明为 public 的方法</span></span><br><span class="line">        Method[] methods = clazz.getMethods();</span><br><span class="line">        <span class="keyword">for</span> (Method temp : methods) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;02-getMethods运行结果：&quot;</span> + temp);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取一个在该类中声明的方法</span></span><br><span class="line">        <span class="type">Method</span> <span class="variable">declaredMethod</span> <span class="operator">=</span> clazz.getDeclaredMethod(<span class="string">&quot;getName&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;03-getDeclaredMethod运行结果：&quot;</span> + declaredMethod);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取所有在该类中声明的方法</span></span><br><span class="line">        Method[] declaredMethods = clazz.getDeclaredMethods();</span><br><span class="line">        <span class="keyword">for</span> (Method temp : declaredMethods) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;04-getDeclaredMethods运行结果：&quot;</span> + temp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/methoddemo%E4%BB%A3%E7%A0%81.jpg" alt="methoddemo代码"></p>
<p>运行结果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/methoddemo%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C.jpg" alt="methoddemo运行结果"></p>
<h5 id="4-4、获取修饰信息">4.4、获取修饰信息</h5>
<p>java.lang.reflect.Modifier 提供了访问修饰符信息。通过<code>Class</code>、<code>Field</code>、<code>Method</code>、<code>Constructor</code>等对象都可以获取修饰符，这个访问修饰符是一个整数，可以通过<code>Modifier.toString</code>方法来查看修饰符描述。并且该类提供了一些静态方法和常量来解码访问修饰符。</p>
<p>官方文档：<code>https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/Modifier.html</code></p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>释义</th>
</tr>
</thead>
<tbody>
<tr>
<td>getModifiers()</td>
<td>获取类的修饰符值</td>
</tr>
<tr>
<td>getDeclaredField(“username”).getModifiers()</td>
<td>获取属性的修饰符值</td>
</tr>
<tr>
<td>更多方法可查看官方文档…</td>
<td></td>
</tr>
</tbody>
</table>
<h6 id="4-4-1、示例代码">4.4.1、示例代码</h6>
<p>①、在创建<code>com.example.demo.reflectdemo</code>下创建一个名为<code>ModifierDemo</code>的Java Class，并键入以下代码，最终如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.reflectdemo;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Modifier;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 编号7089</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ModifierDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        Class&lt;?&gt; clazz = Class.forName(<span class="string">&quot;com.example.demo.reflectdemo.UserInfo&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取类的修饰符值</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">modifiers1</span> <span class="operator">=</span> clazz.getModifiers();</span><br><span class="line">        System.out.println(<span class="string">&quot;获取类的修饰符值getModifiers运行结果：&quot;</span> + modifiers1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取属性的修饰符值</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">modifiers2</span> <span class="operator">=</span> clazz.getDeclaredField(<span class="string">&quot;name&quot;</span>).getModifiers();</span><br><span class="line">        System.out.println(<span class="string">&quot;获取属性的修饰符值getModifiers运行结果：&quot;</span> + modifiers2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取方法的修饰符值</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">modifiers4</span> <span class="operator">=</span> clazz.getDeclaredMethod(<span class="string">&quot;setName&quot;</span>, String.class).getModifiers();</span><br><span class="line">        System.out.println(<span class="string">&quot;获取方法的修饰符值getModifiers运行结果：&quot;</span> + modifiers4);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 根据修饰符值，获取修饰符标志的字符串</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">modifier</span> <span class="operator">=</span> Modifier.toString(modifiers1);</span><br><span class="line">        System.out.println(<span class="string">&quot;获取类的修饰符值的字符串结果：&quot;</span> + modifier);</span><br><span class="line">        System.out.println(<span class="string">&quot;获取属性的修饰符值字符串结果：&quot;</span> + Modifier.toString(modifiers2));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/Modifierdemo%E4%BB%A3%E7%A0%81.jpg" alt="Modifierdemo代码"></p>
<p>运行结果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/Modifierdemo%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C.jpg" alt="Modifierdemo运行结果"></p>
<h5 id="4-5、获取构造函数信息">4.5、获取构造函数信息</h5>
<p>java.lang.reflect.Constructor 提供了类的构造函数信息。可以获取构造函数上的注解信息、参数类型等。</p>
<p>官方文档：<code>https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/Constructor.html</code>。</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>释义</th>
</tr>
</thead>
<tbody>
<tr>
<td>getConstructor()</td>
<td>获取<strong>一个</strong>声明为 public 构造函数实例</td>
</tr>
<tr>
<td>getConstructors()</td>
<td>获取<strong>所有</strong>声明为 public 构造函数实例</td>
</tr>
<tr>
<td>getDeclaredConstructor()</td>
<td>获取<strong>一个</strong>声明的所有修饰符的构造函数实例</td>
</tr>
<tr>
<td>getDeclaredConstructors()</td>
<td>获取<strong>所有</strong>声明的所有修饰符的构造函数实例</td>
</tr>
<tr>
<td>更多方法可查看官方文档…</td>
<td></td>
</tr>
</tbody>
</table>
<h6 id="4-5-1、示例代码">4.5.1、示例代码</h6>
<p>①、在创建<code>com.example.demo.reflectdemo</code>下创建一个名为<code>ConstructorDemo</code>的Java Class，并键入以下代码，最终如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.reflectdemo;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConstructorDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        Class&lt;?&gt; clazz = Class.forName(<span class="string">&quot;com.example.demo.reflectdemo.UserInfo&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取一个声明为 public 构造函数实例</span></span><br><span class="line">        Constructor&lt;?&gt; constructor1 = clazz.getConstructor(String.class,<span class="type">int</span>.class);</span><br><span class="line">        System.out.println(<span class="string">&quot;1-getConstructor运行结果：&quot;</span> + constructor1);</span><br><span class="line">        <span class="comment">// 根据构造函数创建一个实例</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">c1</span> <span class="operator">=</span> constructor1.newInstance(<span class="string">&quot;power7089&quot;</span>,<span class="number">18</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;2-newInstance运行结果： &quot;</span> + c1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取所有声明为 public 构造函数实例</span></span><br><span class="line">        Constructor&lt;?&gt;[] constructorArray1 = clazz.getConstructors();</span><br><span class="line">        <span class="keyword">for</span> (Constructor&lt;?&gt; constructor : constructorArray1) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;3-getConstructors运行结果：&quot;</span> + constructor);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 获取一个声明的构造函数实例</span></span><br><span class="line">        Constructor&lt;?&gt; constructor2 = clazz.getDeclaredConstructor(String.class);</span><br><span class="line">        System.out.println(<span class="string">&quot;4-getDeclaredConstructor运行结果：&quot;</span> + constructor2);</span><br><span class="line">        <span class="comment">// 将构造函数的可访问标志设为 true 后，可以通过私有构造函数创建实例</span></span><br><span class="line">        constructor2.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">o2</span> <span class="operator">=</span> constructor2.newInstance(<span class="string">&quot;Power7089666&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;5-newInstance运行结果：&quot;</span> + o2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取所有声明的构造函数实例</span></span><br><span class="line">        Constructor&lt;?&gt;[] constructorArray2 = clazz.getDeclaredConstructors();</span><br><span class="line">        <span class="keyword">for</span> (Constructor&lt;?&gt; constructor : constructorArray2) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;6-getDeclaredConstructors运行结果：&quot;</span> + constructor);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/ConstructorDemo%E4%BB%A3%E7%A0%81.JPG" alt="ConstructorDemo代码"></p>
<p>运行结果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/ConstructorDemo%E4%BB%A3%E7%A0%81%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C.jpg" alt="ConstructorDemo代码运行结果"></p>
<h5 id="4-6、获取参数信息">4.6、获取参数信息</h5>
<p>java.lang.reflect.Parameter 提供了方法的参数信息。可以获取方法上的注解、参数名称、参数类型等。</p>
<p>官方文档：<code>https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/Parameter.html</code>。</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>释义</th>
</tr>
</thead>
<tbody>
<tr>
<td>getParameters()</td>
<td>获取构造函数/方法的参数</td>
</tr>
<tr>
<td>更多方法可查看官方文档…</td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="4-7、绕过私有限制">4.7、绕过私有限制</h5>
<p>java.lang.reflect.AccessibleObject 是<code>Field</code>、<code>Method</code>和<code>Constructor</code>类的超类。该类提供了对类、方法、构造函数的访问控制检查的能力（如：私有方法只允许当前类访问）。</p>
<p>该<strong>访问检查</strong>在设置/获取属性、调用方法、创建/初始化类的实例时执行。</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>释义</th>
</tr>
</thead>
<tbody>
<tr>
<td>setAccessible()</td>
<td>将可访问标志设为<code>true</code>（默认为<code>false</code>），会关闭访问检查。这样即使是私有的属性、方法或构造函数，也可以访问。</td>
</tr>
</tbody>
</table>
<h6 id="4-7-1、示例代码">4.7.1、示例代码</h6>
<p>可以看<code>ConstructorDemo</code>类代码，涉及到了<code>setAccessible()</code>，如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取一个声明的构造函数实例</span></span><br><span class="line">Constructor&lt;?&gt; constructor2 = clazz.getDeclaredConstructor(String.class);</span><br><span class="line">System.out.println(<span class="string">&quot;4-getDeclaredConstructor运行结果：&quot;</span> + constructor2);</span><br><span class="line"><span class="comment">// 将构造函数的可访问标志设为 true 后，可以通过私有构造函数创建实例</span></span><br><span class="line">constructor2.setAccessible(<span class="literal">true</span>);</span><br><span class="line"><span class="type">Object</span> <span class="variable">o2</span> <span class="operator">=</span> constructor2.newInstance(<span class="string">&quot;Power7089666&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;5-newInstance运行结果：&quot;</span> + o2);</span><br></pre></td></tr></table></figure>
<h4 id="5、常用方法整理">5、常用方法整理</h4>
<h5 id="1、getMethod">1、getMethod()</h5>
<p>getMethod()方法获取的是当前类中所有公共(public)方法。包括从父类里继承来的方法。</p>
<h5 id="2、getDeclaredMethod">2、getDeclaredMethod()</h5>
<p>getDeclaredMethod()系列方法获取的是当前类中“声明”的方法，包括private，protected和public，不包含从父类继承来的方法。</p>
<h5 id="3、getConstructor">3、getConstructor()</h5>
<p>getConstructor()方法获取的是当前类声明为公共(public)构造函数实例。</p>
<h5 id="4、getDeclaredConstructor">4、getDeclaredConstructor()</h5>
<p>getDeclaredConstructor() 方法获取的是当前类声明的构造函数实例，包括private，protected和public。</p>
<h5 id="5、setAccessible">5、setAccessible()</h5>
<p>在获取到私有方法或构造方法后，使用<code>setAccessible(true);</code>，改变其作用域，这样即使是私有的属性，方法，构造函数也都可以访问调用了。</p>
<h5 id="6、newInstance">6、newInstance()</h5>
<p>将获取到的对象实例化。调用的是这个类的无参构造函数，或者有参构造函数需要设定传参。</p>
<p>他和 new 关键字去实例化对象相似，而 newInstance() 是个函数方法，而 new 是个关键字，这是有区别的。</p>
<p>使用 newInstance 不成功的话可能是因为：①、你使用的类没有无参构造函数，②、你使用的类构造函数是私有的。</p>
<p>当然了，调用无参构造函数使用方法是，<strong>Class.newInstance()</strong>。</p>
<p>调用带参数的构造函数，则是通过 <strong>Class</strong> 类获取 <strong>Constructor</strong>，最后调用 <strong>Constructor</strong> 中的 <strong>newInstance(Object … initarges)</strong> 方法，这里面 newInstance 中需要传入所需的参数。</p>
<h5 id="7、invoke">7、invoke()</h5>
<p>调用包装在当前Method对象中的方法。</p>
<p>invoke传参如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/invoke%E4%BC%A0%E5%8F%82.jpg" alt="invoke传参"></p>
<h3 id="二、Java-反射到命令执行">二、Java 反射到命令执行</h3>
<p>学习ava反射机制，其实我们更关心如何利用Java反射实现命令执行。下面举例讲解下Java反射命令执行的几种情况。</p>
<p>:warning: 首先在<code>com.example.demo</code>下新建一个名为<code>codeexec</code>的包。用于命令执行示例代码的编写调试。最终目录如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/codeexec%E5%8C%85.JPG" alt="codeexec包"></p>
<h4 id="1、反射之Java-lang-Runtime">1、反射之Java.lang.Runtime</h4>
<p>下面是两种通过反射java.lang.Runtime来达到命令执行的方式。</p>
<h5 id="1-1、方式一：通过getMethod">1.1、方式一：通过getMethod</h5>
<p>由于java.lang.Runtime类的构造函数是私有的，因此不能直接使用<code>newInstance() </code>创建一个实例。</p>
<p>那为什么这个类的构造函数会是私有的呢？</p>
<p>这涉及到一个“单例模式”的概念。举个例子：我们在链接数据库时只有最开始链接一次，而不是用一次链接一次，如果这样的话，资源消耗太大了。</p>
<p>因此可以将类的构造函数设为私有，再通过静态方法来获取。</p>
<p>由于 java.lang.Runtime 使用了单例模式，我们可以通过 Runtime.getRuntime() 来获取 Runtime 对象。</p>
<p>先看一段代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Class&lt;?&gt; clazz = Class.forName(<span class="string">&quot;java.lang.Runtime&quot;</span>);</span><br><span class="line"><span class="type">Method</span> <span class="variable">execMethod</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;exec&quot;</span>, String.class);</span><br><span class="line"><span class="type">Method</span> <span class="variable">getRuntimeMethod</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;getRuntime&quot;</span>);</span><br><span class="line"><span class="type">Object</span> <span class="variable">runtime</span> <span class="operator">=</span> getRuntimeMethod.invoke(<span class="literal">null</span>);</span><br><span class="line">execMethod.invoke(runtime, <span class="string">&quot;calc.exe&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>简单解读：</p>
<p>首先通过 Class.forName 获取 java.lang.Runtime。</p>
<p>接下来通过 getMethod() 方法获 exec 方法，在 java 命令执行章节中我们了解到，<code>exec()</code>方法有六种调用方式(重载)，我们选择最简单的 String 方式，则 getMethod 方法我们设定的入参方式为<code>String.class</code>。</p>
<p>然后获取 getRuntime 方法后，使用 invoke 执行方法。</p>
<p>最后在通过 invoke 方法调用 runtime 对象执行命令。</p>
<p>将上述代码可以简化如下，简化前后有什么区别？大家可自行调试一下，观察不同。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Class&lt;?&gt; clazz = Class.forName(<span class="string">&quot;java.lang.Runtime&quot;</span>);</span><br><span class="line">clazz.getMethod(<span class="string">&quot;exec&quot;</span>,String.class).invoke(clazz.getMethod(<span class="string">&quot;getRuntime&quot;</span>).invoke(clazz),<span class="string">&quot;calc.exe&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>①、在<code>com.example.demo.codeexec</code>下新建以及各名为<code>RuntimeGetMethod</code>的Java Class，并键入以上代码，最终如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/RuntimeGetMethod.jpg" alt="RuntimeGetMethod"></p>
<p>上述两种方式代码，自行调试运行观察结果。</p>
<h5 id="1-2、方式二：通过-getDeclaredConstructor">1.2、方式二：通过 getDeclaredConstructor</h5>
<p>如果方法或构造函数是私有的，我们可以使用<code>getDeclaredMethod</code>或<code>getDeclaredConstructor</code>来获取执行。</p>
<p>在这里，java.lang.Runtime 的构造函数为私有的，因此我们可以使用 getDeclaredConstructor方法获取java.lang.Runtime并执行。</p>
<p>先看一段代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Class&lt;?&gt; clazz = Class.forName(<span class="string">&quot;java.lang.Runtime&quot;</span>);</span><br><span class="line"><span class="type">Constructor</span> <span class="variable">m</span> <span class="operator">=</span> clazz.getDeclaredConstructor();</span><br><span class="line">m.setAccessible(<span class="literal">true</span>);</span><br><span class="line"><span class="type">Method</span> <span class="variable">c1</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;exec&quot;</span>, String.class);</span><br><span class="line">c1.invoke(m.newInstance(), <span class="string">&quot;calc.exe&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>简单解读：</p>
<p>首先通过Class.forName获取java.lang.Runtime。</p>
<p>接下来通过getDeclaredConstructor获取构造函数。</p>
<p>通过<code>setAccessible(true)</code>设置改变作用域，让我们可以调用他的私有构造函数。</p>
<p>调用exec方法，入参设置为<code>String.class</code>。</p>
<p>最后使用Invoke执行方法。</p>
<p>①、在<code>com.example.demo.codeexec</code>下新建以及各名为<code>RuntimeGetDeclaredConstructor</code>的Java Class，并键入以上代码，最终如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/RuntimeGetDeclaredConstructor%E4%BB%A3%E7%A0%81.jpg" alt="RuntimeGetDeclaredConstructor代码"></p>
<p>自行调试运行观察结果。</p>
<h4 id="2、反射之java-lang-ProcessBuilder">2、反射之java.lang.ProcessBuilder</h4>
<p>如果一个类没有无参构造方法，也没有类似单例模式里的静态方法，我们可以通过<code>getConstructor()</code>方法实例化该类。当然也可以使用<code>getDeclaredConstructor()</code>方法。</p>
<p>java.lang.ProcessBuilder 有两个构造函数，构造函数也是支持重载的。如下图所示：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">ProcessBuilder</span><span class="params">(List&lt;String&gt; command)</span></span></span><br><span class="line"><span class="function"><span class="title">ProcessBuilder</span><span class="params">(String... command)</span></span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/%E4%B8%A4%E4%B8%AA%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0.jpg" alt="两个构造函数"></p>
<p>在Java命令执行章节，我们了解到java.lang.ProcessBuilder使用start()方法执行命令。</p>
<p>我们以<code>ProcessBuilder(List&lt;String&gt; command)</code>为例。进行讲解。</p>
<p>①、在<code>com.example.demo.codeexec</code>下新建以及各名为<code>ProcessBuilderGetConstructor</code>的Java Class，并键入以下代码，最终如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.codeexec;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProcessBuilderGetConstructor</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        Class&lt;?&gt; clazz = Class.forName(<span class="string">&quot;java.lang.ProcessBuilder&quot;</span>);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">object</span> <span class="operator">=</span> clazz.getConstructor(List.class).newInstance(Arrays.asList(<span class="string">&quot;calc.exe&quot;</span>));</span><br><span class="line">        clazz.getMethod(<span class="string">&quot;start&quot;</span>).invoke(object,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img2/ProcessBuilderGetConstructor%E4%BB%A3%E7%A0%81.jpg" alt="ProcessBuilderGetConstructor代码"></p>
<p>写法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;java.lang.ProcessBuilder&quot;</span>);</span><br><span class="line">((ProcessBuilder)</span><br><span class="line">clazz.getConstructor(List.class).newInstance(Arrays.asList(<span class="string">&quot;calc.exe&quot;</span>))).star</span><br><span class="line"><span class="title function_">t</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;java.lang.ProcessBuilder&quot;</span>);</span><br><span class="line">clazz.getMethod(<span class="string">&quot;start&quot;</span>).invoke(clazz.getConstructor(List.class).newInstance(</span><br><span class="line">Arrays.asList(<span class="string">&quot;calc.exe&quot;</span>)));</span><br></pre></td></tr></table></figure>
<p>大家自行运行观察分析结果。</p>
<p><strong>:warning:注意：</strong></p>
<p>在开头我们介绍引入的是反射调用 java.lang.ProcessImpl，代码如下。留个作业，大家自行调试。</p>
<p>反射这节基础还是比较重要的，希望大家能够积极练习，并记录笔记提交到对应的作业处。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;java.lang.ProcessImpl&quot;</span>);</span><br><span class="line"><span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> clazz.getDeclaredMethod(<span class="string">&quot;start&quot;</span>, String[].class, Map.class, String.class, ProcessBuilder.Redirect[].class, <span class="type">boolean</span>.class);</span><br><span class="line">method.setAccessible(<span class="literal">true</span>);</span><br><span class="line"><span class="type">Process</span> <span class="variable">process</span> <span class="operator">=</span> (Process) method.invoke(<span class="literal">null</span>, cmds, <span class="literal">null</span>, <span class="string">&quot;.&quot;</span>, <span class="literal">null</span>, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>
<p>至此，Java反射机制知识点到这就结束了。</p>
<p>本章节提到了一些特殊场景以及解决方法。</p>
<p>当然在实际中，我们会遇见各种情况，加以分析，再配合掌握的这些函数方法后，可以更好的解决应对。</p>
<h2 id="Java-序列化与反序列化基础">Java 序列化与反序列化基础</h2>
<p>反序列化漏洞在 Java 代码审计中是非常重要的基础之一。对于基础薄弱的朋友一定要好好学习，刚开始学也不必过多纠结，只需要记住反序列化的方法就好，后面跟着实战一点点领悟其中的奥妙。</p>
<h3 id="一、序列化与反序列化">一、序列化与反序列化</h3>
<p>在了解反序列化之前，一定要先明白序列化。</p>
<p>通过下面一张图，先简单理解序列化与反序列化的关系。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96.jpg" alt="序列化与反序列化"></p>
<h4 id="1-1、什么是序列化">1.1、什么是序列化</h4>
<p>序列化是指把 Java 对象转换为字节序列的过程，目的是便于保存在内存、文件、数据库中。</p>
<p><code>ObjectOutputStream</code>类的<code>writeObject() </code>方法可以实现序列化。</p>
<p>writeObject()方法：将指定的对象写入 ObjectOutputStream 中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">writeObject</span><span class="params">(Object obj)</span></span><br><span class="line">                       <span class="keyword">throws</span> IOException</span><br></pre></td></tr></table></figure>
<p>官方文档详细说明：<code>https://docs.oracle.com/javase/8/docs/api/java/io/ObjectOutputStream.html#writeObject-java.lang.Object-</code></p>
<p>一个类的对象要想序列化成功，必须满足两个条件：</p>
<ul>
<li>该类必须实现 java.io.Serializable 接口。</li>
<li>该类的所有属性必须是可序列化的。如果有一个属性不是可序列化的，则该属性必须注明是短暂的。</li>
</ul>
<h4 id="1-2、什么是反序列化">1.2、什么是反序列化</h4>
<p>反序列化是指把字节序列恢复为 Java 对象的过程。</p>
<p><code>ObjectInputStream </code>类的<code>readObject()</code>方法可实现反序列化。</p>
<p>readObject()方法：从ObjectInputStream读取一个对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> Object <span class="title function_">readObject</span><span class="params">()</span></span><br><span class="line">                        <span class="keyword">throws</span> IOException,</span><br><span class="line">                               ClassNotFoundException</span><br></pre></td></tr></table></figure>
<p>官方文档详细说明：<code>https://docs.oracle.com/javase/8/docs/api/java/io/ObjectInputStream.html#readObject--</code></p>
<h4 id="1-3、用途">1.3、用途</h4>
<blockquote>
<p>此部分引用自：<a target="_blank" rel="noopener" href="https://xz.aliyun.com/t/12667">https://xz.aliyun.com/t/12667</a></p>
<p>1、当两个进程进行远程通信时，可以相互发送各种类型的数据，包括文本、图片、音频、视频等， 而这些数据都会以二进制序列的形式在网络上传送。那么当两个 Java 进程进行通信时，能否实现进程间的对象传送呢？答案是可以的。如何做到呢？这就需要Java序列化与反序列化了。换句话说，一方面，发送方需要把这个 Java 对象转换为字节序列，然后在网络上传送；另一方面，接收方需要从字节序列中恢复出 Java 对象。</p>
<p>2、所以 Java 序列化一是实现了数据的持久化，通过序列化可以把数据永久地保存到硬盘上（通常存放在文件里），二是，利用序列化实现远程通信，即在网络上传送对象的字节序列。</p>
<p>① 、想把内存中的对象保存到一个文件中或者数据库中时候；<br>
② 、想用套接字在网络上传送对象的时候；<br>
③ 、想通过RMI传输对象的时候</p>
<p>一些应用场景，涉及到将对象转化成二进制，序列化保证了能够成功读取到保存的对象。</p>
</blockquote>
<h4 id="1-4、示例代码">1.4、示例代码</h4>
<p>老规矩，先新建一个名为<code>serdemo</code>的项目工程，用于下面示例代码的练习。</p>
<p>①、打开IDEA，点击<code>Create New Project</code>，创建新的工程。如果打开IDEA后进入之前项目，则需在左上角点击<code>File —&gt; New -&gt; Porject...</code>即可。</p>
<p>②、左侧选择Maven，配置默认即可，不用选择任何模板，点击Next。</p>
<p>③、起个项目名称为<code>serdemo</code>，其他默认即可，点击Finish。</p>
<p>④、最终目录结构如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84.jpg" alt="目录结构"></p>
<h5 id="1-3-1、代码-Demo-1">1.3.1、代码 Demo - 1</h5>
<p>①、在java目录下创建一个名为<code>HackInfo</code>的Java Class，并键入以下代码，最终如下图所示：</p>
<p><strong>前面提到，一个类的对象要想序列化成功，必须满足两个条件：</strong></p>
<p>①、该类必须显式实现<code>java.io.Serializable</code>接口，以标记其对象是可序列化的。</p>
<p>②、类的所有属性必须是可序列化的。如果有任何属性不是可序列化的，必须将其声明为<code>transient</code>，这样在序列化过程中，这些属性将被忽略，不会被序列化到输出流中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HackInfo</span> <span class="keyword">implements</span> <span class="title class_">java</span>.io.Serializable&#123;</span><br><span class="line">        <span class="keyword">public</span> String id;</span><br><span class="line">        <span class="keyword">public</span> String team;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/hackinfo%E4%BB%A3%E7%A0%81.jpg" alt="序列化代码"></p>
<p>②、在java目录下创建一个名为<code>SerializeDemo</code>的Java Class，并键入以下代码，最终如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SerializeDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String [] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">HackInfo</span> <span class="variable">hack</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HackInfo</span>();</span><br><span class="line">        hack.id = <span class="string">&quot;Power7089&quot;</span>;</span><br><span class="line">        hack.team = <span class="string">&quot;闪石星曜CyberSecurity&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//将序列化后的字节序列写到serializedata.txt文件中</span></span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fileOut</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;C:\\Users\\powerful\\Desktop\\serializedata.txt&quot;</span>);</span><br><span class="line">        <span class="type">ObjectOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(fileOut);</span><br><span class="line">        out.writeObject(hack);</span><br><span class="line">        out.close();</span><br><span class="line">        fileOut.close();</span><br><span class="line">        System.out.println(<span class="string">&quot;序列化的数据已经保存在了serializedata.txt文件中&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E5%BA%8F%E5%88%97%E5%8C%96%E4%BB%A3%E7%A0%81.jpg" alt="序列化代码"></p>
<p>③、我们可以使用Notepad++打开<code>serializedata.txt</code>文件，使用Hex-Editor插件以二进制形式查看数据，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E5%BA%8F%E5%88%97%E5%8C%96txt%E6%96%87%E4%BB%B6.jpg" alt="序列化txt文件"></p>
<p>注意：序列化的数据会有明显的特征，都是以<code>aced 0005 7372</code>开头的。</p>
<p>④、下面们通过反序列化操作，将字节序列还原成对象。在java目录下创建一个名为<code>DeserializeDemo</code>的Java Class，并键入以下代码，最终如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 编号7089</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeserializeDemo</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException &#123;</span><br><span class="line"></span><br><span class="line">       <span class="type">HackInfo</span> <span class="variable">hack</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">       <span class="type">FileInputStream</span> <span class="variable">fileIn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;C:\\Users\\powerful\\Desktop\\serializedata.txt&quot;</span>);</span><br><span class="line">       <span class="type">ObjectInputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(fileIn);</span><br><span class="line">       hack = (HackInfo) in.readObject();</span><br><span class="line">       in.close();</span><br><span class="line">       fileIn.close();</span><br><span class="line"></span><br><span class="line">       System.out.println(<span class="string">&quot;Deserialized Employee...&quot;</span>);</span><br><span class="line">       System.out.println(<span class="string">&quot;Name: &quot;</span> + hack.id);</span><br><span class="line">       System.out.println(<span class="string">&quot;Address: &quot;</span> + hack.team);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/DeserializeDemo%E4%BB%A3%E7%A0%81%E5%8F%8A%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C.jpg" alt="DeserializeDemo"></p>
<p>先从一个简简单单的代码例子理解序列化与反序列化，大家一定要动手调试一下。</p>
<h5 id="1-3-2、代码-Demo-2">1.3.2、代码 Demo - 2</h5>
<h6 id="1-3-2-1、transient-关键字">1.3.2.1、transient 关键字</h6>
<p>在 Java 中，<code>transient</code> 是一个关键字，用于修饰实例变量。当一个对象被序列化时，<code>transient</code> 修饰的变量的值不会被保存。这个关键字的作用是告诉 JVM 忽略被修饰变量的序列化，使得在反序列化时这些变量的值为其默认值。</p>
<p>一些情况下，你可能不想将某些字段序列化，例如临时计算的值或者不需要持久化的敏感信息，这时你可以使用 <code>transient</code> 关键字来标记这些字段。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">transient</span> <span class="type">int</span> sensitiveData; <span class="comment">// 这个字段不会被序列化</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="1-3-2-2、序列化-ID">1.3.2.2、序列化 ID</h6>
<p>序列化 ID 是一个与序列化相关的特殊标识符，它在序列化对象时被用来验证发送方和接收方是否加载了与序列化对象兼容的类。当你序列化一个对象时，Java会根据对象的类自动生成一个序列化 ID，这个ID用来标识类的版本信息。在反序列化时，JVM会使用这个序列化 ID 来检查序列化对象和当前加载的类是否兼容。</p>
<p>如果类的结构发生了改变（比如新增了字段、修改了字段类型等），序列化 ID 将会发生变化，如果接收方的类与发送方的类不兼容，反序列化就会失败，抛出 <code>InvalidClassException</code> 异常。</p>
<p>你也可以显式地指定序列化 ID，通过给类添加 <code>serialVersionUID</code> 字段。这样做可以确保即使类的结构发生了变化，序列化 ID 也保持不变，避免了反序列化失败。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">123456789L</span>;</span><br></pre></td></tr></table></figure>
<p>当然了，如果没有显示的定义序列化 ID，Java 会根据类的结构自动生成一个序列化 ID。在序列化和反序列化过程中，JVM 会根据序列化数据中记录的序列化 ID 与当前加载的类的序列化 ID 进行比较。即使没有显式设置 <code>serialVersionUID</code>，JVM 仍然会进行校验，确保序列化数据和当前加载的类的版本是兼容的。</p>
<h6 id="1-3-2-3、案例代码">1.3.2.3、案例代码</h6>
<p>在下面这个代码案例中，设置了 transient 关键字和序列化 ID。</p>
<p>HackInfo2 代码，用于被序列化的代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HackInfo2</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> -<span class="number">8619751142754444841L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String id;</span><br><span class="line">    <span class="keyword">public</span> String team;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">transient</span> String password; <span class="comment">// 不需要序列化的字段</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>SerializeDemo2 代码，用于序列化对象的代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SerializeDemo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String [] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">HackInfo2</span> <span class="variable">hack2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HackInfo2</span>();</span><br><span class="line">        hack2.id = <span class="string">&quot;Power7089&quot;</span>;</span><br><span class="line">        hack2.team = <span class="string">&quot;闪石星曜CyberSecurity&quot;</span>;</span><br><span class="line">        hack2.password = <span class="string">&quot;6666&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//将序列化后的字节序列写到serializedata.txt文件中</span></span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fileOut</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;C:\\Users\\power\\Desktop\\serializedata.txt&quot;</span>);</span><br><span class="line">        <span class="type">ObjectOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(fileOut);</span><br><span class="line">        System.out.println(out);</span><br><span class="line">        out.writeObject(hack2);</span><br><span class="line">        out.close();</span><br><span class="line">        fileOut.close();</span><br><span class="line">        System.out.println(<span class="string">&quot;序列化的数据已经保存在了serializedata.txt文件中&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>DeserializeDemo2 代码，用于反序列化的代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeserializeDemo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException &#123;</span><br><span class="line">        <span class="type">HackInfo2</span> <span class="variable">hack2</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fileIn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;C:\\Users\\power\\Desktop\\serializedata.txt&quot;</span>);</span><br><span class="line">        <span class="type">ObjectInputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(fileIn);</span><br><span class="line">        hack2 = (HackInfo2) in.readObject();</span><br><span class="line">        in.close();</span><br><span class="line">        fileIn.close();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;反序列化恢复字节序列为对象...&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Name: &quot;</span> + hack2.id);</span><br><span class="line">        System.out.println(<span class="string">&quot;Address: &quot;</span> + hack2.team);</span><br><span class="line">        System.out.println(<span class="string">&quot;password: &quot;</span> + hack2.password);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="1-3-3、代码-Demo-3">1.3.3、代码 Demo - 3</h5>
<h6 id="1-3-3-1、反序列化漏洞简述">1.3.3.1、反序列化漏洞简述</h6>
<p>在 Java 中有这么一种情况，我们都知道如果一个类实现了 <code>Serializable</code> 接口，那么它的对象可以被序列化和反序列化。</p>
<p>但如果类中定义了 <code>private void readObject(ObjectInputStream ois)</code> 方法，在反序列化过程中，这个方法会在默认的反序列化机制执行之前被调用，允许你在对象反序列化时执行一些自定义的逻辑。</p>
<p>如果你在你的类中重写了 <code>readObject</code> 方法，那么在反序列化这个类的对象时，JVM 会调用你重写的 <code>readObject</code> 方法而不是默认的反序列化机制。这样可以让你在反序列化过程中自定义对象的初始化或者执行其他逻辑。</p>
<p>但如果你想要执行完重写的 readObject 反序列化动作后，还想继续使用原反序列化操作，那就需要使用到<code>defaultReadObject</code>方法，不然执行完自定义的动作后就停止了。也就是说我们重写的 readObject 执行顺序在默认反序列化操作之前。</p>
<p>既然，我们可以在要序列化的类中重写 readObject，这也就意味着给了我们一个攻击的入口，可以实现在服务器上运行代码的，执行命令等能力。</p>
<p>当然了，不会有人这么去写代码。下面我们先了解下重写  readObject 的方式，具体反序列化漏洞，我们在后面阶段配合案例再进一步理解。</p>
<p>反序列化漏洞两个基础条件：</p>
<ul>
<li>实现了<code>java.io.Serializable</code>接口。</li>
<li>重写了 readObject 方法。</li>
</ul>
<h6 id="1-3-3-2、漏洞代码">1.3.3.2、漏洞代码</h6>
<p>HackInfo3代码，用于被序列化的代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HackInfo3</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> -<span class="number">8619751142754444841L</span>;</span><br><span class="line">    <span class="keyword">public</span> String id;</span><br><span class="line">    <span class="keyword">public</span> String team;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">readObject</span><span class="params">(ObjectInputStream in)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException &#123;</span><br><span class="line">        <span class="comment">//in.defaultReadObject();</span></span><br><span class="line"></span><br><span class="line">        Runtime.getRuntime().exec(<span class="string">&quot;calc.exe&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>SerializeDemo3 代码，用于序列化对象的代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SerializeDemo3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String [] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">HackInfo3</span> <span class="variable">hack3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HackInfo3</span>();</span><br><span class="line">        hack3.id = <span class="string">&quot;Power7089&quot;</span>;</span><br><span class="line">        hack3.team = <span class="string">&quot;闪石星曜CyberSecurity&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//将序列化后的字节序列写到serializedata.txt文件中</span></span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fileOut</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;C:\\Users\\power\\Desktop\\serializedata.txt&quot;</span>);</span><br><span class="line">        <span class="type">ObjectOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(fileOut);</span><br><span class="line">        System.out.println(out);</span><br><span class="line">        out.writeObject(hack3);</span><br><span class="line">        out.close();</span><br><span class="line">        fileOut.close();</span><br><span class="line">        System.out.println(<span class="string">&quot;序列化的数据已经保存在了serializedata.txt文件中&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>DeserializeDemo3 代码，用于反序列化的代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeserializeDemo3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException &#123;</span><br><span class="line">        <span class="type">HackInfo3</span> <span class="variable">hack3</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fileIn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;C:\\Users\\power\\Desktop\\serializedata.txt&quot;</span>);</span><br><span class="line">        <span class="type">ObjectInputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(fileIn);</span><br><span class="line">        hack3 = (HackInfo3) in.readObject();</span><br><span class="line">        in.close();</span><br><span class="line">        fileIn.close();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;反序列化恢复字节序列为对象...&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Name: &quot;</span> + hack3.id);</span><br><span class="line">        System.out.println(<span class="string">&quot;Address: &quot;</span> + hack3.team);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="RMI-基础">RMI 基础</h2>
<h3 id="1-1、什么是-RMI">1.1、什么是 RMI</h3>
<p>RMI 是 Java 中的一种技术，全称为远程方法调用（Remote Method Invocation）。它的作用是允许你在不同的 Java 虚拟机（JVM）之间进行通信，就像在同一个 JVM 中调用方法一样，调用远程方法。这些虚拟机可以在不同的主机上、也可以在同一个主机上。</p>
<p>RMI 是 Java 的一组拥护开发分布式应用程序的 API。RMI 使用 Java 语言接口定义了远程对象，它集合了 Java 序列化和 Java远程方法协议(Java Remote Method Protocol)。</p>
<p>简单地说，原先的程序仅能在同一操作系统的方法调用，通过 RMI 可以变成在不同操作系统之间对程序中方法的调用。</p>
<p>RMI 依赖的通信协议是  JRMP。JRMP： Java 远程方法协议（Java Remote Method Protocol，<em>JRMP</em>），是特定于 Java 技术的通信协议，主要是用于查找和引用远程对象的协议。</p>
<p>RMI 对象是通过序列化方式进行传输的。</p>
<p>Java RMI 的出现可以是客户端运行的程序调用远程服务器上的方法，对于调用的这个过程，我们只需关注对象方法的本身，而不用在关注网络协议的各种问题。</p>
<p>有这么一段描述，讲述了 RMI 的一种使用场景，便于大家去理解。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://paper.seebug.org/1012/">https://paper.seebug.org/1012/</a></p>
<p>假设A公司是某个行业的翘楚，开发了一系列行业上领先的软件。B公司想利用A公司的行业优势进行一些数据上的交换和处理。但A公司不可能把其全部软件都部署到B公司，也不能给B公司全部数据的访问权限。于是A公司在现有的软件结构体系不变的前提下开发了一些RMI方法。B公司调用A公司的RMI方法来实现对A公司数据的访问和操作，而所有数据和权限都在A公司的控制范围内，不用担心B公司窃取其数据或者商业机密。</p>
<p>对于开发者来说，远程方法调用就像我们本地调用一个对象的方法一样，他们很多时候不需要关心内部如何实现，只关心传递相应的参数并获取结果就行了。但是对于攻击者来说，要执行攻击还是需要了解一些细节的。</p>
</blockquote>
<h3 id="1-2、RMI-中的三个角色">1.2、RMI 中的三个角色</h3>
<p>RMI中涉及到三个角色，它们分别为服务端（Server），注册中心（Registry）和客户端（Client），下面是他们的作用。</p>
<p>服务端（Server）：负责将远程对象绑定至注册中心。</p>
<p>注册中心（Registry）：服务端会将远程对象绑定至此。客户端会向注册中心查询绑定的远程对象。</p>
<p>客户端（Client）：与注册中心和服务端交互。</p>
<p>插入一张来自互联网的图片，直观展示了他们的关系。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/rmi%E5%85%B3%E7%B3%BB%E5%9B%BE.jpg" alt="rmi关系图"></p>
<p>存根/桩(Stub)：客户端侧的代理，每个远程对象都包含一个代理对象stub，当运行在本地 Java 虚拟机上的程序调用运行在远程 Java 虚拟机上的对象方法时，它首先在本地创建该对象的代理对象 stub, 然后调用代理对象上匹配的方法。</p>
<p>骨架(Skeleton)：服务端侧的代理，用于读取 stub 传递的方法参数，调用服务器方的实际对象方法， 并接收方法执行后的返回值。</p>
<p>:warning:注意：在低版本的 JDK 中，Server 与 Registry 是可以不在一台服务器上的，而在高版本的 JDK 中，Server 与 Registry 只能在一台服务器上，否则无法注册成功。比如 Jdk8u121 这个分界线。</p>
<h4 id="1-2-1、存根和骨架">1.2.1、存根和骨架</h4>
<blockquote>
<p>存根和骨架是远程对象实现中的重要组成部分。当您在远程对象上调用方法（可能位于不同的主机上）时，实际上是在调用一些本地代码，它充当该对象的代理。这就是存根。（称其为存根是因为它类似于对象的截断占位符。）而骨架则是另一个代理，它与真实对象一起存在于其原始主机上。它接收来自存根的远程方法调用，并将其传递给对象。</p>
<p>创建存根和骨架后，您无需直接操作它们；它们对您是隐藏的（可以说是藏在壁橱里）。您可以通过运行rmic（RMI编译器）实用程序来为您的远程对象创建存根和骨架。在通常编译Java源文件后，作为第二步，您需要对远程对象类运行rmic。这一过程非常简单；我们将在下面的示例中向您展示具体操作方法。</p>
<p><a target="_blank" rel="noopener" href="https://www.oreilly.com/library/view/learning-java/1565927184/ch11s04.html">https://www.oreilly.com/library/view/learning-java/1565927184/ch11s04.html</a></p>
</blockquote>
<h3 id="1-3、示例代码1">1.3、示例代码1</h3>
<p>老规矩，先创建一个名为<code>rmidemo</code>的工程文件。并在java目录下创建三个包，分别名为<code>method</code>，<code>rmiclient</code>，<code>rmiserver</code>。最终目录结构如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/rmidemo%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84.jpg" alt="rmidemo项目目录结构"></p>
<p>RMI 代码编写步骤如下：</p>
<ol>
<li>创建远程接口及声明远程方法（SayHello.java）</li>
<li>实现远程接口及远程方法（继承UnicastRemoteObject）(SayHelloImpl.java)</li>
<li>启动 RMI 注册服务，并注册远程对象（RmiServer.java）</li>
<li>客户端查找远程对象，并调用远程方法（RmiClient.java）</li>
<li>执行程序：启动服务端RmiServer；运行客户端RmiClient进行调用</li>
</ol>
<p>我们对上面流程进行拆解，编写对应的代码。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E8%AF%B7%E6%B1%82%E6%B5%81%E7%A8%8B%E5%9B%BE.png" alt="rmi关系图"></p>
<h4 id="①、创建远程接口及声明远程方法">①、创建远程接口及声明远程方法</h4>
<p>一定要先创建声明一个远程方法，才能用于后续的远程方法调用。在这里我们以经典的Hello World为例。远程方法中的接口均要继承<code>Remote</code>，实际上<code>Remote</code>类中没有任何代码，继承也仅是为了说明该是接口使用于远程方法。</p>
<p>在<code>src.main.java.method</code>目录下新建一个名为<code>SayHello</code>的Java Interface，并键入以下代码，最终如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> method;</span><br><span class="line"><span class="keyword">import</span> java.rmi.Remote;</span><br><span class="line"><span class="keyword">import</span> java.rmi.RemoteException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SayHello</span> <span class="keyword">extends</span> <span class="title class_">Remote</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayhello</span><span class="params">(String name)</span> <span class="keyword">throws</span> RemoteException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/sayhello%E4%BB%A3%E7%A0%81.jpg" alt="rmi远程接口方法代码"></p>
<h4 id="②、实现远程接口及远程方法">②、实现远程接口及远程方法</h4>
<p>此步骤编写远程方法中具体实现代码。需要注意的是，它必须继承<code>UnicastRemoteObject</code>类，表明其可以作为远程对象，并可以被注册到注册中心，最终可以让客户端远程调用。</p>
<p>在<code>src.main.java.method</code>目录下新建一个名为<code>SayHelloImpl</code>的Java Class，并键入以下代码，最终如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> method;</span><br><span class="line"><span class="keyword">import</span> java.rmi.RemoteException;</span><br><span class="line"><span class="keyword">import</span> java.rmi.server.UnicastRemoteObject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SayHelloImpl</span> <span class="keyword">extends</span> <span class="title class_">UnicastRemoteObject</span> <span class="keyword">implements</span> <span class="title class_">SayHello</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SayHelloImpl</span><span class="params">()</span> <span class="keyword">throws</span> RemoteException &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayhello</span><span class="params">(String name)</span> <span class="keyword">throws</span> RemoteException &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello,i am &quot;</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/sayhelloimpl%E4%BB%A3%E7%A0%81.jpg" alt="sayhellimpl代码"></p>
<h4 id="③、启动RMI注册服务，并注册远程对象">③、启动RMI注册服务，并注册远程对象</h4>
<p>这个步骤我们是编写RMI服务端代码，需要将上面编写的远程方法注册到注册中心去。</p>
<p>在<code>src.main.java.rmiserver</code>目录下新建一个名为<code>RmiServer</code>的Java Class，并键入以下代码，最终如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> rmiserver;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> method.SayHello;</span><br><span class="line"><span class="keyword">import</span> method.SayHelloImpl;</span><br><span class="line"><span class="keyword">import</span> java.rmi.RemoteException;</span><br><span class="line"><span class="keyword">import</span> java.rmi.registry.LocateRegistry;</span><br><span class="line"><span class="keyword">import</span> java.rmi.registry.Registry;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RmiServer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> RemoteException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;远程方法创建等待调用ing......&quot;</span>);</span><br><span class="line">        <span class="comment">//创建远程对象</span></span><br><span class="line">        <span class="type">SayHello</span> <span class="variable">sayhello</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SayHelloImpl</span>();</span><br><span class="line">        <span class="comment">//创建注册表</span></span><br><span class="line">        <span class="type">Registry</span> <span class="variable">registry</span> <span class="operator">=</span> LocateRegistry.createRegistry(<span class="number">1099</span>);</span><br><span class="line">        <span class="comment">//将远程对象注册到注册表里面，并且取名为sayhello</span></span><br><span class="line">        registry.rebind(<span class="string">&quot;sayhello&quot;</span>,sayhello);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/rmiserver%E4%BB%A3%E7%A0%81.jpg" alt="rmiserver代码"></p>
<h4 id="④、客户端查找远程对象，并调用远程方法">④、客户端查找远程对象，并调用远程方法</h4>
<p>这个步骤我们是编写RMI客户端代码，主要是获取到注册中心代理，查询具体注册的远程方法并调用。</p>
<p>在<code>src.main.java.rmiclient</code>目录下新建一个名为<code>RmiClient</code>的Java Class，并键入以下代码，最终如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> rmiclient;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> method.SayHello;</span><br><span class="line"><span class="keyword">import</span> java.rmi.NotBoundException;</span><br><span class="line"><span class="keyword">import</span> java.rmi.RemoteException;</span><br><span class="line"><span class="keyword">import</span> java.rmi.registry.LocateRegistry;</span><br><span class="line"><span class="keyword">import</span> java.rmi.registry.Registry;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 编号7089</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RmiClient</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> RemoteException, NotBoundException &#123;</span><br><span class="line">        <span class="comment">//获取到注册中心的代理</span></span><br><span class="line">        <span class="type">Registry</span> <span class="variable">registry</span> <span class="operator">=</span> LocateRegistry.getRegistry(<span class="string">&quot;localhost&quot;</span>, <span class="number">1099</span>);</span><br><span class="line">        <span class="comment">//利用注册中心的代理去查询远程注册表中名为sayhello的对象</span></span><br><span class="line">        <span class="type">SayHello</span> <span class="variable">sayhello</span> <span class="operator">=</span> (SayHello) registry.lookup(<span class="string">&quot;sayhello&quot;</span>);</span><br><span class="line">        <span class="comment">//调用远程方法</span></span><br><span class="line">        System.out.println(sayhello.sayhello(<span class="string">&quot;POWER7089&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/rmiclient%E4%BB%A3%E7%A0%81.jpg" alt="rmiclient代码"></p>
<h4 id="⑤、执行程序">⑤、执行程序</h4>
<p>这个步骤我们运行程序观察结果。</p>
<p>首先，启动服务端RmiServer，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E5%90%AF%E5%8A%A8rmiserver.jpg" alt="启动rmiserver"></p>
<p>最后，启动客户端RmiClient，如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E5%90%AF%E5%8A%A8rmiclient.jpg" alt="启动rmiclient"></p>
<p>大家动手调试下吧。</p>
<h3 id="1-4、示例代码2">1.4、示例代码2</h3>
<p>Calculator 声明远程接口，如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.rmi.Remote;</span><br><span class="line"><span class="keyword">import</span> java.rmi.RemoteException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Calculator</span> <span class="keyword">extends</span> <span class="title class_">Remote</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> <span class="keyword">throws</span> RemoteException;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Calculator 接口的具体实现方法 - CalculatorImpl，实现了一个基础的加法计算的方法，如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.rmi.RemoteException;</span><br><span class="line"><span class="keyword">import</span> java.rmi.server.UnicastRemoteObject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CalculatorImpl</span> <span class="keyword">extends</span> <span class="title class_">UnicastRemoteObject</span> <span class="keyword">implements</span> <span class="title class_">Calculator</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CalculatorImpl</span><span class="params">()</span> <span class="keyword">throws</span> RemoteException &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> <span class="keyword">throws</span> RemoteException &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>RmiServerCalc，RMI 服务器，注册远程对象，如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> method.Calculator;</span><br><span class="line"><span class="keyword">import</span> method.CalculatorImpl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.rmi.registry.LocateRegistry;</span><br><span class="line"><span class="keyword">import</span> java.rmi.registry.Registry;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RmiServerCalc</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 创建远程对象实例</span></span><br><span class="line">            <span class="type">Calculator</span> <span class="variable">calculator</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CalculatorImpl</span>();</span><br><span class="line">            <span class="comment">// 将远程对象注册到RMI注册表中</span></span><br><span class="line">            <span class="type">Registry</span> <span class="variable">registry</span> <span class="operator">=</span> LocateRegistry.createRegistry(<span class="number">1099</span>);</span><br><span class="line">            registry.rebind(<span class="string">&quot;CalculatorService&quot;</span>, calculator);</span><br><span class="line">            System.out.println(<span class="string">&quot;Calculator 服务已就绪.&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>RmiClientCalc，客户端访问远程对象，调用相关方法，如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> method.Calculator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.rmi.registry.LocateRegistry;</span><br><span class="line"><span class="keyword">import</span> java.rmi.registry.Registry;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RmiClientCalc</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 查找远程对象</span></span><br><span class="line">            <span class="type">Registry</span> <span class="variable">registry</span> <span class="operator">=</span> LocateRegistry.getRegistry(<span class="string">&quot;localhost&quot;</span>, <span class="number">1099</span>);</span><br><span class="line">            <span class="type">Calculator</span> <span class="variable">calculator</span> <span class="operator">=</span> (Calculator) registry.lookup(<span class="string">&quot;CalculatorService&quot;</span>);</span><br><span class="line">            <span class="comment">// 调用远程方法</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> calculator.add(<span class="number">5</span>, <span class="number">3</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;5 + 3 = &quot;</span> + result);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>拓展阅读：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>paper.seebug.org<span class="regexp">/1091/</span></span><br><span class="line">https:<span class="regexp">//y</span>4er.com<span class="regexp">/posts/</span>java-rmi/</span><br><span class="line">https:<span class="regexp">//g</span>oodapple.top<span class="regexp">/archives/</span><span class="number">321</span></span><br><span class="line">https:<span class="regexp">//</span>paper.seebug.org<span class="regexp">/1251/</span></span><br><span class="line">https:<span class="regexp">//</span>www.oreilly.com<span class="regexp">/library/</span>view<span class="regexp">/learning-java/</span><span class="number">1565927184</span>/ch11s04.html</span><br></pre></td></tr></table></figure>
<h2 id="JNDI-基础">JNDI 基础</h2>
<h3 id="一、JNDI-介绍">一、JNDI 介绍</h3>
<h4 id="1、什么是-JNDI">1、什么是 JNDI</h4>
<p>JNDI（Java Naming and Directory Interface，Java命名和目录接口）是一个Java API，允许 Java 应用程序与命名和目录服务进行交互。这些服务可以是本地的，也可以是分布式的，可以基于各种协议，如LDAP（轻量级目录访问协议）、DNS（域名系统）、NIS（网络信息服务）等。</p>
<p>JNDI 的主要目的是为了统一不同命名和目录服务的访问方式，使得Java应用程序能够以一种统一的方式来访问这些服务，而不必关心底层的实现细节。通过 JNDI，开发人员可以编写与特定命名服务提供者无关的代码，从而实现应用程序的可移植性和灵活性。</p>
<p>JNDI 可以访问的目录及服务，比如：DNS、LDAP、CORBA对象服务、RMI等等。</p>
<p>简单理解：在前面一节我们学到了 RMI，比如 RMI 对外提供了服务，那么 JNDI 可以通过相关 API 链接处理这些服务。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/jndi%E7%BB%93%E6%9E%84.png" alt="jndi结构"></p>
<h5 id="1-1、命名服务-Naming-Service">1.1、命名服务 Naming Service</h5>
<p>命名服务提供了将名称与对象关联映射的机制。在 Java 中，这些对象通常是网络资源、Java对象、文件、服务等。命名服务允许开发人员使用简单的名称来访问这些对象，而不需要知道其底层的物理位置或其他详细信息。例如，一个Web应用程序可能需要连接到一个数据库，而不需要知道数据库的确切位置。通过命名服务，开发人员可以为数据库分配一个简单的名称，并在需要时通过该名称访问它。</p>
<h5 id="1-2、目录服务-Directory-Service">1.2、目录服务 Directory Service</h5>
<p>目录服务扩展了命名服务的概念，提供了一种更加结构化和查询友好的方式来组织和管理对象。目录服务通常被用来存储和检索关于用户、组织、网络资源等信息的数据。与命名服务类似，目录服务也使用名称来引用对象，但它们提供了更丰富的查询功能，使得可以根据各种属性进行搜索和过滤。</p>
<p>2、JNDI 的五个包</p>
<p>在 JNDI 中提供了五个作用不同的包。</p>
<ul>
<li>javax.naming</li>
<li>javax.naming.directory</li>
<li>javax.naming.ldap</li>
<li>javax.naming.event</li>
<li>javax.naming.spi</li>
</ul>
<p>2.1、javax.naming</p>
<p>它包含了命名服务的类和接口。比如其中定义了Context接口，可以用于查找、绑定/解除绑定、重命名对象以及创建和销毁子上下文等操作。这个也是我们比较关注的一个包。</p>
<ul>
<li>查找</li>
</ul>
<p>最常用的操作是<code>lookup()</code>。你向lookup()提供你想要查找的对象的名称，它返回与该名称绑定的对象。</p>
<ul>
<li>绑定</li>
</ul>
<p><code>listBindings()</code>返回一个名字到对象的绑定的枚举。绑定是一个元组，包含绑定对象的名称、对象的类的名称和对象本身。</p>
<ul>
<li>列表</li>
</ul>
<p><code>list()</code>与<code>listBindings()</code>类似，只是它返回一个包含对象名称和对象类名称的名称枚举。<code>list()</code>对于诸如浏览器等想要发现上下文中绑定的对象的信息但又不需要所有实际对象的应用程序来说非常有用。</p>
<ul>
<li>引用</li>
</ul>
<p>在一个实际的名称服务中，有些对象可能无法直接存储在系统内，这时它们便以引用的形式进行存储。</p>
<h5 id="2-1-1、InitialContext类">2.1.1、InitialContext类</h5>
<p>构造方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">InitialContext() </span><br><span class="line"><span class="comment">//构建一个初始上下文。  </span></span><br><span class="line">InitialContext(<span class="type">boolean</span> lazy) </span><br><span class="line"><span class="comment">//构造一个初始上下文，并选择不初始化它。  </span></span><br><span class="line">InitialContext(Hashtable&lt;?,?&gt; environment) </span><br><span class="line"><span class="comment">//使用提供的环境构建初始上下文。</span></span><br></pre></td></tr></table></figure>
<p>常用方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bind(Name name, Object obj) <span class="comment">//将名称绑定到对象。 </span></span><br><span class="line">list(String name) <span class="comment">//枚举在命名上下文中绑定的名称以及绑定到它们的对象的类名。</span></span><br><span class="line">lookup(String name) <span class="comment">//检索命名对象。 </span></span><br><span class="line">rebind(String name, Object obj) <span class="comment">//将名称绑定到对象，覆盖任何现有绑定。 </span></span><br><span class="line">unbind(String name) <span class="comment">//取消绑定命名对象。</span></span><br></pre></td></tr></table></figure>
<h5 id="2-1-2、Reference类">2.1.2、Reference类</h5>
<p>构造方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Reference(String className) </span><br><span class="line">    <span class="comment">//为类名为“className”的对象构造一个新的引用。  </span></span><br><span class="line">Reference(String className, RefAddr addr) </span><br><span class="line">    <span class="comment">//为类名为“className”的对象和地址构造一个新引用。  </span></span><br><span class="line">Reference(String className, RefAddr addr, String factory, String factoryLocation) </span><br><span class="line">    <span class="comment">//为类名为“className”的对象，对象工厂的类名和位置以及对象的地址构造一个新引用。  </span></span><br><span class="line">Reference(String className, String factory, String factoryLocation) </span><br><span class="line">    <span class="comment">//为类名为“className”的对象以及对象工厂的类名和位置构造一个新引用。</span></span><br></pre></td></tr></table></figure>
<p>常用方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> posn, RefAddr addr)</span> </span><br><span class="line">    <span class="comment">//将地址添加到索引posn的地址列表中。  </span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">add</span><span class="params">(RefAddr addr)</span> </span><br><span class="line">    <span class="comment">//将地址添加到地址列表的末尾。  </span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span> </span><br><span class="line">    <span class="comment">//从此引用中删除所有地址。  </span></span><br><span class="line">RefAddr <span class="title function_">get</span><span class="params">(<span class="type">int</span> posn)</span> </span><br><span class="line">    <span class="comment">//检索索引posn上的地址。  </span></span><br><span class="line">RefAddr <span class="title function_">get</span><span class="params">(String addrType)</span> </span><br><span class="line">    <span class="comment">//检索地址类型为“addrType”的第一个地址。  </span></span><br><span class="line">Enumeration&lt;RefAddr&gt; <span class="title function_">getAll</span><span class="params">()</span> </span><br><span class="line">    <span class="comment">//检索本参考文献中地址的列举。  </span></span><br><span class="line">String <span class="title function_">getClassName</span><span class="params">()</span> </span><br><span class="line">    <span class="comment">//检索引用引用的对象的类名。  </span></span><br><span class="line">String <span class="title function_">getFactoryClassLocation</span><span class="params">()</span> </span><br><span class="line">    <span class="comment">//检索此引用引用的对象的工厂位置。  </span></span><br><span class="line">String <span class="title function_">getFactoryClassName</span><span class="params">()</span> </span><br><span class="line">    <span class="comment">//检索此引用引用对象的工厂的类名。    </span></span><br><span class="line">Object <span class="title function_">remove</span><span class="params">(<span class="type">int</span> posn)</span> </span><br><span class="line">    <span class="comment">//从地址列表中删除索引posn上的地址。  </span></span><br><span class="line"><span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> </span><br><span class="line">    <span class="comment">//检索此引用中的地址数。  </span></span><br><span class="line">String <span class="title function_">toString</span><span class="params">()</span> </span><br><span class="line">    生成此引用的字符串表示形式。</span><br></pre></td></tr></table></figure>
<p>官方详细介绍：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>docs.oracle.com<span class="regexp">/javase/</span>tutorial<span class="regexp">/jndi/</span>overview/naming.html</span><br></pre></td></tr></table></figure>
<h5 id="2-2、javax-naming-directory">2.2、javax.naming.directory</h5>
<p>继承了 javax.naming，提供了除命名服务外访问目录服务的功能。</p>
<p>官方详细介绍：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>docs.oracle.com<span class="regexp">/javase/</span>tutorial<span class="regexp">/jndi/</span>overview/dir.html</span><br></pre></td></tr></table></figure>
<h5 id="2-3、javax-naming-ldap">2.3、javax.naming.ldap</h5>
<p>继承了 javax.naming，提供了访问 LDAP 的能力。</p>
<p>官方详细介绍：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>docs.oracle.com<span class="regexp">/javase/</span>tutorial<span class="regexp">/jndi/</span>overview/dir.html</span><br></pre></td></tr></table></figure>
<h5 id="2-4、javax-naming-event">2.4、javax.naming.event</h5>
<p>包含了用于支持命名和目录服务中的事件通知的类和接口。</p>
<p>官方详细介绍：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>docs.oracle.com<span class="regexp">/javase/</span>tutorial<span class="regexp">/jndi/</span>overview/event.html</span><br></pre></td></tr></table></figure>
<h5 id="2-5、javax-naming-spi">2.5、javax.naming.spi</h5>
<p>允许动态插入不同实现，为不同命名目录服务供应商的开发人员提供开发和实现的途径，以便应用程序通过 JNDI 可以访问相关服务。</p>
<p>官方详细介绍：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>docs.oracle.com<span class="regexp">/javase/</span>tutorial<span class="regexp">/jndi/</span>overview/event.html</span><br></pre></td></tr></table></figure>
<blockquote>
<p>推荐拓展学习：</p>
<p><a target="_blank" rel="noopener" href="https://www.docs4dev.com/docs/zh/java/java8/tutorials/jndi-overview-index.html">https://www.docs4dev.com/docs/zh/java/java8/tutorials/jndi-overview-index.html</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/tutorial/jndi/overview/index.html">https://docs.oracle.com/javase/tutorial/jndi/overview/index.html</a></p>
</blockquote>
<h3 id="二、JNDI-操作-RMI">二、JNDI 操作 RMI</h3>
<h4 id="1、创建工程">1、创建工程</h4>
<p>我们在RMI基础的代码中进行一些修改。</p>
<p>打开rmidemo项目，在<code>src.main.java</code>下新建一个名为<code>jndi</code>的目录，并在该目录下分别新建两个名为<code>JndiClient</code>，<code>JndiServer</code>的Java Class。如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/%E6%96%B0%E5%BB%BAjndi.jpg" alt="新建jndi"></p>
<h4 id="2、JndiServer-代码">2、JndiServer 代码</h4>
<p>在<code>JndiServer</code>中键入以下代码，最终如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> jndi;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> method.SayHelloImpl;</span><br><span class="line"><span class="keyword">import</span> javax.naming.InitialContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JndiServer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">InitialContext</span> <span class="variable">initialContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InitialContext</span>();</span><br><span class="line">        initialContext.rebind(<span class="string">&quot;rmi://127.0.0.1:1099/sayhello&quot;</span>,<span class="keyword">new</span> <span class="title class_">SayHelloImpl</span>());</span><br><span class="line">        System.out.println(<span class="string">&quot;启动成功...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/jndiserver.jpg" alt="jndiserver"></p>
<h4 id="3、JndiClient-代码">3、JndiClient 代码</h4>
<p>在<code>JndiClient</code>中键入以下代码，最终如下图所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> jndi;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> method.SayHello;</span><br><span class="line"><span class="keyword">import</span> javax.naming.InitialContext;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JndiClient</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">InitialContext</span> <span class="variable">initialContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InitialContext</span>();</span><br><span class="line">        <span class="type">SayHello</span> <span class="variable">sayHello</span> <span class="operator">=</span> (SayHello)initialContext.lookup(<span class="string">&quot;rmi://127.0.0.1:1099/sayhello&quot;</span>);</span><br><span class="line">        System.out.println(sayHello.sayhello(<span class="string">&quot;Power7089&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/img/study/java/one/img/jndiclient.png" alt="jndiclient"></p>
<h4 id="4、运行项目">4、运行项目</h4>
<p>①、先启动<code>RmiServer</code>。</p>
<p>②、再启动<code>JndiServer</code>。</p>
<p>③、最后启动<code>JndiClient</code>。</p>
<p>观察运行结果。</p>
<h3 id="三、JNDI-操作-DNS">三、JNDI 操作 DNS</h3>
<p>使用 JNDI 向 DNS 服务查询某域名 IP 地址。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.naming.*;</span><br><span class="line"><span class="keyword">import</span> javax.naming.directory.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Hashtable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JNDIDNSLookup</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 设置JNDI属性</span></span><br><span class="line">            Hashtable&lt;String, String&gt; env = <span class="keyword">new</span> <span class="title class_">Hashtable</span>&lt;&gt;();</span><br><span class="line">            env.put(Context.INITIAL_CONTEXT_FACTORY, <span class="string">&quot;com.sun.jndi.dns.DnsContextFactory&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// DNS服务器地址</span></span><br><span class="line">            env.put(Context.PROVIDER_URL, <span class="string">&quot;dns://114.114.114.114&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 创建JNDI上下文对象</span></span><br><span class="line">            <span class="type">DirContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InitialDirContext</span>(env);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 要查找的DNS名称</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">dnsName</span> <span class="operator">=</span> <span class="string">&quot;github.com&quot;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 获取DNS记录的属性集合，只获取IPv4地址（A记录）</span></span><br><span class="line">            <span class="type">Attributes</span> <span class="variable">res</span> <span class="operator">=</span> ctx.getAttributes(dnsName, <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;A&quot;</span>&#125;);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 获取IPv4地址属性</span></span><br><span class="line">            <span class="type">Attribute</span> <span class="variable">attr</span> <span class="operator">=</span> res.get(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (attr != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="comment">// 遍历并输出所有IPv4地址</span></span><br><span class="line">                NamingEnumeration&lt;?&gt; ips = attr.getAll();</span><br><span class="line">                <span class="keyword">while</span> (ips.hasMore()) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;IPv4 Address for &quot;</span> + dnsName + <span class="string">&quot;: &quot;</span> + ips.next());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;No IPv4 Address found for &quot;</span> + dnsName);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 关闭上下文</span></span><br><span class="line">            ctx.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NamingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>JAVA代码审计一</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://nonevector.top/posts/22.html">https://nonevector.top/posts/22.html</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>作者</h><div class="post-copyright-cc-info"><h>NoneVector</h></div></div><div class="post-copyright-c"><h>发布于</h><div class="post-copyright-cc-info"><h>2024-06-26</h></div></div><div class="post-copyright-u"><h>更新于</h><div class="post-copyright-cc-info"><h>2024-06-26</h></div></div><div class="post-copyright-c"><h>许可协议</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JAVA/"><div class="tags-punctuation"><svg class="faa-tada icon" style="height:1.1em;width:1.1em;fill:currentColor;position:relative;top:2px;margin-right:3px" aria-hidden="true"><use xlink:href="#icon-sekuaibiaoqian"></use></svg></div>JAVA</a></div></div><link rel="stylesheet" href="/css/coin.css" media="defer" onload="this.media='all'"/><div class="post-reward"><button class="tip-button reward-button"><span class="tip-button__text">投喂作者</span><div class="coin-wrapper"><div class="coin"><div class="coin__middle"></div><div class="coin__back"></div><div class="coin__front"></div></div></div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://nonevector.top/assets/ganyu_happy.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://nonevector.top/assets/ganyu_happy.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://nonevector.top/assets/kelee.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://nonevector.top/assets/kelee.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></button></div><audio id="coinAudio" src="https://npm.elemecdn.com/akilar-candyassets@1.0.36/audio/aowu.m4a"></audio><script defer="defer" src="/js/coin.js"></script><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/posts/21.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/anmi/Pixiv/62608184_p0.jpg" onerror="onerror=null;src='/assets/r2.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">快速武器新系统</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><svg class="meta_icon" style="width:22px;height:22px;position:relative;top:5px"><use xlink:href="#icon-mulu1"></use></svg><span style="font-weight:bold">目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E6%8F%90"><span class="toc-text">前提</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Java-%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E4%B8%80%E8%AF%BE%E9%80%9A"><span class="toc-text">Java 基础语法一课通</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-text">一 基础知识</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA"><span class="toc-text">1 项目搭建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Java-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">2 Java 关键字</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-text">3 修饰符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">4 数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#4-1-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span class="toc-text">4.1 基础概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-2-%E4%BB%A3%E7%A0%81%E6%A1%88%E4%BE%8B"><span class="toc-text">4.2 代码案例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E5%8F%98%E9%87%8F"><span class="toc-text">5 变量</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#5-1-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span class="toc-text">5.1 基础概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-2-%E4%BB%A3%E7%A0%81%E6%A1%88%E4%BE%8B"><span class="toc-text">5.2 代码案例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E5%9F%BA%E6%9C%AC%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">6 基本运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#6-1-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span class="toc-text">6.1 基础概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-%E4%BB%A3%E7%A0%81%E6%A1%88%E4%BE%8B"><span class="toc-text">6.2 代码案例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E9%A1%BA%E5%BA%8F%E7%BB%93%E6%9E%84"><span class="toc-text">7 顺序结构</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-1-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span class="toc-text">7.1 基础概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-2-%E4%BB%A3%E7%A0%81%E6%A1%88%E4%BE%8B"><span class="toc-text">7.2 代码案例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E9%80%89%E6%8B%A9%E7%BB%93%E6%9E%84"><span class="toc-text">8 选择结构</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#8-1-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span class="toc-text">8.1 基础概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-2-%E4%BB%A3%E7%A0%81%E6%A1%88%E4%BE%8B"><span class="toc-text">8.2 代码案例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-%E5%BE%AA%E7%8E%AF%E7%BB%93%E6%9E%84"><span class="toc-text">9 循环结构</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#9-1-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span class="toc-text">9.1 基础概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-2-%E4%BB%A3%E7%A0%81%E6%A1%88%E4%BE%8B"><span class="toc-text">9.2 代码案例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-%E6%95%B0%E7%BB%84"><span class="toc-text">10 数组</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#10-1-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span class="toc-text">10.1 基础概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-2-%E4%BB%A3%E7%A0%81%E6%A1%88%E4%BE%8B"><span class="toc-text">10.2 代码案例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-%E5%87%BD%E6%95%B0%E6%96%B9%E6%B3%95"><span class="toc-text">11 函数方法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#12-Java-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-text">12 Java 异常处理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1"><span class="toc-text">二 面向对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%B1%BB"><span class="toc-text">1 类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%AF%B9%E8%B1%A1"><span class="toc-text">2 对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E7%BB%A7%E6%89%BF"><span class="toc-text">3 继承</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%B0%81%E8%A3%85"><span class="toc-text">4 封装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-text">5 构造函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#5-1-%E7%BB%A7%E6%89%BF%E4%B8%AD%E7%9A%84%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-text">5.1 继承中的构造函数</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E5%87%BD%E6%95%B0%E6%96%B9%E6%B3%95%E9%87%8D%E8%BD%BD"><span class="toc-text">6 函数方法重载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84%E9%87%8D%E8%BD%BD"><span class="toc-text">7 构造函数中的重载</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89-%E4%B8%80%E4%BA%9B%E5%85%B6%E4%BB%96%E7%9F%A5%E8%AF%86"><span class="toc-text">三 一些其他知识</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-HashMap"><span class="toc-text">1 HashMap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-StringBuilder"><span class="toc-text">2 StringBuilder</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-StringBuffer"><span class="toc-text">3 StringBuffer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-IO-%E6%B5%81"><span class="toc-text">4 IO 流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-Object"><span class="toc-text">5 Object</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Servlet-%E4%BB%A5%E5%8F%8A%E8%BF%87%E6%BB%A4%E5%99%A8%E3%80%81%E7%9B%91%E5%90%AC%E5%99%A8%E5%92%8C%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-text">Servlet 以及过滤器、监听器和拦截器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Servlet"><span class="toc-text">Servlet</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AFServlet"><span class="toc-text">1.1、什么是Servlet</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2%E3%80%81Servlet-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">1.2、Servlet 生命周期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3%E3%80%81%E4%BD%A0%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AAServlet"><span class="toc-text">1.3、你的第一个Servlet</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-1%E3%80%81%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-text">1.3.1、创建项目</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-2%E3%80%81%E9%85%8D%E7%BD%AE-Tomcat-%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-text">1.3.2、配置 Tomcat 服务器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-3%E3%80%81%E7%BC%96%E5%86%99Servlet%E5%B9%B6%E8%BF%90%E8%A1%8C"><span class="toc-text">1.3.3、编写Servlet并运行</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E8%BF%87%E6%BB%A4%E5%99%A8%E3%80%81%E7%9B%91%E5%90%AC%E5%99%A8%E5%92%8C%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-text">二、过滤器、监听器和拦截器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1%E3%80%81%E8%BF%87%E6%BB%A4%E5%99%A8%E4%BB%A3%E7%A0%81"><span class="toc-text">2.1、过滤器代码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSP-%E5%9F%BA%E7%A1%80"><span class="toc-text">JSP 基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF-JSP"><span class="toc-text">一、什么是 JSP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81JSP-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-text">二、JSP 基础知识</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81JSP%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C"><span class="toc-text">三、JSP程序运行</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1%E3%80%81%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-text">2.1、创建项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2%E3%80%81%E4%BB%A3%E7%A0%81-Demo"><span class="toc-text">2.2、代码 Demo</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81JSP-%E6%9C%A8%E9%A9%AC"><span class="toc-text">四、JSP 木马</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81JSP-%E5%A4%A7%E9%A9%AC"><span class="toc-text">1、JSP 大马</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81Godzilla%EF%BC%88%E5%93%A5%E6%96%AF%E6%8B%89%EF%BC%89JSP%E6%9C%A8%E9%A9%AC%E6%93%8D%E4%BD%9C"><span class="toc-text">2、Godzilla（哥斯拉）JSP木马操作</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring-%E5%92%8C-SpringMVC"><span class="toc-text">Spring 和 SpringMVC</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF-Spring"><span class="toc-text">一、什么是 Spring</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF-SpringMVC"><span class="toc-text">二、什么是 SpringMVC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF-MVC"><span class="toc-text">三、什么是 MVC</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1%E3%80%81%E6%A0%B8%E5%BF%83%E6%9E%B6%E6%9E%84%E6%B5%81%E7%A8%8B"><span class="toc-text">3.1、核心架构流程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81IDEA-%E5%88%9B%E5%BB%BA-Spring-%E9%A1%B9%E7%9B%AE"><span class="toc-text">四、IDEA 创建 Spring 项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%8B%93%E5%B1%95-Spring-Spring-MVC-%E7%9A%84%E9%A1%B9%E7%9B%AE"><span class="toc-text">五、拓展 Spring + Spring MVC 的项目</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpingBoot-%E5%92%8C-SpringCloud"><span class="toc-text">SpingBoot 和 SpringCloud</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AFSrping-Boot"><span class="toc-text">一、什么是Srping Boot</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Spring-Boot-%E9%A1%B9%E7%9B%AE%E7%AE%80%E4%BB%8B"><span class="toc-text">二、Spring Boot 项目简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AFSpring-Cloud"><span class="toc-text">三、什么是Spring Cloud</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Java-%E5%88%86%E5%B1%82%E6%80%9D%E6%83%B3%E4%B8%8E-MVC-%E6%A8%A1%E5%BC%8F"><span class="toc-text">Java 分层思想与 MVC 模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81Java-%E5%88%86%E5%B1%82%E6%80%9D%E6%83%B3"><span class="toc-text">一、Java 分层思想</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%88%86%E5%B1%82%E8%AE%B2%E8%A7%A3"><span class="toc-text">1、分层讲解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E4%BB%A3%E7%A0%81%E6%A1%88%E5%88%97"><span class="toc-text">2、代码案列</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1%E3%80%81java-%E7%9B%AE%E5%BD%95"><span class="toc-text">2.1、java 目录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2%E3%80%81resources-%E7%9B%AE%E5%BD%95"><span class="toc-text">2.2、resources 目录</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Java-MVC-%E6%A8%A1%E5%BC%8F"><span class="toc-text">二、Java MVC 模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E6%A8%A1%E5%BC%8F%E8%AE%B2%E8%A7%A3"><span class="toc-text">1、模式讲解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E4%BB%A3%E7%A0%81%E6%A1%88%E4%BE%8B"><span class="toc-text">2、代码案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%85%B6%E4%BB%96"><span class="toc-text">三、其他</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Java-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E4%B9%8B%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-text">Java 文件操作之文件上传</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81Multipartfile-%E6%96%B9%E5%BC%8F%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-text">一、Multipartfile 方式文件上传</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E7%AE%80%E4%BB%8B"><span class="toc-text">1、简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-text">2、环境搭建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B"><span class="toc-text">3、代码示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81ServletFileUpload-%E6%96%B9%E5%BC%8F%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-text">二、ServletFileUpload 方式文件上传</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E7%AE%80%E4%BB%8B-2"><span class="toc-text">1、简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-text">2、创建项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AETomcat"><span class="toc-text">3、环境配置Tomcat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B"><span class="toc-text">4、代码示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%8B%93%E5%B1%95%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E9%A1%B9%E7%9B%AE%E5%AD%A6%E4%B9%A0"><span class="toc-text">三、拓展文件上传项目学习</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Java-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E4%B9%8B%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96%E4%B8%8E%E4%B8%8B%E8%BD%BD"><span class="toc-text">Java 文件操作之文件读取与下载</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%96%B0%E5%BB%BA-Java-%E5%9F%BA%E7%A1%80%E5%B7%A5%E7%A8%8B"><span class="toc-text">一、新建 Java 基础工程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96-%E4%B8%8B%E8%BD%BD%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95"><span class="toc-text">二、文件读取&#x2F;下载实现方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%B8%80%EF%BC%9A%E4%BD%BF%E7%94%A8java-nio-file-Files%E8%AF%BB%E5%8F%96%E6%96%87%E6%9C%AC"><span class="toc-text">方法一：使用java.nio.file.Files读取文本</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E7%AE%80%E8%BF%B0"><span class="toc-text">1、简述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="toc-text">2、实现代码</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%BA%8C%EF%BC%9A%E4%BD%BF%E7%94%A8java-io-FileReader%E7%B1%BB%E8%AF%BB%E5%8F%96%E6%96%87%E6%9C%AC"><span class="toc-text">方法二：使用java.io.FileReader类读取文本</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E7%AE%80%E8%BF%B0-2"><span class="toc-text">1、简述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81-2"><span class="toc-text">2、实现代码</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%B8%89%EF%BC%9A%E4%BD%BF%E7%94%A8java-io-BufferedReader%E8%AF%BB%E5%8F%96%E6%96%87%E6%9C%AC"><span class="toc-text">方法三：使用java.io.BufferedReader读取文本</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E7%AE%80%E8%BF%B0-3"><span class="toc-text">1、简述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81-3"><span class="toc-text">2、实现代码</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E5%9B%9B%EF%BC%9A%E4%BD%BF%E7%94%A8-Scanner-%E8%AF%BB%E5%8F%96%E6%96%87%E6%9C%AC"><span class="toc-text">方法四：使用 Scanner 读取文本</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E7%AE%80%E8%BF%B0-4"><span class="toc-text">1、简述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81-4"><span class="toc-text">2、实现代码</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%BA%94%EF%BC%9A%E4%BD%BF%E7%94%A8RandomAccessFile%E6%96%AD%E7%82%B9%E7%BB%AD%E4%BC%A0%E8%AF%BB%E5%8F%96%E6%96%87%E6%9C%AC"><span class="toc-text">方法五：使用RandomAccessFile断点续传读取文本</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E7%AE%80%E8%BF%B0-5"><span class="toc-text">1、简述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81-5"><span class="toc-text">2、实现代码</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E5%85%AD%EF%BC%9A%E4%BD%BF%E7%94%A8-commons-io%E8%AF%BB%E5%8F%96%E6%96%87%E6%9C%AC"><span class="toc-text">方式六：使用 commons-io读取文本</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E7%AE%80%E8%BF%B0-6"><span class="toc-text">1、简述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81-6"><span class="toc-text">2、实现代码</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%B8%83%EF%BC%9A%E4%BD%BF%E7%94%A8-Files-readString-%E8%AF%BB%E5%8F%96%E6%96%87%E6%9C%AC"><span class="toc-text">方法七：使用 Files.readString 读取文本</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E3%80%81%E7%AE%80%E8%BF%B0"><span class="toc-text">①、简述</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%91%A1%E3%80%81%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="toc-text">②、实现代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96-%E4%B8%8B%E8%BD%BD-JavaWeb-%E5%B7%A5%E7%A8%8B"><span class="toc-text">三、文件读取&#x2F;下载 JavaWeb 工程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Java-%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C"><span class="toc-text">Java 命令执行</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%B6%E3%80%81%E5%89%8D%E8%A8%80"><span class="toc-text">零、前言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%88%9B%E5%BB%BADemo%E5%B7%A5%E7%A8%8B"><span class="toc-text">一、创建Demo工程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81java-lang-Runtime%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4"><span class="toc-text">二、java.lang.Runtime执行命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E"><span class="toc-text">1、使用说明</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-1%E3%80%81exec-String-command"><span class="toc-text">1.1、exec(String command)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2%E3%80%81exec-String-cmdarray"><span class="toc-text">1.2、exec(String[] cmdarray)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B"><span class="toc-text">2、代码示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81java-lang-ProcessBuilder%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4"><span class="toc-text">三、java.lang.ProcessBuilder执行命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E-2"><span class="toc-text">1、使用说明</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-1%E3%80%81command-%E6%96%B9%E6%B3%95"><span class="toc-text">1.1、command()方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2%E3%80%81start-%E6%96%B9%E6%B3%95"><span class="toc-text">1.2、start()方法</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B-2"><span class="toc-text">2、代码示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81java-lang-UNIXProcess-ProcessImpl%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4"><span class="toc-text">四、java.lang.UNIXProcess&#x2F;ProcessImpl执行命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E-3"><span class="toc-text">1、使用说明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B-3"><span class="toc-text">2、代码示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4Java-Web%E9%A1%B9%E7%9B%AE"><span class="toc-text">五、执行命令Java Web项目</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%88%9B%E5%BB%BAjavawebexec%E5%B7%A5%E7%A8%8B"><span class="toc-text">1、创建javawebexec工程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-text">2、示例代码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Java-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="toc-text">Java 数据库操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81Java%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C%E4%B9%8B-JDBC"><span class="toc-text">一、Java数据库操作之 JDBC</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E7%AE%80%E4%BB%8B-3"><span class="toc-text">1、简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B-4"><span class="toc-text">2、代码示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Java%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C%E4%B9%8BMybatis"><span class="toc-text">二、Java数据库操作之Mybatis</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E7%AE%80%E8%BF%B0-7"><span class="toc-text">1、简述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B-5"><span class="toc-text">2、代码示例</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1%E3%80%81%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E5%B7%A5%E7%A8%8B"><span class="toc-text">2.1、创建项目工程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2%E3%80%81%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">2.2、创建数据库</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3%E3%80%81%E7%BC%96%E5%86%99%E4%BB%A3%E7%A0%81"><span class="toc-text">2.3、编写代码</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Java-%E5%8F%8D%E5%B0%84%E5%9F%BA%E7%A1%80"><span class="toc-text">Java 反射基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81Java%E5%8F%8D%E5%B0%84%E5%9F%BA%E7%A1%80"><span class="toc-text">一、Java反射基础</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E5%8F%8D%E5%B0%84%EF%BC%9F"><span class="toc-text">1、什么是反射？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E5%88%9B%E5%BB%BA%E7%BB%83%E4%B9%A0%E9%A1%B9%E7%9B%AE%E5%B7%A5%E7%A8%8B"><span class="toc-text">2、创建练习项目工程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E8%8E%B7%E5%8F%96-Class-%E5%AF%B9%E8%B1%A1"><span class="toc-text">3、获取 Class 对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81Java-%E5%8F%8D%E5%B0%84-API"><span class="toc-text">4、Java 反射 API</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#4-1%E3%80%81java-lang-Class"><span class="toc-text">4.1、java.lang.Class</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#4-1-1%E3%80%81%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-text">4.1.1、示例代码</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-2%E3%80%81%E8%8E%B7%E5%8F%96%E5%B1%9E%E6%80%A7%E4%BF%A1%E6%81%AF"><span class="toc-text">4.2、获取属性信息</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-1%E3%80%81%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-text">4.2.1、示例代码</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-3%E3%80%81%E8%8E%B7%E5%8F%96%E6%96%B9%E6%B3%95%E4%BF%A1%E6%81%AF"><span class="toc-text">4.3、获取方法信息</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#4-3-1%E3%80%81%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-text">4.3.1、示例代码</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-4%E3%80%81%E8%8E%B7%E5%8F%96%E4%BF%AE%E9%A5%B0%E4%BF%A1%E6%81%AF"><span class="toc-text">4.4、获取修饰信息</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#4-4-1%E3%80%81%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-text">4.4.1、示例代码</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-5%E3%80%81%E8%8E%B7%E5%8F%96%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%BF%A1%E6%81%AF"><span class="toc-text">4.5、获取构造函数信息</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#4-5-1%E3%80%81%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-text">4.5.1、示例代码</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-6%E3%80%81%E8%8E%B7%E5%8F%96%E5%8F%82%E6%95%B0%E4%BF%A1%E6%81%AF"><span class="toc-text">4.6、获取参数信息</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-7%E3%80%81%E7%BB%95%E8%BF%87%E7%A7%81%E6%9C%89%E9%99%90%E5%88%B6"><span class="toc-text">4.7、绕过私有限制</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#4-7-1%E3%80%81%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-text">4.7.1、示例代码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%E6%95%B4%E7%90%86"><span class="toc-text">5、常用方法整理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81getMethod"><span class="toc-text">1、getMethod()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81getDeclaredMethod"><span class="toc-text">2、getDeclaredMethod()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81getConstructor"><span class="toc-text">3、getConstructor()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E3%80%81getDeclaredConstructor"><span class="toc-text">4、getDeclaredConstructor()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5%E3%80%81setAccessible"><span class="toc-text">5、setAccessible()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6%E3%80%81newInstance"><span class="toc-text">6、newInstance()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7%E3%80%81invoke"><span class="toc-text">7、invoke()</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Java-%E5%8F%8D%E5%B0%84%E5%88%B0%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C"><span class="toc-text">二、Java 反射到命令执行</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%8F%8D%E5%B0%84%E4%B9%8BJava-lang-Runtime"><span class="toc-text">1、反射之Java.lang.Runtime</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-1%E3%80%81%E6%96%B9%E5%BC%8F%E4%B8%80%EF%BC%9A%E9%80%9A%E8%BF%87getMethod"><span class="toc-text">1.1、方式一：通过getMethod</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2%E3%80%81%E6%96%B9%E5%BC%8F%E4%BA%8C%EF%BC%9A%E9%80%9A%E8%BF%87-getDeclaredConstructor"><span class="toc-text">1.2、方式二：通过 getDeclaredConstructor</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E5%8F%8D%E5%B0%84%E4%B9%8Bjava-lang-ProcessBuilder"><span class="toc-text">2、反射之java.lang.ProcessBuilder</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Java-%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%9F%BA%E7%A1%80"><span class="toc-text">Java 序列化与反序列化基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-text">一、序列化与反序列化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-text">1.1、什么是序列化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-text">1.2、什么是反序列化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3%E3%80%81%E7%94%A8%E9%80%94"><span class="toc-text">1.3、用途</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4%E3%80%81%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-text">1.4、示例代码</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-1%E3%80%81%E4%BB%A3%E7%A0%81-Demo-1"><span class="toc-text">1.3.1、代码 Demo - 1</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-2%E3%80%81%E4%BB%A3%E7%A0%81-Demo-2"><span class="toc-text">1.3.2、代码 Demo - 2</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-3-2-1%E3%80%81transient-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">1.3.2.1、transient 关键字</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-3-2-2%E3%80%81%E5%BA%8F%E5%88%97%E5%8C%96-ID"><span class="toc-text">1.3.2.2、序列化 ID</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-3-2-3%E3%80%81%E6%A1%88%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-text">1.3.2.3、案例代码</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-3%E3%80%81%E4%BB%A3%E7%A0%81-Demo-3"><span class="toc-text">1.3.3、代码 Demo - 3</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-3-3-1%E3%80%81%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E7%AE%80%E8%BF%B0"><span class="toc-text">1.3.3.1、反序列化漏洞简述</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-3-3-2%E3%80%81%E6%BC%8F%E6%B4%9E%E4%BB%A3%E7%A0%81"><span class="toc-text">1.3.3.2、漏洞代码</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RMI-%E5%9F%BA%E7%A1%80"><span class="toc-text">RMI 基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF-RMI"><span class="toc-text">1.1、什么是 RMI</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2%E3%80%81RMI-%E4%B8%AD%E7%9A%84%E4%B8%89%E4%B8%AA%E8%A7%92%E8%89%B2"><span class="toc-text">1.2、RMI 中的三个角色</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-1%E3%80%81%E5%AD%98%E6%A0%B9%E5%92%8C%E9%AA%A8%E6%9E%B6"><span class="toc-text">1.2.1、存根和骨架</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3%E3%80%81%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%811"><span class="toc-text">1.3、示例代码1</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E3%80%81%E5%88%9B%E5%BB%BA%E8%BF%9C%E7%A8%8B%E6%8E%A5%E5%8F%A3%E5%8F%8A%E5%A3%B0%E6%98%8E%E8%BF%9C%E7%A8%8B%E6%96%B9%E6%B3%95"><span class="toc-text">①、创建远程接口及声明远程方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E3%80%81%E5%AE%9E%E7%8E%B0%E8%BF%9C%E7%A8%8B%E6%8E%A5%E5%8F%A3%E5%8F%8A%E8%BF%9C%E7%A8%8B%E6%96%B9%E6%B3%95"><span class="toc-text">②、实现远程接口及远程方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2%E3%80%81%E5%90%AF%E5%8A%A8RMI%E6%B3%A8%E5%86%8C%E6%9C%8D%E5%8A%A1%EF%BC%8C%E5%B9%B6%E6%B3%A8%E5%86%8C%E8%BF%9C%E7%A8%8B%E5%AF%B9%E8%B1%A1"><span class="toc-text">③、启动RMI注册服务，并注册远程对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A3%E3%80%81%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%9F%A5%E6%89%BE%E8%BF%9C%E7%A8%8B%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%B9%B6%E8%B0%83%E7%94%A8%E8%BF%9C%E7%A8%8B%E6%96%B9%E6%B3%95"><span class="toc-text">④、客户端查找远程对象，并调用远程方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A4%E3%80%81%E6%89%A7%E8%A1%8C%E7%A8%8B%E5%BA%8F"><span class="toc-text">⑤、执行程序</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4%E3%80%81%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%812"><span class="toc-text">1.4、示例代码2</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JNDI-%E5%9F%BA%E7%A1%80"><span class="toc-text">JNDI 基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81JNDI-%E4%BB%8B%E7%BB%8D"><span class="toc-text">一、JNDI 介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF-JNDI"><span class="toc-text">1、什么是 JNDI</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-1%E3%80%81%E5%91%BD%E5%90%8D%E6%9C%8D%E5%8A%A1-Naming-Service"><span class="toc-text">1.1、命名服务 Naming Service</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2%E3%80%81%E7%9B%AE%E5%BD%95%E6%9C%8D%E5%8A%A1-Directory-Service"><span class="toc-text">1.2、目录服务 Directory Service</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-1%E3%80%81InitialContext%E7%B1%BB"><span class="toc-text">2.1.1、InitialContext类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-2%E3%80%81Reference%E7%B1%BB"><span class="toc-text">2.1.2、Reference类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2%E3%80%81javax-naming-directory"><span class="toc-text">2.2、javax.naming.directory</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3%E3%80%81javax-naming-ldap"><span class="toc-text">2.3、javax.naming.ldap</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-4%E3%80%81javax-naming-event"><span class="toc-text">2.4、javax.naming.event</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-5%E3%80%81javax-naming-spi"><span class="toc-text">2.5、javax.naming.spi</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81JNDI-%E6%93%8D%E4%BD%9C-RMI"><span class="toc-text">二、JNDI 操作 RMI</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%88%9B%E5%BB%BA%E5%B7%A5%E7%A8%8B"><span class="toc-text">1、创建工程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81JndiServer-%E4%BB%A3%E7%A0%81"><span class="toc-text">2、JndiServer 代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81JndiClient-%E4%BB%A3%E7%A0%81"><span class="toc-text">3、JndiClient 代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E8%BF%90%E8%A1%8C%E9%A1%B9%E7%9B%AE"><span class="toc-text">4、运行项目</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81JNDI-%E6%93%8D%E4%BD%9C-DNS"><span class="toc-text">三、JNDI 操作 DNS</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-color: transparent;"><div id="footer-wrap"><div id="ft"><div class="ft-item-1"><div class="t-top"><div class="t-t-l"><p class="ft-t t-l-t">格言🧬</p><div class="bg-ad"><div>再看看那个光点，它就在这里，这是家园，这是我们 —— 你所爱的每一个人，你认识的一个人，你听说过的每一个人，曾经有过的每一个人，都在它上面度过他们的一生✨</div><div class="btn-xz-box"><a class="btn-xz" target="_blank" rel="noopener" href="https://stellarium.org/">点击开启星辰之旅</a></div></div></div><div class="t-t-r"><p class="ft-t t-l-t">猜你想看💡</p><ul class="ft-links"><li><a href="/life/music">听点音乐</a><a href="/box/nav/">网址导航</a></li><li><a href="/social/link/">我的朋友</a><a href="/comments/">留点什么</a></li><li><a href="/personal/about/">关于作者</a><a href="/archives/">文章归档</a></li><li><a href="/categories/">文章分类</a><a href="/tags/">文章标签</a></li><li><a href="/box/gallery/">我的画廊</a><a href="/personal/bb/">我的唠叨</a></li><li><a href="/site/time/">建设进程</a><a href="/site/census/">网站统计</a></li></ul></div></div></div><div class="ft-item-2"><p class="ft-t">推荐友链⌛</p><div class="ft-img-group"><div class="img-group-item"><a target="_blank" rel="noopener" href="https://www.fomal.cc/" title="Fomalhaut🥝"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.fomal.cc/assets/avatar.webp" alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://nullpointer.top/" title="和光同尘"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.nullpointer.top/img/avatar_hu63c7d7d33625004ecc1bebcc651d1be3_23616_300x0_resize_q75_box.jpg" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="广告位招租"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="广告位招租"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="广告位招租"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="广告位招租"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="广告位招租"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="广告位招租"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div></div></div></div><div class="copyright"><span><b>&copy;2022-2024</b></span><span><b>&nbsp;&nbsp;By NoneVector</b></span></div><div id="workboard"></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><a class="icon-V hidden" onclick="switchNightMode()" title="浅色和深色模式转换"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button><button class="share" type="button" title="右键模式" onclick="changeMouseMode()"><i class="fas fa-mouse"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog right_side"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button class="share" type="button" title="分享链接" onclick="share()"><i class="fas fa-share-nodes"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i><span id="percent">0<span>%</span></span></button><button id="go-down" type="button" title="直达底部" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" href="javascript:rmf.scrollToTop();"><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span>复制</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();"><i class="fa fa-search"></i><span>百度搜索</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();"><i class="fa fa-link"></i><span>转到链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()"><i class="fa fa-copy"></i><span>粘贴</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><i class="fas fa-comment"></i><span>空降评论</span></a><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><i class="fa fa-link"></i><span>复制本文地址</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>新窗口打开</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><i class="fa fa-link"></i><span>转到链接</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()"><i class="fa fa-download"></i><span>保存图片</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>在新窗口打开</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制图片链接</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:randomPost()"><i class="fa fa-paper-plane"></i><span>随便逛逛</span></a><a class="rightMenu-item" href="javascript:switchNightMode();"><i class="fa fa-moon"></i><span>昼夜切换</span></a><a class="rightMenu-item" href="/personal/about/"><i class="fa fa-info-circle"></i><span>关于博客</span></a><a class="rightMenu-item" href="javascript:toggleWinbox();"><i class="fas fa-cog"></i><span>美化设置</span></a><a class="rightMenu-item" href="javascript:rmf.fullScreen();"><i class="fas fa-expand"></i><span>切换全屏</span></a><a class="rightMenu-item" href="javascript:window.print();"><i class="fa-solid fa-print"></i><span>打印页面</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.umd.min.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js" type="module"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vanilla-lazyload/17.3.1/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><script async="async">var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())
setTimeout(function(){preloader.endLoading();}, 5000);
document.getElementById('loading-box').addEventListener('click',()=> {preloader.endLoading()})</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://wxxtwikoo.nonevector.top/',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://wxxtwikoo.nonevector.top/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.staticfile.org/twikoo/1.6.8/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://wxxtwikoo.nonevector.top/',
        region: '',
        pageSize: 5,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.staticfile.org/twikoo/1.6.8/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script src="https://unpkg.zhimg.com/jquery@3.7.0/dist/jquery.min.js"></script><script async src="https://cdn1.tianli0.top/npm/vue@2.6.14/dist/vue.min.js"></script><script async src="https://cdn1.tianli0.top/npm/element-ui@2.15.6/lib/index.js"></script><script async src="https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script><script defer type="text/javascript" src="https://cdn1.tianli0.top/npm/sweetalert2@8.19.0/dist/sweetalert2.all.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer src="https://cdn1.tianli0.top/gh/nextapps-de/winbox/dist/winbox.bundle.min.js"></script><script async src="//at.alicdn.com/t/c/font_4255441_r3xftclwcht.js"></script><script async src="https://cdn.wpon.cn/2022-sucai/Gold-ingot.js"></script><canvas id="universe"></canvas><canvas id="snow"></canvas><script defer src="/js/fomal.js"></script><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.js"></script><script src="https://cdn1.tianli0.top/npm/js-heo@1.0.12/metingjs/Meting.min.js"></script><script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show","#web_bg",".js-pjax","#bibi","body > title","#app","#tag-echarts","#posts-echart","#categories-echarts"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://nonevector.top/categories/CTF/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🍼 NVのCTF学习笔记 (3)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://nonevector.top/categories/密码学/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🍟 NVの密码学笔记 (12)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://nonevector.top/categories/代码审计/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🍨 NVの审计笔记 (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://nonevector.top/categories/随记/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🍥 NVの零碎知识点 (7)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item" style="visibility: hidden"></div><div class="magnet_item" style="visibility: hidden"></div><a class="magnet_link_more"  href="https://nonevector.top/categories/" style="flex:1;text-align: center;margin-bottom: 10px;">查看更多...</a></div></div>';
    console.log('已挂载magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(33.333333333333336% - 5px);background: #e9e9e9;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: var(--text-bg-hover)}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v6.2.0" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题版本Butterfly_v4.3.1" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" data-title="本站采用多线部署，主线路托管于Vercel" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Vercel-brightgreen?style=flat&amp;logo=Vercel" alt=""/></a><a class="github-badge" target="_blank" href="https://dashboard.4everland.org/" style="margin-inline:5px" data-title="本站采用多线部署，备用线路托管于4EVERLAND" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-4EVERLAND-22DDDD?style=flat&amp;logo=IPFS" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a><a class="github-badge" target="_blank" href="https://icp.gov.moe/?keyword=20235457/" style="margin-inline:5px" data-title="本站已加入萌ICP豪华套餐，萌ICP备20235457号" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/%E8%90%8CICP%E5%A4%87-20235457%E5%8F%B7-ff1385?logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAABHOSURBVHic7ZtpmFTF1cd/dXuf6VmYnhlAdiQsGkEWAQEVNb4KGsW8btGAxo1FFAIuBAyLa1BQUFGRqCB5RY3mSWIUI0beyCaLgKjI4gayjszWPT3T6618OLfn9gzTyMCgXzzP00/fW1Vd95z/PVudqoaf6Cf6iX4M0lo79P/vv09vLL1fa+34sfhw/tAP1Fo7uHf1dJo9kk9F6U2goUXLfP3g2kom952mlEr+kPyoH+IhWmtlzv9slvHEyuZs/dLA5R5GtseHw5ABCRPC0RoS8b+ZvbuYxvhBB/lN5zuVUvpE83bCANBaK5bufdR8/INWxrJPweBi/J4cXA5QKjXI4iLtPpaAUDQEjre4rCdMHLSPs4pPGBhNDoD+tPI+c87KLsaijyBecxHZ7ly8LutpSoQ0NVTHIJqQdq8LfC4wlD1GA5E4VEeD+HLe4Za+mOPP2u3o6L2rKfltMgCS01fPMOatPoXvDg7G6ys8XCANkQRUR9HZOaiRA9B3D0JVJ9AzP0C9sBbi1ZDtITNgkUratllmjh2w1XF3n2lNwfdxAaBf+HwqT67qwaYd4HSdhd9ThMM4XKWrYqANuKIPjD8TPbAYhbzkdAb0u3tRc1fD25vBQMBw1zOZRBKqYt+RTKzQA09F3T7wY3XNyfcdqwyNBkC/t28cc1cP5s2PQDEAv6cYt/NwJqvjEI9D/1Pg9n5wbRdb4J1hmLsG5q0Evxs9eiBq3JnQyi1TAOpPW+HJ1bBlJ7jdkOXmMHCjCaiKlIBztb66L+qO/h+pgcUPNDkA+ovqsfrxlReoBWshFu5JlqcNXpf8Ol1Na2IQiUKrVujb+6PG9wWPNUkUmLse5q6CfQfAcECXIthZKqYSi8HJbWD8IPTYHrXM6QoNj61GzVsNZYfA5xV/oeqZV00camIHycldy+gB/1aPDH7iuAHQL24dw6R3hnLwwGl4PW3xuTM5KvBmw0390BPOgo5eW8Vf3oF+fBVqwzZwWW9SKaioAv1HGPZ/sHQH5LghnoRwDJIJOOc09PgBqGEdhBeAT4Lw2ErU4vWQjEK2uwF/YUJ17FuisS20bQNP/HKpGtZ+3rEBkDvzGczqUXhch9t1OAamQl/aEzV+AJzb0mZ05UHUnDXwxkZQSfC7wW3lXKVhwICnfwmj+0FlBNo8AqFqyMsGlyNNvaNguOG6vjC+P/QqqDUj/c/dqLmr4L0t4HAIGPVDbHUU2rWer7aNHHVsADD5GQJZo2rRDUUgFkP37Iy6YyD6hq61E+hdNai5a2HBGqgKQpYHvE5bVQEOheG7yVCY3fADT5kL+4IiSEqIWvWOQkEARg9EjzsDVeSyAX96C+rJNbDtK/B6BQylRBvCzFfRPzQeAP1F9V10um8iAX9zAEIR9F1DUJMGoP21CMGcjahp70HoIHiyRcWNNKHTKZqAkwtg09jD+55dB6P/AQFfw7/VGpKmhMNYHN2tPWrcIPTIn9svoSSBmr4cFq4UPgBKQ/MVMzMCYGTqYHtJezCa1779uAP1wADwg3r9S9SgxSjjHtSEl2DDjXBZLzAzzibkccLm/TBlWd32kjCMfiWz8CDtTgfkeMHnRX2+G8YsQanfw4WvwNI9UOxEP32BaEvqN3C53lw2qfEAfFMOTosZU0OLPAD0W7vgyqdgw07pCxRB50J449fQKhdiSYibdppbnxwGdGxWt604G3BlZAWQ9UJ5DZSGYEhnKJkifAX8sGobDH0UtlSINrj9aWm2o9j8urxtowEwvw2CYXUnTWhdIPPtqQS80LcNfD0JDk2xBfv6TqiaJgIlMwCgEB/w0iZwT4URr4tpeLxHFr6FH16+CuZcCm9cC0XZQAwqo1Yk8Fu8AYU5Ak6Kr92VGafOuBw29lWBI00Dii3HdaAKnE74aF/D6jr5XfiqHAp8DU+c74MrXpZrvwde/xQWb4RAdmb1dyjYfgiuOq1uu54Fs1bAve+BQ6H3BiVCtMhGfWEJbSiM76oyiXkEEyivEmcGYGp0sQikS6rAaYDHAe0byEAfXg55nsPb0ynfJx+nIR670J9ZeJA+twOufe3wvlyvvCBDoUrCMrwwRyIAiAyHqjNOnRmAYMRmytSoPAFAVVRLu8Ogjt2W1cj30G7iA5qa4kkY1q1u221vwsjXIc8rglZEpD3HYztkBQQTGafNXBGqTthBUgM+K6xUJW3YDDes/Ab+dwmUlMKlp8PBKtt5NiVpoFMAHlslWjPyDPj0APgt01Sqdnmt/U5UWq3BrM5sApkBqF+YSgkVT3NuBT4453lJYwPN4P2vZJzzBJT4AlnQ52nxB4k4rP0WdlWAK02JLd5UepsCzMyKnhmAw16ibrg93dl5T3CJMZBlseKFVz8RP+SoJyygta7HZuYyY2aOnfUmjlvXblWLxY9GSkFWvbxBa3CltDS9HXBlzjEyA+B32YIqhQ7XCKq5bjvJCEUlR8hvIOTFkhCsgYJsO5rUp0hC6gam9YZSixp3AyYUikI0mkEKl5iGT6KPCkbtZ2qN4c/KKGZmAPJ8djKhQJXJw3WBH2VqYejus+C05nD1q7Z6poTvWADv3witZtr1vhSZGspCMOhkGNsferWEhIb1e2DmCth6oG5eEIrCXWfB/b9omNclH8O1f4YCAUBX1KBqIxiQm9knZQTALM7CSM+mSsSTqpZZIkA8Ab/tDR2awfDXRRNS9hiKwtRzoZkPep8EHx+QdQBIfC4Lw39Gwtkd6j60WxGM6AmLN8GIVyCQa3n3JAxuL2O+rbQSNEvALJcV/jScJOk6B9NzGBMKcxsPAK2biVAgk+0JAqBb5aGSGjChtfXAG3vDix9JZqc16CRcfor0dSyQrNGD9JWFYOtE6FYMH++H6/4Cn+0Vgfq1h79eB8N7SoIzbBEEcmSeqGUmbe9D8o80jXK5ADe0E0HVgZCdxSY1tPOTiTLHh/b5dj7vMGB3qVx3LbZs1mGHoFF9IRKT60gCLk5LWH4WkFwepDg64RwR/p0dcPos2F0hbzqQA58ehFYzYMchuKwbDD1F5ksntx8KciTfT31yPfJCfhYQt1VeKesYDZhmjPZFkUYDYHQtimAmRSpDQVg0QHUvAJKy8gMIRqF7C8jxicaEYzCmnz1R5yJbk6IRmD1Uroc8DwUFYhqpoonPBXl50PMpGfPoRRCu5/jiSfExsYT9SZqAC1q4Ufvj2GFAA+afOaf57xsNAL0LJoNejNa2M9pcJtrnzJGsDODOpfJ9Ux8IxwEThnYRO/6qDLoWih0mTGhhLYOf3wDK1XB0cDmklLXiGzilWMBOj7udC6WocnJAPp0Lpb2d1G30xn2grNKYBnDFlVIZwscRAFBKRcnKj9dGAqcTvXq3XPdoDe0s+3/1E6nd3d4fYlVwRXdpX7BBlqFdCgUUU0NLy54//84uezXIlRO+sEwuL6cuANvGw+axsPE2+awfA+V/EDAAtXqXPXcyCe1bZH4O37c73LsVbPpKfIDbgVr+NYw5HQZ3AI9l88EgPL1OQiJuuOUMaV+xFXb1kbEgPqva+k0gyw6xDZFpygIHoLKGOg5vzmrxPSmtdDvg7e1w+alyv/wbyRBBTOXMtvDNMQJgnt8RY+1OKTh4HPCuVQUa2hl2fGuN0rBgvQBwaz/4n07w1nbAYb/FolxZIW4/KPfX9oDJ/wTtOXwZrDUQg1+dKkkSybps/u7vYKSZjwaSYXjuGqkYr9kJBRZ40USUc9tXsySzjJl9AGBc3LWSWCyM1uJVg4dgfwLOOwkGdIIDIcAFXxyEsmqYP0x++Ow6UF7Y9p3cnxwQR2U44bVPoF0+XNVbSuTppTOtoTQIM4bI/awVsiuUTm6vXU/I90nJvWUbKHSg1pYCCQFHazBjL3PLafccUcYjddInMAXcS2odocsjpSyA7gEJWxjS/sw6+3f//EwY23FI7js2EyeY54Ub3pC2V6+BEb2gtELK5YfCcn3vBTD1PAl/05ZJbpFOsRqpPZRVy6cyCMP7SN+fN4HXAixpQl5hQikV5wh0RBNQSiX1kNdMPvhM6gFZLpi/Fu6x7HxHqSyaslxiBlMGw5vbZFqXIf0gjjCVKRoKOj8GOybAoitEa5bukPGXdLUfftIfITfLVvVUYrPwGmsDxBoXScBl3UX9F66XUJpqH94PFhxJwqM5InNz73KWbqrC5/bjdMDXe+DrKHTwwKZ9AoDTgL0hmPQvWLIF8r2iMRGrFNU6z3bkPhfsC0HWdHj+cvh1DztrBJj3IYx9UzLB1KLIoSSJAri+V4NsqhUlsiETsCrCkUiYm3uVfx8A31u60VobqKkLKHDfiGFIYnJlP1g0FP3UFtTtr0hNT2txWh6nvZROmlIjqIiIlqQ7vKQpFV0zBs1yxElWhcHpFuHTcwStJeFqnQuxtHJbSQj+fisMaYM+fwlq7XbR1EQStPtFKu65WSl1xPrckX0AoJQyuWngIcLRECAPeGmV9I3tLpuiyaQIl+2uW0dwGKKK9YVP9RX4JA0GMYFArji2+gmSUpLultdIphmOQUW1ZJJD2kBJAvX+x/ZGaVWsigmDD32f8EcFAAB/unAS0egbEg2UhMSx70vfC1dDeT1vXl/Q76v4OoyjG+d0CMAOBeFqeP066bvlTdmLTO1iJZJvMLXfEb1/io4KAKWU5tyeJURiogV+D8x7F0LArztBtw72eZ8fgqpjcF5PGFQshy3+sSataBsJMWJQydEeqjrq8q3WWqHuXkggb4Q4uBi6WzvUut+igxqVNwUKsuzdpBNFSRMqEmhzujDf/kkoL5ftd62hNLwY/dD1RwvAUXOrlNLmVYN2EYqWAeBxodZvR7+wDZWr0K/eBGXBzKbQFKQ1lAdh1VgRfvoa2L3fPntQURM0J160qzFH6hpdwNfc+xIFnuEYhlXaCqMPzIDmLtTED+Cxt2VtfyR7PhbSGkor0HOHo+7oDlsqocdDdtUokYSo8ZaqufeSxkzbeH39y43fUBasrHWIeV5Up1nSN/ts9PWDZAe3KTXBEp7JvxLhI0CP2RI+U46vIlhpLh/1RWOnbjQA6sqOU7m0/4tU1lQA4HKCjqJazZH+hZfAhKFQWmnvzx0PJU0R/rHfwINnyo5X8cOQ65TIIXZfwdghCx39C8c3Wp5j5Uu3fHwOoYrr8brzASli5DeDvRYPr30JVz8vESNV9WnUA6yjMdVJWD4WBjeHKOjih1FmzI75oWgFXVovUltubbTwcLwHJZ0z5pDFDbidUh2piQFu2HkXtHRBhQl958POXdDMX3cXJ+Ok1lGYiio4oxt8eIPo6WchOG0W5DhspxeJVuLOXqTK7hl3rDIcV8xSiWnjCSYWEUvIZrzPDc4EnDQVFmyFfAN2jEYvvAFCVjk8kWzYP6QOWJaG0QkH+m9jYN0NaAN4aD38/AHId9YVPul56XiEhyY6K6y99z2II3krXlehnM6S8rfu3Rm1/EawKmHM2QxT34FQpRyD9bgAbZ81LCpCz7wYfmudPtsThfNegJ27ZZGTcnjhSCnZOc+p0nsmHy/vTRardIcnHmTX/pE0yw7UMhpNQFUNjLoAnjlfxgEs24uauwbe2gw40Ff2gt8NgDOLhKkw6JvfRL2yEnKyLKCwHF5VKb1+Nl9tvGlKU/DdpME6OfztB4zFy0fRLCeAI+2sX1VUNjZGDETffz6qbcMnSPTnIbj336i/fij7fKlTpSDmUREMMvHSp9Tss5tEeGhiAAD0vw88wJD5XUnGLiDfl1v35GYMaqLoTm1RY/qhb+kNNUnUcxvg2Q9hz37ISjsLDBJKy2uC5OYs4z9jdqvT8yY0Jb8n4CiH9ReZce/PNp5Y1hqP60L8nrpAxK3T5AlrAeVyytt2GnUPQIeiQeLmv5j+yz1M6z/xRPxr5IQAkCKttWLE27NZvOIknI6h+D05hx15h7r3SROCkRCmepvbBu/nqV9MOJH/HTqhAKRIa63MGR/ONh7/oAWVpZfg9ebgc9Y9h1gTh2ikhubN/85d5+5nYq8T8sbr0w8CQIq01op1h2abz28oMl752CBYdjGYb1HY0uTa0zFv7VNpnJo77of+69yPQlprh/6yatKP+afJn+gn+on4L4cd/2hQhc+BAAAAAElFTkSuQmCC" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></p>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/22.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/anmi/Pixiv/78445866_p0.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-06-26</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/22.html&quot;);" href="javascript:void(0);" alt="">JAVA代码审计一</a><div class="blog-slider__text">JAVA安全基础</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/22.html&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/21.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/anmi/Pixiv/62608184_p0.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-03-16</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/21.html&quot;);" href="javascript:void(0);" alt="">快速武器新系统</a><div class="blog-slider__text">对陌生的电脑快速武装成自己熟悉的武器库</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/21.html&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/20.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/anmi/Pixiv/71936516_p0.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-02-25</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/20.html&quot;);" href="javascript:void(0);" alt="">mysql手工注入及报错注入笔记</a><div class="blog-slider__text">mysql注入笔记整理</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/20.html&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/5.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/op/image/hutao/hutao.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-10-27</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/5.html&quot;);" href="javascript:void(0);" alt="">古典密码</a><div class="blog-slider__text">古典密码大全</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/5.html&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/0.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/op/image/qiqi/qiqi.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-08-09</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/0.html&quot;);" href="javascript:void(0);" alt="">Markdown语法与外挂标签写法汇总</a><div class="blog-slider__text">🥧本文汇总Markdown格式以及外挂标签在网页端的渲染效果，可作为文档进行查询</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/0.html&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/17.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/anmi/圖片 (5).jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-11-29</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/17.html&quot;);" href="javascript:void(0);" alt="">CTF之CTFHub学习记录</a><div class="blog-slider__text">CTFHub技能树+详细Write up</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/17.html&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/19.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://git.acwing.com/w2x/data_bank/-/raw/master/anmi/Pixiv/45136636_p0.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-12-10</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/19.html&quot;);" href="javascript:void(0);" alt="">CTF之WebGoat学习记录</a><div class="blog-slider__text">WebGoat8.22之Write up</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/19.html&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__bounceInLeft');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('blog-slider swiper-container-fade swiper-container-horizontal');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '1.5s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('catalog_magnet');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '1.5s·');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('pagination');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__jackInTheBox');
    arr[i].setAttribute('data-wow-duration', '1.5s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('flink-list-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__flipInY');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('flink-list-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__animated');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('article-sort-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__slideInRight');
    arr[i].setAttribute('data-wow-duration', '1.5s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('site-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__flipInY');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('site-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__animated');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('gitZone');
      var item_html = '<div class="recent-post-item" id="gitcalendarBar" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 320px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('已挂载gitcalendar')
      }

    if( document.getElementById('gitZone') && (location.pathname ==='/site/census/'|| '/site/census/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("/api?null",['#d9e0df', '#c6e0dc', '#a8dcd4', '#9adcd2', '#89ded1', '#77e0d0', '#5fdecb', '#47dcc6', '#39dcc3', '#1fdabe', '#00dab9'],'null')
    }
  </script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body></html>